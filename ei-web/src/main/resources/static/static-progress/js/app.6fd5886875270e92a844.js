webpackJsonp([1],{"+cgv":function(t,e){},"+uVa":function(t,e){},0:function(t,e,s){s("j1ja"),t.exports=s("NHnr")},"0PFd":function(t,e){t.exports={getUrlKey:function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},appendParams:function(t,e){var s=t;return-1==t.indexOf("?")?s+="?":s+="&",$.isPlainObject(e)?s+=$.param(e):s+=e,s}}},"1GZU":function(t,e){t.exports={getAllUser:"/ei-web/projectProgress/getAllUser",add:"/ei-web/projectProgress/add",update:"/ei-web/projectProgress/update",list:"/ei-web/projectProgress/list",getDeleteTableDataById:"/ei-web/deleteTableDataById",progressCommentAdd:"/ei-web/progressComment/add",progressCommentList:"/ei-web/progressComment/list",commentCount:"/ei-web/projectProgress/commentCount"}},"3f40":function(t,e){},"4qOc":function(t,e){},"5efz":function(t,e){},Cz52:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAS2UlEQVR4Xu2dD5RcdXXHv/e92d2kkN2ZIYn02CYmO7NwDNgGlVCOiKWiCC1KOQQ8paSCNckMiSAcqYI1etRSWi2E3dmswhGkPa2p/w5otUC1QORPQqmtxQM7s5sKSEuSztv83+zOe7fnzS4xxISZ93u/N+/f5RwOS+bd+7v3e+8nM2/v/H6PIP+IAqLAcRUg0UYUEAWOr4AAIt0hCryOAgKItIcoIIBID4gCagrIO4iabmKVEgUEkJQUWtJUU0AAUdNNrFKigACSkkJLmmoKCCBquolVShQQQFJSaElTTQEBRE03sUqJAgJISgotaaopIICo6SZWKVFAAElJoSVNNQUEEDXdxColCgggKSm0pKmmgACipptYpUQBASQlhZY01RQQQNR0E6uUKCCApKTQkqaaAgKImm5ilRIFBJCUFFrSVFNAAFHTTaxSooAAkpJCS5pqCgggarqJVUoUEEBSUmhJU00BAURNN7FKiQICSEoKLWmqKSCAqOkmVilRQABJSaElTTUFAgckVxk/h8g+Dw4CX0tNArHqhAIO0f+BeMvEmsJPQMSdWFPHGoE1bXZwfDEZ9j0EvEtHoOIjGQowYIExYpUKn4wDKIEA0lcZXWoyPQ7CG5JRVslCvwJ8b7008Cf6/er1GAgg+aHqNhDepjdU8ZY0BWzGZbvLxW9EOS/tgPRtGnub6Tjbopy0xBYNBZj5Uas8cG40ojl2FNoByVZq6wzwxignLbFFRoHJeqk4NzLRHCMQASTK1UlBbPVSUXsP6pRNe3DZwdF3GgY9ojNI8ZVMBRg8bpUG+qOcnXZAMMJd+UbtBRBOjnLiElskFPhsvVT8dCQiOU4Q+gEBkK1ULybGt4lgRDl5iS1EBZhfrs/rHcBVJ+8PMYqWSwcCiLtqfqh6DQh3tYxALkifAsz7HYPOmVhb/PeoJx8YIG7iuUr1VgJuUhWBwY8B5Kjai10wChDj10EYUPHOgO0QvWf32sIPVew7bRMoIM13kkp1M4DLVBJj8Jet0sBqFVuxCUaBeSPPz880jKeJsFhlBQb+2CoV/1bFNgybwAHBBs7kF9b+GcB5Kgky8GdWqfiXKrZio1mBL704N9czuYUIZ6h4ZqZbrHLh8yq2YdkED4ib2df+94Tcvr1PEnCaUqJMV9TLha8r2YqRHgU2s5nbWb2fiC5Ucsi4u14ufljJNkSjzgAC4ISvjL+he9reSsAir/kyeNqBeeHuUv/DXm3lej0K5Cuj9wC0SsUbM35g7SxchA3xu5/sGCCusH0j1X6jAffza9az0Mz72TF/x1rX/1PPtmLgS4H8cPXTYGxQc8Jb63O7zsWHlkyq2Ydr1VFA3FR7h8fPzLDtTtrneE6d8cpBw3nrwbWn/MKzrRgoKZCt1FYZ4HtUjN1JOR/qeuvE9UsmVOyjYNNxQNyk80O1Cxj8PaVBIvNzNvWcvbu02IqCgEmOoa8y9m4Dzg8IMD3nyXiFM8aZ1ur+FzzbRsggFEBmIPE1SHyyPn/qXKxcNhUhLRMVSt9g9QyT+FEQneA5MffjsGGcZa0t/Jdn24gZhAaIq0OuUv0CAZ9Q0YSB71g7CpfG8cZPJd9O2sxsl248TaD5Xtdl5oZjGO+NyyCwVX6hAtJ8J5FBYqsadfT15iDQNtxfyat+y3ZlvVT8x44GHeBioQPie5DIfJNVHrgtQI3S49rvIBC42SoVv5AkwcIHxFVTBonh99QGNnILqg+kbRDYSvhoAKJhkMgO3j1x7cCjrRKW14+tQK4yOkKgj6joE+dBYKt8IwOIG6i/QSL2sGO8QwaJrUr+q6/nhmo3E/HnvFu6FvEeBLbKOVKAuMHKILFVyfS+nh+qXQ7if1DxmoRBYKu8IwdI8zdbMkhsVTctr88MAu1/IlCXZ4cJGQS2yjuSgMxAIoPEVsXz83ruzrHTybCfSPsgsJWGkQXEDTw3NPo5Irq5VRLHel0GicdXzR0EGmQ/pXI0bNIGga16K9KANCGpVO8j4MpWiRwbEtmReLQufZWf5wxMbZNBYHsdFXlAsJnN/K7ag+o7EvnjVmngr9qTI+FXbX62O7+r2/0m9VkqmTLwSatU/AsV27jaRB8QV9mZQeJjBCz3KjQDTEwfTP2ORHcQuLD2TQI+4FXD5vUx3RGolOsRRvEABMC8wZdOyhgHn1HdkZj2QaIMAtVQiQ0gbnozg0R+iohO8pwup3eQmKtUbyLgVs+azbx1xHpHoFrOv7SKFSBu2Nnh6nKD8bjsSGyv9DIIbE+n410VO0DcRPwOEmHTivr64h5/0kXf2j1InAw8LINA9VrFEpAZSNQHic0HtyyYPj/JOxJnBoHOFhB6PbdHgnYEes79KIPYAjL7TvJZEH9KRYTmIHFt4Q/j8CBJr/nNHX7+jXMd499kEOhVuV+9PtaAuOn4GSSCeWO9PPBR/zJGx0N+Y7UXJj8FolMVo0rUjkBFDQ6bxR4Qv4NEMN1YLxe+6FfISNhvfrY7t7PrISJ6p0o8zPiEVS4q/rZLZcXo28QfEFdjGSQCzJQbrn1LBoF6oUsGIDJIRH5o9A4QrVdpDwbut3YULpETYhJ4D3JkSn4HidOZzIq9q5c8p9JkYdrkK9WPAVD8mMhb6/Onz0nyb/T81CYx7yCviuBrkAj+xUHiFXE62jQ7XLuEmN3vWCnUkp93DnWdFeejQf00fzu2CqK24zbca5qDROLvqh2Zyc/FZZA4Owh8iEDdnhVnvDLp9JxxYN2ilz3bpsggkYDM/vr3SgLuU6llHAaJ80a2n9rVaLibnmQQqFLkNm0SC4ibf36ougEEpccMR3mQ2BwEMj0F0BvbrPPhy9K2I9CrPkdfn2hAZt9JlHckRnGQKINAvy3vzT7xgLiDxNzO2neJcIE3aQ5ffUO9VPySoq1esxHuyjWqDysPAuV5j57rkXxAXEm+un1O7mDjcdUdiUx06cTawrc9q6vTYGYQ+PcEXK7kNqU7ApW0OsIoHYAcHiQe2EqgpV5FY/AUmK4GmS+AHIdsdhpgB2Q6RNz8t/nztPuz40w1/yzjkDHz/5jqav7XIMc5aNgOGT0OGY5DB92f5zqGYTuG2XCszLSDrqyDXdMOMpMOegoOcnBwGZzccPU2At3oNXb3ehkEqqg2Y5MaQJr3IyNji9Cwn1HakaiucciWMgj0U4BUAeIK1RwkOvyY0oFpfpQOxVYGgX5lTx0grmB9w7XzDOYHlQaJfhXvlL0MArUonUpAmh+3KlXlQaIW5QN1wnuZjLOT8IzAQGVqw3lqAWl+3KpU/9wAPtOGTrG5xB0EAubvWuX+LbEJOsKBphqQ2XcS9UFiNAsrOwI11iX1gGgYJGoshz9XLM9r9CfgMawFEFcUd5B4oLGVCKdrV7hTDmUQGIjSAsisrLlKbZjAawJROWCnDFjWjsJ82RGoX2gBJAmAMHZa5eJC/e0hHgUQAUQoeB0FBBAVQJi31UvFFfgMTLz5ZwZe6jXR02Pm7d2Gnek2Hcc02Jw02TENx5gy5xgZkx3DYKNhMhsGk2F2Tc/+bNgmMzX/LEOOidmfgcaV7T6WmeUdJDDIBRBVQMoDZwZWlZlBZtsnsgsgwVVCABFAguuuBHgWQASQBLRxcCkIIAJIU4F5lfFTTNiXGwwjuHbT65kJU8z0xES58CO9nn/pTQBJOSC5kbE+2PYmAl0RVJMF7ZeBH9vdcy7e8+HfrOteSwBJMSDZv9mepe7GFiIs091YnfbHjGfJxtm6H4wkgKQYkHxl9B6AVnW6mYNaj5k/b5UHbtHpXwBJKSB9lZ/nDEztTNSmMeaX6+UBz2eFvR5QAkhKAXGPZwXx93X+bRsFX/UeuxfXnLpXVywCSEoByQ2OXUiG8z1djRQVP3Xum4fywn264hFAUgpI353/vcQ0p8d1NVIk/MhHrODK4Onr7u53sRLwVZPc0Ogjqqc0BlcJdc9yk66uXUvLVAIyXDuN2HkcoHktBYr6BYxR2Hi7/Jo3oEKlERBXypkHDvEDKifFB1QKFbdPNrrnXCSDQhXp2rRJKyBNeTZWe/q6+PdNxzgHcE5jokybsoV8Ge8D04hVLj4QVCByk57Sm/SgGippfgUQASRpPa01HwFEANHaUElzJoAIIEnraa35CCACiNaGSpozAUQASVpPa81HABFAtDZU0pwJIAJI0npaaz4CiACitaGS5kwAEUCS1tNa8xFABBCtDZU0ZwKIAJK0ntaajwAigGhtqKQ5E0AEkKT1tNZ8BBABRGtDJc2ZACKANPeD5DO0ipmvAMXn6FFingLRE9Omc+fe1afsCgJOASTlgGSHRn/bAD0Awm8E0WCd8Mngus3mBXvK/dt0ryeApBiQXGX8LYTGlkTsSQfvtU1avnt1cUwnJAJImgFJ3Kkm+JpVLmo9SlUASSkg2eHtbzK4sV3n37ah+2LeXy8PnKgzDgEkpYDkhqp/QIT7dTZTFHw1uuecpPN0EwEkpYD0bRo933TowSg0tc4Y6mahG6tpWpdPASSlgPTe9WLenJrckaTT3Rn8n1Zp4Ld0weH6EUBSCoibdm6oei8RrtLZUCH7+tN6qXiXzhgEkBQDkqQnTAH8zfqO4kpsIEcA0alAigFxU29C0tPYRMDlAcgauEtmHAL4r61S8VMgYt0LyjtIygF5taHmDb50kmlMNo8eNTguR4/Svimb7923vrhTNxiv+hNABJCgeisRfgUQASQRjRxUEgKIABJUbyXCrwAigCSikYNKQgARQILqrUT4FUAEkEQ0clBJCCAqgAA/q8+fWo6Vy6aCKkyuUr2JgFvb8c+MnVa5uLCda+UabwoIIGqAuFY73Md/TRkY3Le2sMOb7K2vFkBaa9SJKwQQdUCalgyeBujrsI3brHX9P9VVNAFEl5L+/AggPgE5Un4GfkzAHfX5hW9hJdl+SiOA+FFPn60AMqtlfmj0DhCt1yEtAy8CGOJDmZGJ65dMqPgUQFRU028jgBx+B6mWCRjULPEBZr7PNs0v7lnTX/XiWwDxolZw1wogs9r2DtUKJvEoBbVHhvkhZvN2q7z0++1861QACa7pvXgWQI5QK1+pbgZwmRcBFa6tMtNGa96JX8VVJ+8/nr0AoqBsACYCyBGiul/5zhgHfkigtwSg9WtcMrCbgbsNptvr5YJ7z/KafwSQoCvQnn8B5OjGHBnrg+18HIB7T9LXnozqVzHDAeF+Bm6fKBUfedVTJwHJb6q+mW2+BURXBPYRU12i41lOMvNWIvpXOXpUv7itPY68/Gs5Z/8qOPgYEQqtDfxfweD/YOCOifnTf5fb1X19Jybp2eHq1eTgKxSjM3mPVlqOHvXfe+oemCk3NP4+Ivs6EJ2v7qh9SwbvIsYYiFa0Y6X6VZO+4dFLTaZvtLNG9K+Ro0dDr1F+sLqMCR8FcBURekIPaDYAVUByQ6PjRLQkKnn4jYNZjh71q6EW++bNPE2uIfC1IJysxakPJyqAZIeryw3GMz6WjZ6pHD0asZqMcFeuUVsJwg0ELA8rOiVABqvvNwx8J6yYg1pXjh4NSlmffnNDY+9w71OY6ZJO3/CqAJLEo0cZsK0dhTnYQA2f5TxsLr/m1aXkrJ/s4PhikL3OIP5Ip567oQJIEo8eBfND9fLAe3SWVADRqeaRvoZ2nJilPR8iONcRaGlQy7h+VQBx7ZJ09Ci7MjD93kS58COdWgsgOtU8lq8NbOQW1C4iwnUAzgtiOVVAknT0KDOvscoDI7r1FUB0K/o6/nJ3jp1OpnM9g/+IQN26llYFxF0//keP8k8cNm/cfW3/v+jS80g/AkgQqrbweeJwbWGGeQ0xriXCAr8huPtPrFJxkR8/M0ePHjwNFJ8T/5mMfbvX9D/tJ+9WtgJIK4WCfH3zs93ZXT0fJOYbiHC66lIMPGKViu9StRe74ysggESkO7KV6rmE5n3K+71+YZDBa63SwKaIpJKoMASQiJWzrzK61GRjPeBcA6I2HkjJz9fnF5f53QMfMRkiE44AEplSvDaQ/MZqr5PB1cS4jgiLjxWm++3fQ2b3+w6sftP/RDSN2IclgES9hBvYyC4Y/4BB9sUAvR3MiwB6jonvtszi3TofWBl1KcKITwAJQ3VZMzYKCCCxKZUEGoYCAkgYqsuasVFAAIlNqSTQMBQQQMJQXdaMjQICSGxKJYGGoYAAEobqsmZsFBBAYlMqCTQMBQSQMFSXNWOjgAASm1JJoGEoIICEobqsGRsFBJDYlEoCDUMBASQM1WXN2CgggMSmVBJoGAoIIGGoLmvGRgEBJDalkkDDUEAACUN1WTM2CgggsSmVBBqGAgJIGKrLmrFRQACJTakk0DAUEEDCUF3WjI0CAkhsSiWBhqGAABKG6rJmbBQQQGJTKgk0DAUEkDBUlzVjo4AAEptSSaBhKCCAhKG6rBkbBQSQ2JRKAg1DAQEkDNVlzdgoIIDEplQSaBgKCCBhqC5rxkaB/wfQXWJQ9KD5gQAAAABJRU5ErkJggg=="},JZKm:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=s("VU/8")({name:"App"},n,!1,function(t){s("5efz")},null,null).exports,l=s("mtWM"),o=s.n(l),r=s("/ocq"),c=s("BO1k"),d=s.n(c),u=s("yPE/"),m=s.n(u),p={props:{isShowTip:{type:Boolean,default:!0},hiddenUpload:{type:Boolean,default:!1},TipTitle:{type:String,default:"只能上传jpg / png文件， 且不超过500kb"},uploadTitle:{type:String,default:"点击上传"},limit:{type:Number,default:1},extraData:{type:Object,default:function(){return{bizTableName:"",bizTablePk:"",fieldName:""}}},size:{type:String,default:"small"},upLoadName:{type:String,default:"file"},contextPath:{type:String,default:"/ei-web/"},acceptFormat:{type:String,default:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP,.PDF,.rp,.vsd,.doc,.docx,.xls,.xlsx,.ppt,.pptx"},drag:{type:Boolean,default:!1},clearValue:{type:String,default:""},fields:{type:String,default:""}},data:function(){return{fileList:[],tokenValue:""}},computed:{updatePathText:function(){return this.contextPath+"attachController/upload?fieldToken="+this.tokenValue}},watch:{clearValue:function(t){""!==t&&(sessionStorage.clear(),this.tokenValue="",this.fileList=[])},fields:function(t){}},created:function(){""!=this.fields&&(this.tokenValue=this.fields),sessionStorage.clear()},mounted:function(){},methods:{getFileData:function(){var t=this;o()({url:this.contextPath+"attachController/getFileList?fieldToken="+this.tokenValue,method:"get"}).then(function(e){"0"===e.data.status||t.$message({type:"info",duration:1e3,message:e.data.msg})})},beforeUpload:function(t){},handleChange:function(t,e){var s=t.name.substring(t.name.lastIndexOf(".")+1);("rp"===s||"vsd"===s)&&(this.$message({message:"上传文件不能是 rp 、vsd 格式!",type:"warning"}),this.$refs.upload.clearFiles())},handleExceed:function(t,e){this.$message.warning("当前限制选择 "+t.length+" 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},handleRemove:function(t,e){o()({url:this.contextPath+"attachController/delete?fileId="+t.uid,method:"get"}).then(function(t){"0"===t.data.status&&e.length})},handleError:function(t,e,s){},handleSuccess:function(t,e,s){""!=this.fields?this.$emit("token-value",this.tokenValue):(void 0!==t.data.fieldToken?sessionStorage.setItem("fieldToken",t.data.fieldToken):this.tokenValue=sessionStorage.getItem("fieldToken"),this.tokenValue=sessionStorage.getItem("fieldToken"),this.$emit("token-value",this.tokenValue))},beforeRemove:function(t,e){return this.$confirm("确定移除 "+t.name+"？")},handlePreview:function(t){window.open(this.contextPath+"attachController/download?fileId="+t.uid)},hideHandler:function(){},showHander:function(){}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"upload-box"},[t.hiddenUpload?s("div",{staticClass:"fileView"},t._l(t.fileList,function(e){return s("h3",{key:e.uid},[s("a",{attrs:{href:t.contextPath+"attachController/download?fileId="+e.uid,target:"_blank"}},[t._v(t._s(e.name))])])}),0):t._e(),t._v(" "),s("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"},on:{show:t.showHander,hide:t.hideHandler}},[t.hiddenUpload?t._e():s("div",{staticClass:"el-upload-box"},[s("el-upload",{ref:"upload",attrs:{multiple:"",drag:t.drag,limit:t.limit,action:t.updatePathText,"auto-upload":!0,name:t.upLoadName,data:t.extraData,"file-list":t.fileList,accept:t.acceptFormat,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-error":t.handleError,"on-change":t.handleChange,"before-remove":t.beforeRemove,"before-upload":t.beforeUpload}},[t.drag?s("i",{staticClass:"el-icon-upload"}):t._e(),t._v(" "),t.drag?s("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处")]):t._e(),t._v(" "),s("el-button",{class:{active:t.hiddenUpload},attrs:{size:t.size,type:"primary"}},[t._v("\n                "+t._s(t.uploadTitle)+"\n            ")]),t._v(" "),t.isShowTip?s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.TipTitle))]):t._e()],1)],1),t._v(" "),s("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("附件")])],1)],1)},staticRenderFns:[]};var h=s("VU/8")(p,f,!1,function(t){s("Vb74")},null,null).exports,g=s("1GZU"),v=s.n(g),y=s("0PFd"),b=["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman"],I=m.a.import("formats/font");I.whitelist=b,m.a.register(I,!0);var x=[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,5,6,!1]}],["link"],[{color:[]}],[{font:b}],[{align:[]}]],j={props:{contentText:{type:String,default:""},id:{type:String,default:""},dataObj:{type:Object,default:function(){return{}}},fieldToken:{type:String,default:""},fields:{type:String,default:""},cacel:{type:Boolean,default:!1},userList:{type:Array,default:function(){return[]}},className:{type:Boolean,default:!1}},components:{fileUpload:h},data:function(){return{content:"",quillText:"",editorOption:{modules:{toolbar:{container:x}},placeholder:"请输入。。。"},buttonFlag:!1,restaurants:[],selectList:[],name:"",allUserIds:[],allUserNames:[],blurFlag:!0,cursorIndex:0,index:0,closeFlag:!1,itemName:"",list:[],loading:!1,selectFlag:!1,atMerberListDom:"",fileUploadId:"",valueClear:"",extraData:{bizTableName:"PROJECT_PROGRESS",bizTablePk:"",fieldName:"PROGRESS_ID"},projectObject:"",dealMark:"",dist:"",projectStaus:"",inveId:"",groupId:"",projectObjectName:"",inveName:"",isDisable:!1}},watch:{name:function(t){var e=this.restaurants,s=[],i=!0,n=!1,a=void 0;try{for(var l,o=d()(this.restaurants);!(i=(l=o.next()).done);i=!0){var r=l.value;r.name.indexOf(t)>-1&&s.push(r)}}catch(t){n=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}s.length,this.selectList=t?s:e},fields:function(t){},userList:function(t){}},created:function(){var t=this;this.fields,this.projectObject=Object(y.getUrlKey)("projectObject"),this.dealMark=Object(y.getUrlKey)("dealMark"),this.dist=Object(y.getUrlKey)("dist"),this.projectStaus=Object(y.getUrlKey)("PROJ_STATUS"),this.inveId=Object(y.getUrlKey)("INVE_ID"),this.groupId=Object(y.getUrlKey)("GROUP_ID"),this.projectObjectName=Object(y.getUrlKey)("PROJ_OBJECT_NAME"),this.inveName=Object(y.getUrlKey)("INVE_NAME"),this.contentText.length>0&&(this.content=this.contentText),0!==this.userList.length?(this.restaurants=this.userList,this.selectList=this.userList):this.$axios({url:v.a.getAllUser+"?groupId=5",method:"get"}).then(function(e){"0"===e.data.status&&(t.restaurants=e.data.data.AppUserIdNameList,t.selectList=e.data.data.AppUserIdNameList)})},mounted:function(){this.$refs.myQuillEditor.quill.focus()},methods:{getPosition:function(){var t=this.$refs.myQuillEditor.quill;if(t.getSelection(!0)){var e=t.getSelection(!0).index;this.cursorIndex=e;var s=t.getBounds(e).top,i=t.getBounds(e).left,n=this.$refs.selectBox;n.style.top=s+20+"px",n.style.left=i+"px",n.style.zIndex=10}},atPeople:function(t){var e=this;e.$refs.myQuillEditor.quill;"Digit2"==t.code&&t.shiftKey&&(this.closeFlag=!0,e.getPosition(),e.$refs.selectBox.style.display="block",e.$nextTick(function(){e.$refs.refSelect.focus()}),this.$refs.selectUl.style.display="block",this.atMerberListDom=this.$refs.selectUl,this.$refs.selectUl.getElementsByTagName("li")[0].classList.add("selected"))},clickLiTag:function(t){var e=this.$refs.myQuillEditor.quill;e.insertText(this.cursorIndex+1,"@"+t.name+" ",{color:"#356ccb"}),e.deleteText(this.cursorIndex-1,2),e.update(),e.setSelection(this.cursorIndex+t.name.length+2),e.format("color","#2c3e50");var s=this.$refs.selectBox;s.style.zIndex=-10,s.style.top="106px",s.style.left="100px",this.index=0,this.name="",this.allUserIds.push(t.id),this.allUserNames.push(t.name),this.$refs.selectUl.style.display="none"},handleClear:function(){var t=this.$refs.myQuillEditor.quill;t.deleteText(this.cursorIndex-1,1),t.setSelection(this.cursorIndex+2),t.update(),this.name="";var e=this.$refs.selectBox;e.style.zIndex=-10,e.style.top="106px",e.style.left="100px",this.$refs.selectUl.style.display="none"},handleBlur:function(){},handleChange:function(){},querySearch:function(t,e){var s=this.restaurants;e(t?s.filter(this.createFilter(t)):s)},createFilter:function(t){return function(e){return 0===e.name.toLowerCase().indexOf(t.toLowerCase())}},loadAll:function(){},handleSelect:function(t){var e=this.$refs.myQuillEditor.quill;e.insertText(this.cursorIndex+1,"@"+t.name+" ",{color:"#356ccb"}),e.deleteText(this.cursorIndex-1,2),e.update(),e.setSelection(this.cursorIndex+t.name.length+2),e.format("color","#2c3e50");var s=this.$refs.selectBox;s.style.zIndex=-10,s.style.top="106px",s.style.left="100px",this.index=0,this.name="",this.allUserIds.push(t.id),this.allUserNames.push(t.name)},handleIconClick:function(){var t=this.$refs.myQuillEditor.quill;t.deleteText(this.cursorIndex-1,1),t.setSelection(this.cursorIndex+2),t.update(),this.name="";var e=this.$refs.selectBox;e.style.zIndex=-10,e.style.top="106px",e.style.left="100px"},onEditorFocus:function(t){},onEditorChange:function(t){this.quillText=t.text,""!==t.text&&(this.buttonFlag=!0)},getTime:function(){var t=new Date;t.getFullYear(),t.getMonth(),t.getMonth(),t.getDate(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()},tokenValue:function(t){this.fileUploadId=t},add:function(){var t=this,e=this.allUserIds.join(","),s=this.allUserNames.join(","),i=void 0;this.isDisable=!0,""==this.id?(i={inveId:this.inveId,inveName:this.inveName,projectObject:this.projectObject,projectObjectName:this.projectObjectName,groupId:this.groupId,field2:"",dealMark:this.dealMark,dist:this.dist,projStatus:this.projectStaus,progressHtml:this.content,progressText:this.quillText,status:"0",progressResource:"0",progressFile:this.fileUploadId,allUserIds:e,allUserNames:s},this.$axios({url:v.a.add,method:"post",data:i}).then(function(e){"0"===e.data.status&&(t.isDisable=!1,t.$message({type:"info",message:""+e.data.msg}),t.allUserIds=[],t.allUserNames=[],t.$emit("updata-list"),t.content="",sessionStorage.clear(),t.valueClear=t.quillText,t.fileUploadId="")})):(i={inveId:this.dataObj.inveId,inveName:this.dataObj.inveName,projectObject:this.dataObj.projectObject,projectObjectName:this.dataObj.projectObjectName,groupId:this.dataObj.groupId,field2:"",dealMark:this.dealMark,dist:this.dist,projStatus:this.projectStaus,status:this.dataObj.status,progressResource:this.dataObj.progressResource,progressHtml:this.content,progressText:this.quillText,progressFile:this.fileUploadId,allUserIds:e,allUserNames:s},this.$axios({url:v.a.update+"/"+this.id,method:"post",data:i}).then(function(e){"0"===e.data.status&&(t.isDisable=!1,t.allUserIds=[],t.allUserNames=[],t.$emit("updata-list",t.id),sessionStorage.clear(),t.valueClear=t.quillText,t.fileUploadId="")}))},cacelHandle:function(){this.$emit("cacel-handle")}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-contanier aedit",class:t.className?"dedit":""},[s("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{focus:function(e){t.onEditorFocus(e)},change:function(e){t.onEditorChange(e)}},nativeOn:{keyup:function(e){t.atPeople(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),s("div",{ref:"selectBox",staticClass:"selectBox",staticStyle:{width:"88px"}},[s("el-input",{ref:"refSelect",attrs:{size:"mini",clearable:""},on:{clear:t.handleClear,change:t.handleChange,blur:t.handleBlur},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),s("ul",{ref:"selectUl",staticClass:"select-list"},t._l(t.selectList,function(e,i){return s("li",{key:i,on:{click:function(s){t.clickLiTag(e)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),0)],1),t._v(" "),s("div",{staticClass:"bottom bottom-upload"},[s("fileUpload",{attrs:{fields:t.fields,"clear-value":t.valueClear,drag:!0,"extra-data":t.extraData,isShowTip:!1,limit:10},on:{"token-value":t.tokenValue}}),t._v(" "),s("div",{staticClass:"button"},[t.cacel?s("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.cacelHandle}},[t._v("取消")]):t._e(),t._v(" "),s("el-button",{attrs:{type:"primary",plain:""==t.content,size:"mini",disabled:""==t.content||t.isDisable},on:{click:t.add}},[t._v("发布")])],1)],1)],1)},staticRenderFns:[]};var S=s("VU/8")(j,C,!1,function(t){s("mQnU")},null,null).exports,k=["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman"],A=m.a.import("formats/font");A.whitelist=k,m.a.register(A,!0);var U={props:{commentString:{type:String,default:""},contentHtml:{type:Object,default:function(){return{}}},userList:{type:Array,default:function(){return[]}},focus:{type:String,default:""}},data:function(){return{content:"",quillText:"",editorOption:{modules:{toolbar:{}},placeholder:""},buttonFlag:!1,restaurants:[],selectList:"",name:"",allUserIds:[],allUserNames:[],cursorIndex:0,index:0}},watch:{name:function(t){var e=this.restaurants,s=[],i=!0,n=!1,a=void 0;try{for(var l,o=d()(this.restaurants);!(i=(l=o.next()).done);i=!0){var r=l.value;r.name.indexOf(t)>-1&&s.push(r)}}catch(t){n=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}s.length,this.selectList=t?s:e},commentString:function(t){this.content=""},contentHtml:function(t){this.content="";var e=this.$refs.smyQuillEditor.quill;e.getSelection(!0).index;e.setContents([{insert:"@"+t.name,attributes:{color:"#356ccb",bold:!0}},{insert:"  "},{insert:"\n"}])},focus:function(t){"flex"==t&&this.$nextTick(function(){this.$refs.smyQuillEditor.quill.focus()})}},created:function(){var t=this;this.$axios({url:v.a.getAllUser+"?groupId=5",method:"get"}).then(function(e){"0"===e.data.status&&(t.restaurants=e.data.data.AppUserIdNameList,t.selectList=e.data.data.AppUserIdNameList)})},mounted:function(){},methods:{getPosition:function(){var t=this.$refs.smyQuillEditor.quill;if(t.getSelection(!0)){var e=t.getSelection(!0).index;this.cursorIndex=e;var s=t.getBounds(e).top,i=t.getBounds(e).left,n=this.$refs.selectBox;n.style.top=s-7+"px",n.style.left=i+"px",n.style.zIndex=10}},atPeople:function(t){var e=this;e.$refs.smyQuillEditor.quill;"Digit2"==t.code&&t.shiftKey&&(this.closeFlag=!0,e.getPosition(),e.$refs.selectBox.style.display="block",e.$nextTick(function(){e.$refs.refSelect.focus()}),this.$refs.selectUl.style.display="block",this.atMerberListDom=this.$refs.selectUl,this.$refs.selectUl.getElementsByTagName("li")[0].classList.add("selected"))},clickLiTag:function(t){var e=this.$refs.smyQuillEditor.quill;e.insertText(this.cursorIndex+1,"@"+t.name+" ",{color:"#356ccb"}),e.deleteText(this.cursorIndex-1,2),e.update(),e.setSelection(this.cursorIndex+t.name.length+2),e.format("color","#2c3e50");var s=this.$refs.selectBox;s.style.zIndex=-10,s.style.top="106px",s.style.left="100px",this.index=0,this.name="",this.allUserIds.push(t.id),this.allUserNames.push(t.name),this.$refs.selectUl.style.display="none"},handleClear:function(){var t=this.$refs.smyQuillEditor.quill;t.deleteText(this.cursorIndex-1,1),t.setSelection(this.cursorIndex+2),t.update(),this.name="";var e=this.$refs.selectBox;e.style.zIndex=-10,e.style.top="106px",e.style.left="100px",this.$refs.selectUl.style.display="none"},handleBlur:function(){},handleChange:function(){},insertMemberName:function(t){var e=this.$refs.smyQuillEditor.quill;e.insertText(this.cursorIndex+1,"@"+t+" ",{color:"#356ccb"}),e.deleteText(this.cursorIndex-1,1),e.update(),e.setSelection(this.cursorIndex+t.length+2),e.format("color","#2c3e50");var s=this.$refs.selectBox;s.style.zIndex=-10,s.style.top="106px",s.style.left="100px",this.index=0},querySearch:function(t,e){var s=this.restaurants;e(t?s.filter(this.createFilter(t)):s)},createFilter:function(t){return function(e){return 0===e.name.toLowerCase().indexOf(t.toLowerCase())}},loadAll:function(){},handleSelect:function(t){var e=this.$refs.smyQuillEditor.quill;e.insertText(this.cursorIndex+1,"@"+t.name+" ",{color:"#356ccb"}),e.deleteText(this.cursorIndex-1,1),e.update(),e.setSelection(this.cursorIndex+t.name.length+2),e.format("color","#2c3e50"),e.format("color","#2c3e50");var s=this.$refs.selectBox;s.style.zIndex=-10,s.style.top="106px",s.style.left="100px",this.index=0,this.name="",this.allUserIds.push(t.id),this.allUserNames.push(t.name)},handleIconClick:function(t){var e=this.$refs.smyQuillEditor.quill;e.deleteText(this.cursorIndex,1),e.update(),this.name="";var s=this.$refs.selectBox;s.style.zIndex=-10,s.style.top="106px",s.style.left="100px"},onEditorChange:function(t){this.quillText=t.text;var e={commentHtml:this.content,allUserIds:this.allUserIds,allUserNames:this.allUserNames,text:t.text};this.$emit("change-edit",e),""!==t.text&&(this.buttonFlag=!0)}}},O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-contanier sedit"},[s("quill-editor",{ref:"smyQuillEditor",attrs:{options:t.editorOption},on:{change:function(e){t.onEditorChange(e)}},nativeOn:{keyup:function(e){t.atPeople(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),s("div",{ref:"selectBox",staticClass:"selectBox",staticStyle:{width:"65px"}},[s("el-input",{ref:"refSelect",attrs:{size:"mini",clearable:""},on:{clear:t.handleClear,change:t.handleChange,blur:t.handleBlur},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),s("ul",{ref:"selectUl",staticClass:"select-list"},t._l(t.selectList,function(e,i){return s("li",{key:i,on:{click:function(s){t.clickLiTag(e)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),0)],1)],1)},staticRenderFns:[]};var _=s("VU/8")(U,O,!1,function(t){s("OLa6")},null,null).exports,T={props:{fieldToken:{type:String,default:""},contextPath:{type:String,default:"/ei-web/"},list:{type:Array,default:function(){return[]}},close:{type:Boolean,default:!0}},data:function(){return{fileList:[]}},watch:{list:function(t){this.getFileData(this.fieldToken)}},created:function(){this.getFileData(this.fieldToken)},methods:{getFileData:function(t){var e=this;this.$axios({url:this.contextPath+"attachController/getFileList?fieldToken="+t,method:"get"}).then(function(t){"0"===t.data.status?e.fileList=t.data.data.fileList:e.$message({type:"info",duration:1e3,message:t.data.msg})})},handleRemove:function(t){var e=this;this.$confirm("是否需要删除此条附件？","确认",{distinguishCancelAndClose:!0,confirmButtonText:"是的",cancelButtonText:"放弃删除"}).then(function(){var s="/ei-web/attachController/delete?fileId="+t;e.$axios({url:s,method:"get"}).then(function(t){"0"===t.data.status&&(e.$message({type:"info",message:""+t.data.msg}),e.getFileData(e.fieldToken))})}).catch(function(t){})}}},E={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"fileView"},t._l(t.fileList,function(e){return s("h3",{key:e.uid,staticClass:"auid"},[s("a",{staticStyle:{color:"#4578F0"},attrs:{href:t.contextPath+"attachController/download?fileId="+e.uid,target:"_blank"}},[t._v(t._s(e.name))]),t._v(" "),t.close?s("i",{staticClass:"el-icon-circle-close",on:{click:function(s){t.handleRemove(e.uid)}}}):t._e()])}),0)])},staticRenderFns:[]};var F=s("VU/8")(T,E,!1,function(t){s("PlFY")},null,null).exports,B={props:{list:{type:Array,default:function(){return[]}},progress:{type:Object,default:function(){return{}}}},data:function(){return{}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comment"},[s("div",[s("div",{ref:"commentInput",staticClass:"comment-input clearfix",staticStyle:{display:"none","margin-bottom":"5px"},attrs:{id:t.progress.progressId}},[s("div",{staticStyle:{width:"83%"}},[s("seditText",{attrs:{"user-list":t.userList,"comment-string":t.commentString},on:{"change-edit":t.changeEdit}})],1),t._v(" "),s("div",{staticClass:"button-list"},[s("el-button",{staticStyle:{"margin-top":"8px"},attrs:{size:"mini"},on:{click:function(e){t.comment(t.progress.progressId)}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{plain:t.commentText.length<2||t.isDisable,disabled:t.commentText.length<2||t.isDisable,size:"mini",type:"primary"},on:{click:function(e){t.commentAdd(t.progress)}}},[t._v("发布")])],1)]),t._v(" "),0!=t.list.length?s("ul",t._l(t.list,function(e,i){return s("li",{key:i},[s("div",{staticClass:"root-geEax_0"},[s("div",{staticClass:"clearfix"},[s("div",{staticClass:"fl root-1GoKu_0",staticStyle:{"background-color":"gray"}},[s("img",{staticStyle:{width:"100%",height:"100%","border-radius":"50%"},attrs:{src:e.filePath}})]),t._v(" "),s("span",{staticClass:"fl name-1befo_0"},[t._v(t._s(e.createName))]),t._v(" "),s("span",{staticClass:"fr date-j91W6_0"},[t._v(t._s(e.commentDt))])]),t._v(" "),s("div",{staticClass:"reply-container"},[s("div",{staticClass:"reply-content"},[s("div",{staticClass:"left",domProps:{innerHTML:t._s(e.commentHtml)}},[t._v("1")]),t._v(" "),s("div",{staticClass:"right"},["0"==e.isEditDelete?s("span",{on:{click:function(s){t.delete_click(e.commentId,"评论删除")}}},[t._v("删除")]):t._e(),t._v(" "),s("span",{on:{click:function(s){t.reply_click(e.commentId,e.createName)}}},[t._v("回复")])])]),t._v(" "),s("div",{ref:"scommentInput",refInFor:!0,staticClass:"reply-content-input",staticStyle:{display:"none"},attrs:{id:e.commentId}},[s("div",{staticStyle:{width:"83%"}},[s("seditText",{attrs:{"user-list":t.userList,"content-html":t.contentHtml,"comment-string":t.commentString},on:{"change-edit":t.changeEdit}})],1),t._v(" "),s("div",{staticClass:"button-list"},[s("el-button",{staticStyle:{"margin-top":"8px"},attrs:{size:"mini"},on:{click:function(e){t.reply_click_a(t.item.progressId)}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"primary",plain:t.commentText.length<2||t.isDisable,disabled:t.commentText.length<2||t.isDisable},on:{click:function(s){t.commentAdd(t.item,e)}}},[t._v("发布")])],1)])])])])}),0):t._e(),t._v(" "),s("div",{staticClass:"more-list-bottom"},[s("el-button",{staticStyle:{color:"#9094A3"},attrs:{type:"text",size:"mini"},on:{click:t.viewAll}},[t._v("查看所有")]),t._v(" "),s("el-button",{staticStyle:{color:"#9094A3"},attrs:{type:"text",size:"mini"},on:{click:t.collected}},[t._v("收起")])],1)])])},staticRenderFns:[]},N={components:{editText:S,seditText:_,uploadList:F,subComment:s("VU/8")(B,w,!1,null,null,null).exports},props:{commentList:{type:Array,default:function(){return[]}},filtersObj:{type:Object,default:function(){return{}}}},data:function(){return{list:[],dialogTableVisible:!1,htmlContent:"",editId:"",modelData:{},commentModel:{},commentId:"",commentString:"",contentHtml:{},listFieldToken:"",projectObject:"",dealMark:"",dist:"",projectStaus:"",inveId:"",groupId:"",projectObjectName:"",inveName:"",expandFlag:!0,moreLists:[],allFlag:!0,commentText:"",updataFileList:!1,isDisable:!1,userList:[],pageSize:4,page:1,progressCommentList:[],s_index:"",focusFlag:"",allIndex:"",editClassName:!1}},created:function(){var t=this;if(this.projectObject=Object(y.getUrlKey)("projectObject"),this.dealMark=Object(y.getUrlKey)("dealMark"),this.dist=Object(y.getUrlKey)("dist"),this.projectStaus=Object(y.getUrlKey)("PROJ_STATUS"),this.inveId=Object(y.getUrlKey)("INVE_ID"),this.groupId=Object(y.getUrlKey)("GROUP_ID"),this.projectObjectName=Object(y.getUrlKey)("PROJ_OBJECT_NAME"),this.inveName=Object(y.getUrlKey)("INVE_NAME"),this.getUserList(),""!==this.groupId){var e={keyword:"",createBy:"",startTime:null,endTime:null,progressResource:"",inveId:this.inveId,projectObject:this.projectObject,groupId:this.groupId,pageSize:this.pageSize,currPage:this.page};this.$axios({url:v.a.list,method:"post",data:e}).then(function(e){"0"===e.data.status&&(t.list=e.data.data)});var s={keyword:"",createBy:"",startTime:null,endTime:null,progressResource:"",inveId:this.inveId,projectObject:this.projectObject,groupId:this.groupId,pageSize:1e3,currPage:this.page};this.$axios({url:v.a.list,method:"post",data:s}).then(function(e){"0"===e.data.status&&(t.moreLists=e.data.data)})}},watch:{commentList:function(t){if(this.expandFlag)this.list=t.slice(0,4),this.moreLists=t;else{var e=this.page;this.getList(1e4,e)}},list:function(t){var e=!0,s=!1,i=void 0;try{for(var n,a=d()(t);!(e=(n=a.next()).done);e=!0){var l=n.value;this.timeFn(l.progressDate)>30||l.thatLoginUserId!=l.createBy||"1"==l.progressResource?l.isEditDelete=1:l.isEditDelete=0;var o=!0,r=!1,c=void 0;try{for(var u,m=d()(l.progressCommentList);!(o=(u=m.next()).done);o=!0){var p=u.value;this.timeFn(l.createDt)>30||p.thatLoginUserId!=p.createBy?p.isEditDelete=1:p.isEditDelete=0}}catch(t){r=!0,c=t}finally{try{!o&&m.return&&m.return()}finally{if(r)throw c}}}}catch(t){s=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(s)throw i}}}},filters:{formatTime:function(t){"string"==typeof t&&(t=t.replace(/-/g,"/"));var e=new Date(t),s=(Date.now()-e)/1e3;return s<10?"几秒前":s<3600?Math.ceil(s/60)+"分钟前":s<86400?Math.ceil(s/3600)+"小时前":s<172800?"1天前":t}},mounted:function(){var t=this;this.$nextTick(function(){setTimeout(function(){$(".viewprojectObjectInfo").on("click",function(){t.viewprojectObjectInfo()}),$(".viewFundInfo").on("click",function(){var e=$(this)[0].dataset.id;for(var s in t.moreLists)t.moreLists[s].progressId==e&&t.viewFundInfo(t.moreLists[s].inveId,t.moreLists[s].projectObject)}),$(".viewProjectInfo").on("click",function(){var e=$(this)[0].dataset.id;for(var s in t.moreLists)t.moreLists[s].progressId==e&&t.viewProjectInfo(t.moreLists[s].projectId)})},2e3)})},methods:{viewprojectObjectInfo:function(){window.open("/eiweb/enterpriaseInformation/toEnterpraiseInformationJspView.action?projectObject="+this.projectObject+"&dealMark=view&PROJ_OBJECT_NAME="+encodeURI(this.projectObjectName))},viewFundInfo:function(t,e){var s=Object(y.appendParams)("/eiweb/action/bizObjectBase.action",{keyValues:t,entId:e,tableName:"BD_T_FUND_INFO",dealMark:"view",sequenceName:"SEQ_FUND_ID",springJndiId:"YHKG_DS_EI",resultJsp:"../WEB-INF/views/financingManage/fundInfomation.jsp",className:"com.founder.ei.bizobject.FundInfomationObj",openMethod:"2"});window.open(s,"_blank")},viewProjectInfo:function(t){var e=Object(y.appendParams)("/eiweb/action/bizObjectBase.action",{keyValues:t,tableName:"TZ_T_PROJ_INFO",dealMark:this.dealMark,isUpdate:"",dist:this.dist,sequenceName:"",springJndiId:"YHKG_DS_EI",resultJsp:"../WEB-INF/views/projectInformation_new/projectInformation.jsp",className:"com.founder.ei.bizobject.ProjectInformationObj",openMethod:"2"});window.open(e,"_blank")},timeFn:function(t){"string"==typeof t&&(t=t.replace(/-/g,"/"));var e=new Date(t),s=(new Date).getTime()-e.getTime();return Math.floor(s/864e5)},getUserList:function(){var t=this;this.$axios({url:v.a.getAllUser+"?groupId=5",method:"get"}).then(function(e){"0"===e.data.status&&(t.userList=e.data.data.AppUserIdNameList)})},getList:function(t,e){var s=this,i=this,n=void 0;n=void 0!==this.filtersObj.groupId?{keyword:this.filtersObj.keyword,createBy:this.filtersObj.createBy,startTime:this.filtersObj.startTime,endTime:this.filtersObj.endTime,progressResource:this.filtersObj.progressResource,inveId:this.inveId,projectObject:this.projectObject,groupId:this.groupId,pageSize:t,currPage:e}:{keyword:"",createBy:"",startTime:null,endTime:null,progressResource:"",inveId:this.inveId,projectObject:this.projectObject,groupId:this.groupId,pageSize:t,currPage:e},this.$axios({url:v.a.list,method:"post",data:n}).then(function(t){"0"===t.data.status&&(s.moreLists=t.data.data,s.list=t.data.data,s.$nextTick(function(){setTimeout(function(){$(".viewprojectObjectInfo").on("click",function(){i.viewprojectObjectInfo()}),$(".viewFundInfo").on("click",function(){var t=$(this)[0].dataset.id;for(var e in i.moreLists)i.moreLists[e].progressId==t&&i.viewFundInfo(i.moreLists[e].inveId,i.moreLists[e].projectObject)}),$(".viewProjectInfo").on("click",function(){var t=$(this)[0].dataset.id;for(var e in i.moreLists)i.moreLists[e].progressId==t&&i.viewProjectInfo(i.moreLists[e].projectId)})},2e3)}))})},commentList1:function(t,e,s,i){var n=this,a=v.a.progressCommentList+"?pageSize="+t+"&currPage="+e+"&progressId="+s;this.$axios({url:a,method:"get"}).then(function(t){if("0"===t.data.status){var e=t.data.data,s=!0,a=!1,l=void 0;try{for(var o,r=d()(e);!(s=(o=r.next()).done);s=!0){var c=o.value;n.timeFn(c.createDt)>30||c.thatLoginUserId!=c.createBy?c.isEditDelete=1:c.isEditDelete=0}}catch(t){a=!0,l=t}finally{try{!s&&r.return&&r.return()}finally{if(a)throw l}}n.$set(n.list[i],"progressCommentList",e)}})},commentCount:function(t,e){var s=this,i=v.a.commentCount+"?progressId="+t;this.$axios({url:i,method:"get"}).then(function(t){"0"===t.data.status&&(s.list[e].commentCount=t.data.data.commentCount)})},viewAll:function(t,e){for(var s=this.$refs.collectButton,i=0;i<this.$refs.allButton.length;i++)this.$refs.allButton[i].id==t&&(s[i].style.display="block",this.$refs.allButton[i].style.display="none");this.commentList1(1e4,this.page,t,e),this.allFlag=!1,this.allIndex=e},collected:function(t,e){for(var s=this.$refs.collectButton,i=0;i<this.$refs.allButton.length;i++)this.$refs.allButton[i].id==t&&(s[i].style.display="none",this.$refs.allButton[i].style.display="block");this.commentList1(2,this.page,t,e),this.allFlag=!0},renewEdit:function(t,e,s,i){this.editClassName=!0,this.modelData=s,this.dialogTableVisible=!0,this.editId=t,this.htmlContent=e,this.listFieldToken=s.progressFile,this.s_index=i},delete_click:function(t,e,s,i,n){var a=this,l=void 0,o=void 0,r="";"评论删除"===s?(l="PROGRESS_COMMENT",o="COMMENT_ID",r=e):(l="PROJECT_PROGRESS",o="PROGRESS_ID",r=t),this.$confirm("是否需要删除此条评论？","确认",{distinguishCancelAndClose:!0,confirmButtonText:"是的",cancelButtonText:"放弃删除"}).then(function(){var e=v.a.getDeleteTableDataById+"?tableName="+l+"&keyValue="+r+"&keyName="+o;a.$axios({url:e,method:"PUT"}).then(function(e){if("0"===e.data.status)if(a.$message({type:"info",message:""+e.data.msg}),"评论删除"===s)if(a.commentCount(t,i),a.allFlag)if(n>1){a.commentList1(1e3,a.page,t,i)}else{a.commentList1(2,a.page,t,i)}else{a.commentList1(1e3,a.page,t,i)}else a.getList()})})},changeEdit:function(t){this.commentText=t.text,this.commentModel=t},comment:function(t){for(var e in this.$refs.commentInput)this.$refs.commentInput[e].id==t&&("none"==this.$refs.commentInput[e].style.display?(this.$refs.commentInput[e].style.display="flex",this.commentId=t,this.focusFlag="flex"):(this.$refs.commentInput[e].style.display="none",this.commentId="",this.commentText="",this.focusFlag="none"))},reply_click_a:function(t){for(var e in this.$refs.scommentInput)this.$refs.scommentInput[e].id==t?"none"==this.$refs.scommentInput[e].style.display?this.$refs.scommentInput[e].style.display="flex":(this.$refs.scommentInput[e].style.display="none",this.commentText=""):this.$refs.scommentInput[e].style.display="none"},reply_click:function(t,e){for(var s in this.$refs.scommentInput)this.$refs.scommentInput[s].id==t&&"none"==this.$refs.scommentInput[s].style.display?(this.$refs.scommentInput[s].style.display="flex",this.contentHtml={id:t,name:e}):this.$refs.scommentInput[s].style.display="none"},commentAdd:function(t,e,s,i){var n=this;this.isDisable=!0,this.commentModel.allUserIds.push(Number(t.createBy)),this.commentModel.allUserNames.push(t.createName);var a,l=this.commentModel.allUserIds.join(","),o=this.commentModel.allUserNames.join(",");a={progressId:t.progressId,commentHtml:this.commentModel.commentHtml,status:"0",commentSource:"0",inveName:t.inveName,projectObjectName:t.projectObjectName,allUserIds:l,allUserNames:o,text:this.commentModel.text,dealMark:this.dealMark,dist:this.dist,projStatus:this.projectStaus},this.$axios({url:v.a.progressCommentAdd,method:"post",data:a}).then(function(a){if("0"===a.data.status){if(n.$message({type:"info",message:"发布成功"}),n.commentCount(t.progressId,s),n.commentString=n.commentModel.text,n.isDisable=!1,"hf"==i)for(var l in n.$refs.scommentInput)n.$refs.scommentInput[l].id==e.commentId&&(n.$refs.scommentInput[l].style.display="none");else for(var o in n.$refs.commentInput)n.$refs.commentInput[o].id==t.progressId&&(n.$refs.commentInput[o].style.display="none");if(n.allFlag){n.commentList1(2,n.page,t.progressId,s)}else{n.commentList1(1e3,n.page,t.progressId,s)}}})},updataList:function(t){if(this.s_index>4){this.getList(1e3,this.page,t)}else{this.getList(4,this.page,t)}this.dialogTableVisible=!1,this.$message({type:"info",message:"发布成功"})},moreList:function(){var t=this.page;this.expandFlag=!1,this.getList(1e4,t)},romahdusList:function(){this.expandFlag=!0,this.list=this.list.slice(0,4)}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"progress-contanier"},[t._l(t.list,function(e,i){return s("div",{key:i,staticClass:"progress-item"},[s("div",{staticClass:"top clearfix"},[s("div",{staticClass:"avatar root-1GoKu_0",staticStyle:{"background-color":"rgb(160, 212, 104)"}},[s("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.filePath}})]),t._v(" "),s("div",{staticClass:"fl name-box g-ellipsis"},[s("span",{staticClass:"name"},[t._v(t._s(e.createName))])]),t._v(" "),s("span",{staticClass:"time fr",attrs:{"data-v-8fb9b708":""}},[t._v(t._s(t._f("formatTime")(e.progressDate)))])]),t._v(" "),s("div",{staticClass:"item-content"},[s("div",{staticClass:"text ql-editor-result",domProps:{innerHTML:t._s(e.progressHtml)}}),t._v(" "),null!==e.progressFile?s("div",{staticClass:"files"},[s("span",{staticClass:"file-link"},[s("uploadList",{attrs:{close:"1"!=e.isEditDelete&&"","field-token":e.progressFile,list:t.list}})],1)]):t._e(),t._v(" "),s("div",{staticClass:"edit"},[s("div",{staticClass:"edit-button"},["0"==e.isEditDelete?s("el-button",{staticStyle:{color:"#9094A3"},attrs:{type:"text",icon:"el-icon-edit-outline",size:"mini"},on:{click:function(s){t.renewEdit(e.progressId,e.progressHtml,e,i)}}},[t._v("编辑")]):t._e(),t._v(" "),"0"==e.isEditDelete?s("el-button",{staticStyle:{color:"#9094A3"},attrs:{type:"text",icon:"el-icon-delete",size:"mini"},on:{click:function(s){t.delete_click(e.progressId,0,"评论",i)}}},[t._v("删除")]):t._e(),t._v(" "),s("el-button",{staticStyle:{color:"#9094A3"},attrs:{type:"text",id:e.progressId,icon:"el-icon-more",size:"mini"},on:{click:function(s){t.comment(e.progressId)}}},[t._v("评论("+t._s(e.commentCount)+")")])],1),t._v(" "),s("div",{staticClass:"comment",class:e.progressId==t.commentId||0!=e.commentCount?"commentBg":""},[s("div",[s("div",{ref:"commentInput",refInFor:!0,staticClass:"comment-input clearfix",staticStyle:{display:"none","margin-bottom":"5px"},attrs:{id:e.progressId}},[s("div",{staticStyle:{width:"83%"}},[s("seditText",{attrs:{focus:t.focusFlag,"user-list":t.userList,"comment-string":t.commentString},on:{"change-edit":t.changeEdit}})],1),t._v(" "),s("div",{staticClass:"button-list"},[s("el-button",{staticStyle:{"margin-top":"8px"},attrs:{size:"mini"},on:{click:function(s){t.comment(e.progressId)}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{plain:t.commentText.length<2||t.isDisable,disabled:t.commentText.length<2||t.isDisable,size:"mini",type:"primary"},on:{click:function(s){t.commentAdd(e,{},i,"pl")}}},[t._v("发布")])],1)]),t._v(" "),0!=e.commentCount?s("ul",{staticStyle:{"list-style-type":"none"}},t._l(e.progressCommentList,function(n,a){return s("li",{key:a},[s("div",{staticClass:"root-geEax_0"},[s("div",{staticClass:"clearfix"},[s("div",{staticClass:"fl root-1GoKu_0",staticStyle:{"background-color":"gray"}},[s("img",{staticStyle:{width:"100%",height:"100%","border-radius":"50%"},attrs:{src:n.filePath}})]),t._v(" "),s("span",{staticClass:"fl name-1befo_0"},[t._v(t._s(n.createName))]),t._v(" "),s("span",{staticClass:"fr date-j91W6_0"},[t._v(t._s(t._f("formatTime")(n.commentDt)))])]),t._v(" "),s("div",{staticClass:"reply-container"},[s("div",{staticClass:"reply-content"},[s("div",{staticClass:"left",domProps:{innerHTML:t._s(n.commentHtml)}},[t._v("1")]),t._v(" "),s("div",{staticClass:"right"},["0"==n.isEditDelete?s("span",{on:{click:function(s){t.delete_click(e.progressId,n.commentId,"评论删除",i,a)}}},[t._v("删除")]):t._e(),t._v(" "),s("span",{on:{click:function(e){t.reply_click(n.commentId,n.createName)}}},[t._v("回复")])])]),t._v(" "),s("div",{ref:"scommentInput",refInFor:!0,staticClass:"reply-content-input",staticStyle:{display:"none"},attrs:{id:n.commentId}},[s("div",{staticStyle:{width:"83%"}},[s("seditText",{attrs:{"user-list":t.userList,"content-html":t.contentHtml,"comment-string":t.commentString},on:{"change-edit":t.changeEdit}})],1),t._v(" "),s("div",{staticClass:"button-list"},[s("el-button",{staticStyle:{"margin-top":"8px"},attrs:{size:"mini"},on:{click:function(s){t.reply_click_a(e.progressId)}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"primary",plain:t.commentText.length<2||t.isDisable,disabled:t.commentText.length<2||t.isDisable},on:{click:function(s){t.commentAdd(e,n,i,"hf")}}},[t._v("发布")])],1)])])])])}),0):t._e(),t._v(" "),e.commentCount>2?s("div",{staticClass:"more-list-bottom"},[s("span",{ref:"allButton",refInFor:!0,staticStyle:{color:"#9094A3",cursor:"pointer"},attrs:{id:e.progressId},on:{click:function(s){t.viewAll(e.progressId,i)}}},[t._v("查看所有")]),t._v(" "),s("span",{ref:"collectButton",refInFor:!0,staticStyle:{color:"#9094A3",display:"none",cursor:"pointer"},attrs:{id:e.progressId},on:{click:function(s){t.collected(e.progressId,i)}}},[t._v("收起")])]):t._e()])])])])])}),t._v(" "),s("div",{staticClass:"moreList",staticStyle:{display:"flex","justify-content":"center"}},[s("div",{staticClass:"more"},[t.expandFlag&&t.moreLists.length>4?s("el-button",{attrs:{type:"text"},on:{click:t.moreList}},[t._v("加载更多")]):t._e(),t._v(" "),!t.expandFlag&&t.moreLists.length>4?s("el-button",{attrs:{type:"text"},on:{click:t.romahdusList}},[t._v("收起列表")]):t._e()],1),t._v(" "),0==t.moreLists.length?s("div",{staticClass:"nullList"},[t._v("\n       暂无数据\n     ")]):t._e()]),t._v(" "),s("el-dialog",{attrs:{title:"编辑工作进展",width:"78%",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[t.dialogTableVisible?s("editText",{attrs:{"class-name":t.editClassName,"user-list":t.userList,cacel:!1,"content-text":t.htmlContent,id:t.editId,"data-obj":t.modelData,fields:t.listFieldToken},on:{"updata-list":t.updataList}}):t._e()],1)],2)},staticRenderFns:[]};var D={data:function(){return{SHOW:s("Cz52"),options:[],progressOptions:[{value:"0",label:"员工填写"},{value:"1",label:"系统推送"}],dialogTableVisible:!1,ruleForm:{name:"",multipleValue:[],dateStart:null,dateEnd:null,userValue:""}}},created:function(){var t=this;this.$axios({url:v.a.getAllUser+"?groupId=5",method:"get"}).then(function(e){"0"===e.data.status&&(t.options=e.data.data.AppUserIdNameList)})},methods:{selectChange:function(){this.dialogTableVisible=!0},submitForm:function(){this.$emit("submit-form",this.ruleForm),this.dialogTableVisible=!1},resetForm:function(){this.ruleForm={name:"",multipleValue:[],dateStart:null,dateEnd:null,userValue:""},this.dialogTableVisible=!1,this.$emit("submit-form",this.ruleForm)}}},Q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"suodatin-contanier"},[s("div",{staticClass:"button",staticStyle:{cursor:"pointer"},on:{click:t.selectChange}},[s("img",{staticStyle:{width:"25px"},attrs:{src:t.SHOW,alt:""}}),t._v(" "),s("span",[t._v("筛选")])]),t._v(" "),s("el-dialog",{attrs:{title:"筛选",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"关键字"}},[s("el-input",{staticStyle:{width:"160px"},attrs:{size:"small",placeholder:"请输入关键字",clearable:""},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"发布人"}},[s("el-select",{staticStyle:{width:"160px"},attrs:{size:"small",filterable:"",multiple:"",placeholder:"请选择"},model:{value:t.ruleForm.multipleValue,callback:function(e){t.$set(t.ruleForm,"multipleValue",e)},expression:"ruleForm.multipleValue"}},t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"进展来源"}},[s("el-select",{staticStyle:{width:"160px"},attrs:{size:"small",placeholder:"请选择"},model:{value:t.ruleForm.userValue,callback:function(e){t.$set(t.ruleForm,"userValue",e)},expression:"ruleForm.userValue"}},t._l(t.progressOptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"发布时间"}},[s("el-col",{attrs:{span:11}},[s("el-form-item",[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"开始日期",size:"small"},model:{value:t.ruleForm.dateStart,callback:function(e){t.$set(t.ruleForm,"dateStart",e)},expression:"ruleForm.dateStart"}})],1)],1),t._v(" "),s("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[t._v("-")]),t._v(" "),s("el-col",{attrs:{span:11}},[s("el-form-item",[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"结束日期",size:"small"},model:{value:t.ruleForm.dateEnd,callback:function(e){t.$set(t.ruleForm,"dateEnd",e)},expression:"ruleForm.dateEnd"}})],1)],1)],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submitForm}},[t._v("搜索")]),t._v(" "),s("el-button",{attrs:{size:"small"},on:{click:t.resetForm}},[t._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var P={components:{listView:s("VU/8")(N,L,!1,function(t){s("PM4l")},null,null).exports,editText:S,suodatin:s("VU/8")(D,Q,!1,function(t){s("JZKm")},null,null).exports},data:function(){return{list:[],editFlag:!0,input:"",flag:!0,projectObject:"",dealMark:"",dist:"",projectStaus:"",inveId:"",groupId:"",filtersObj:{}}},created:function(){this.projectObject=Object(y.getUrlKey)("projectObject"),this.dealMark=Object(y.getUrlKey)("dealMark"),this.dist=Object(y.getUrlKey)("dist"),this.projectStaus=Object(y.getUrlKey)("PROJ_STATUS"),this.inveId=Object(y.getUrlKey)("INVE_ID"),this.groupId=Object(y.getUrlKey)("GROUP_ID")},methods:{changeEdit:function(){this.editFlag=!1,this.flag=!0},handleFocus:function(){this.editFlag=!0,this.flag=!1},updataList:function(){var t=this,e={keyword:"",createBy:"",startTime:null,endTime:null,progressResource:"",inveId:this.inveId,projectObject:this.projectObject,groupId:this.groupId,pageSize:1e3,currPage:1};this.$axios({url:v.a.list,method:"post",data:e}).then(function(e){"0"===e.data.status&&(t.list=e.data.data)})},submitForm:function(t){var e=this,s=t.name,i="";t.multipleValue.length>0&&(i=t.multipleValue.join(","));var n={keyword:s,createBy:i,startTime:t.dateStart,endTime:t.dateEnd,progressResource:t.userValue,inveId:this.inveId,projectObject:this.projectObject,groupId:this.groupId};this.filtersObj=n,this.$axios({url:v.a.list,method:"post",data:n}).then(function(t){"0"===t.data.status&&(e.list=t.data.data)})}}},V={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contanier"},[s("div",{staticClass:"panel-content"},[t.editFlag?s("editText",{on:{"updata-list":t.updataList,"cacel-handle":t.changeEdit}}):t._e(),t._v(" "),t._e(),t._v(" "),s("listView",{staticStyle:{"margin-top":"10px"},attrs:{"comment-list":t.list,"filters-obj":t.filtersObj}})],1)])},staticRenderFns:[]};var M=s("VU/8")(P,V,!1,function(t){s("+uVa")},"data-v-52cd077a",null).exports;i.default.use(r.a);var J=new r.a({routes:[{path:"/",name:"Home",component:M}]}),R=s("zL8q"),K=s.n(R),z=(s("tvR6"),s("G0J2")),H=s.n(z);s("3f40"),s("4qOc"),s("+cgv");i.default.prototype.$axios=o.a,i.default.use(K.a),i.default.use(H.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:J,components:{App:a},template:"<App/>"})},OLa6:function(t,e){},PM4l:function(t,e){},PlFY:function(t,e){},Vb74:function(t,e){},mQnU:function(t,e){},tvR6:function(t,e){}},[0]);