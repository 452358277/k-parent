(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f9a3e2d","chunk-76eb0f72","chunk-76eb0f72","chunk-76eb0f72"],{2066:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cashFlowBox",staticStyle:{padding:"24px 4px"}},[e("div",{staticClass:"quarterScreen"},[e("div",{staticClass:"quarter-screen-item"},[e("div",{staticClass:"quarter-type-title"},[t._v("资金去向：")]),t._v(" "),e("div",{staticClass:"quarter-type-name searchboxName"},[e("div",{class:""===t.moneyDirection?"active":"",on:{click:function(a){return t.choiceMoneyType("")}}},[t._v("不限")]),t._v(" "),t._l(t.moneyDirectionList,(function(a,s){return e("div",{key:s,class:t.moneyDirection===a.value?"active":"",on:{click:function(e){return t.choiceMoneyType(a.value)}}},[t._v(t._s(a.label)+"\n        ")])}))],2)]),t._v(" "),e("div",{staticClass:"quarter-screen-item"},[e("div",{staticClass:"quarter-type-title"},[t._v("业务日期：")]),t._v(" "),e("div",{staticClass:"quarter-type-name"},[e("el-date-picker",{attrs:{clearable:!1,type:"daterange",size:"small","range-separator":"-",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","end-placeholder":"结束日期","start-placeholder":"开始日期"},model:{value:t.dateTime,callback:function(a){t.dateTime=a},expression:"dateTime"}})],1)]),t._v(" "),e("div",{staticClass:"quarter-screen-item"},[e("div",{staticClass:"quarter-type-title"},[t._v("基金名称：")]),t._v(" "),e("el-select",{staticStyle:{width:"350px"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择基金名称"},on:{change:t.searchFund},model:{value:t.fundIds,callback:function(a){t.fundIds=a},expression:"fundIds"}},t._l(t.linkTagFundList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),e("div",{staticClass:"quarter-screen-item"},[e("div",{staticClass:"quarter-type-title"},[t._v("关键字：")]),t._v(" "),e("div",{staticClass:"quarter-keyword",staticStyle:{width:"350px"}},[e("el-input",{staticStyle:{width:"350px"},attrs:{type:"text",size:"small",placeholder:"请输入基金名称/往来单位"},model:{value:t.companyKeyWord,callback:function(a){t.companyKeyWord=a},expression:"companyKeyWord"}})],1),t._v(" "),e("div",{staticClass:"quarter-btn-box"},[e("button",{on:{click:t.searchFund}},[t._v("搜索")]),t._v(" "),e("button",{on:{click:t.removeFund}},[t._v("清空")])])])]),t._v(" "),e("div",{staticClass:"quarter-table"},[e("div",{ref:"cashBtn",staticClass:"quarter-btn-box",staticStyle:{"margin-bottom":"30px"}},[e("button",{ref:"cashAdd",staticStyle:{display:"none"},attrs:{"data-code":"50060901"},on:{click:t.addCashFlow}},[t._v("新增")]),t._v(" "),e("button",{ref:"cashEdit",staticStyle:{display:"none"},attrs:{"data-code":"50060902"},on:{click:t.editCashFlow}},[t._v("编辑")]),t._v(" "),e("button",{ref:"cashOut",staticStyle:{display:"none"},attrs:{"data-code":"50060903"},on:{click:t.outExcelList}},[t._v("导出")]),t._v(" "),e("button",{ref:"cashDel",staticStyle:{display:"none"},attrs:{"data-code":"50060904"},on:{click:t.delCashFlow}},[t._v("删除\n      ")])]),t._v(" "),e("el-table",{attrs:{data:t.tableDataList.data,"header-cell-style":{background:"#FEFAFA",textAlign:"center"},border:"",sortable:!0,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionCash}},[e("el-table-column",{attrs:{type:"selection",align:"center","label-class-name":"quarter-table-title",width:"40"}}),t._v(" "),e("el-table-column",{attrs:{label:"序号",type:"index",align:"center","label-class-name":"quarter-table-title",width:"50"}}),t._v(" "),e("el-table-column",{attrs:{label:"基金名称","min-width":"240",prop:"companyName"}}),t._v(" "),e("el-table-column",{attrs:{label:"往来单位","min-width":"206",prop:"customerName"}}),t._v(" "),e("el-table-column",{attrs:{label:"收付款日期",width:"96",prop:"bizDate"}}),t._v(" "),e("el-table-column",{attrs:{label:"资金去向",width:"114",prop:"financeTypeName"}}),t._v(" "),e("el-table-column",{attrs:{label:"资金类型",width:"98",prop:"recBillTypeName"}}),t._v(" "),e("el-table-column",{attrs:{label:"发生金额(元)",width:"108",prop:"amt"}}),t._v(" "),e("el-table-column",{attrs:{label:"更多",type:"expand",width:"50"},scopedSlots:t._u([{key:"default",fn:function(a){return["付款"===a.row.financeTypeName?e("div",{staticClass:"detailBox"},[e("div",[e("span",[t._v("收款人姓名:")]),t._v(" "),e("span",[t._v(t._s(a.row.assseq))])]),t._v(" "),e("div",[e("span",[t._v("收款银行:")]),t._v(" "),e("span",[t._v(t._s(a.row.assCustomerName))])]),t._v(" "),e("div",[e("span",[t._v("收款账号:")]),t._v(" "),e("span",[t._v(t._s(a.row.assCustomerNum))])]),t._v(" "),e("div",[e("span",[t._v("备注:")]),t._v(" "),e("span",[t._v(t._s(a.row.remark))])]),t._v(" "),e("div",[e("span",[t._v("付款材料:")]),t._v(" "),e("upLoadFile",{attrs:{"hidden-upload":!0,"context-path":t.url.upApi},model:{value:a.row.descFile,callback:function(e){t.$set(a.row,"descFile",e)},expression:"props.row.descFile"}})],1)]):t._e(),t._v(" "),"收款"===a.row.financeTypeName?e("div",{staticClass:"detailBox"},[e("div",[e("span",[t._v("付款人姓名:")]),t._v(" "),e("span",[t._v(t._s(a.row.assseq))])]),t._v(" "),e("div",[e("span",[t._v("付款银行:")]),t._v(" "),e("span",[t._v(t._s(a.row.assCustomerName))])]),t._v(" "),e("div",[e("span",[t._v("付款账号:")]),t._v(" "),e("span",[t._v(t._s(a.row.assCustomerNum))])]),t._v(" "),e("div",[e("span",[t._v("备注:")]),t._v(" "),e("span",[t._v(t._s(a.row.remark))])]),t._v(" "),e("div",[e("span",[t._v("收款材料:")]),t._v(" "),e("upLoadFile",{attrs:{"hidden-upload":!0,"context-path":t.url.upApi},model:{value:a.row.descFile,callback:function(e){t.$set(a.row,"descFile",e)},expression:"props.row.descFile"}})],1)]):t._e()]}}])})],1),t._v(" "),e("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":t.tableDataList.currPage,"page-sizes":[5,10,15,20],"page-size":t.tableDataList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.tableDataList.totalCount},on:{"size-change":t.cashFlowSize,"current-change":t.cashFlowCurrent}}),t._v(" "),e("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:t.cashFlowModalStatusTitle,visible:t.cashFlowModal,width:"80%"},on:{"update:visible":function(a){t.cashFlowModal=a},close:t.modalClose}},["付款"===t.cashFlowModalStatus?e("div",[e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            资金去向\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},t._l(t.moneyDirectionList,(function(a){return e("el-radio",{key:a.label,attrs:{label:a.value},on:{change:t.choicePayType},model:{value:t.modalInfo.financeType,callback:function(a){t.$set(t.modalInfo,"financeType",a)},expression:"modalInfo.financeType"}},[t._v(t._s(a.label)+"\n            ")])})),1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            基金名称\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:"请选择"},on:{change:t.getFundName},model:{value:t.modalInfo.companyNumber,callback:function(a){t.$set(t.modalInfo,"companyNumber",a)},expression:"modalInfo.companyNumber"}},t._l(t.searchFundList,(function(t){return e("el-option",{key:t.fundId,attrs:{label:t.fundName,value:t.fundId}})})),1)],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            付款类型\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:20}},t._l(t.payTypeList,(function(a){return e("el-radio",{key:a.value,attrs:{label:a.value},on:{change:t.payMoneyType},model:{value:t.modalInfo.recBillTypeNum,callback:function(a){t.$set(t.modalInfo,"recBillTypeNum",a)},expression:"modalInfo.recBillTypeNum"}},[t._v(t._s(a.label)+"\n            ")])})),1)],1),t._v(" "),"1"===t.modalInfo.recBillTypeNum&&t.modalInfo.companyNumber?e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            项目名称\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:20}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.searchprojList,loading:t.loading},on:{change:t.getProj},model:{value:t.modalInfo.projId,callback:function(a){t.$set(t.modalInfo,"projId",a)},expression:"modalInfo.projId"}},t._l(t.projList,(function(t){return e("el-option",{key:t.projId,attrs:{label:t.projName,value:t.projId}})})),1)],1)],1):t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            最后一笔交易日期\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[t._v("\n            "+t._s(t.modalInfo.bizTime)+"\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            最后一笔交易后账户余额(元)\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},["edit"!==t.nowStatus?e("div",[t._v(t._s(t.modalInfo.accountBalance))]):t._e(),t._v(" "),"edit"===t.nowStatus?e("div",{staticStyle:{width:"100%"}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"30",placeholder:"请输入余额",size:"small"},model:{value:t.modalInfo.accountBalance,callback:function(a){t.$set(t.modalInfo,"accountBalance",a)},expression:"modalInfo.accountBalance"}})],1):t._e()])],1),t._v(" "),t.deposit?e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            理财产品编号\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"30",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.productCode,callback:function(a){t.$set(t.modalInfo,"productCode",a)},expression:"modalInfo.productCode"}})],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            付款日期\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-date-picker",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.modalInfo.bizDate,callback:function(a){t.$set(t.modalInfo,"bizDate",a)},expression:"modalInfo.bizDate"}})],1)],1):t._e(),t._v(" "),t.deposit?t._e():e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            往来单位类型\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},t._l(t.customerTypeList,(function(a){return e("el-radio",{key:a.value,attrs:{label:a.value},on:{change:t.customerTypeChange},model:{value:t.modalInfo.customerType,callback:function(a){t.$set(t.modalInfo,"customerType",a)},expression:"modalInfo.customerType"}},[t._v(t._s(a.label)+"\n            ")])})),1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            往来单位\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},["1"===t.modalInfo.customerType?e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.searchComponyList,loading:t.loading},on:{change:t.getCompany},model:{value:t.modalInfo.customerId,callback:function(a){t.$set(t.modalInfo,"customerId",a)},expression:"modalInfo.customerId"}},t._l(t.componyNameList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),t._v(" "),"1"!==t.modalInfo.customerType?e("el-input",{attrs:{maxlength:"30",placeholder:"请输入",size:"small"},on:{change:t.customerNameChange},model:{value:t.modalInfo.customerName,callback:function(a){t.$set(t.modalInfo,"customerName",a)},expression:"modalInfo.customerName"}}):t._e()],1)],1),t._v(" "),t.deposit?e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            起息日\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-date-picker",{staticStyle:{cursor:"pointer",width:"100%"},attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择起息日"},model:{value:t.modalInfo.startDate,callback:function(a){t.$set(t.modalInfo,"startDate",a)},expression:"modalInfo.startDate"}})],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            到期日\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-date-picker",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择到期日"},model:{value:t.modalInfo.endDate,callback:function(a){t.$set(t.modalInfo,"endDate",a)},expression:"modalInfo.endDate"}})],1)],1):t._e(),t._v(" "),t.deposit?e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            存款期限（天）\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"15",placeholder:"请输入存款期限",size:"small"},model:{value:t.modalInfo.depositTerm,callback:function(a){t.$set(t.modalInfo,"depositTerm",a)},expression:"modalInfo.depositTerm"}})],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            利率\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{staticStyle:{width:"30%","margin-right":"3px"},attrs:{type:"text",maxlength:"15","placeholdcash-flow-modal-statuser":"请输入",size:"small"},model:{value:t.modalInfo.minRate,callback:function(a){t.$set(t.modalInfo,"minRate",a)},expression:"modalInfo.minRate"}}),t._v("\n            %  -  \n            "),e("el-input",{staticStyle:{width:"30%","margin-right":"3px"},attrs:{type:"text",maxlength:"15","placeholdcash-flow-modal-statuser":"请输入",size:"small"},model:{value:t.modalInfo.maxRate,callback:function(a){t.$set(t.modalInfo,"maxRate",a)},expression:"modalInfo.maxRate"}}),t._v("\n            %\n          ")],1)],1):t._e(),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[t.deposit?t._e():e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            实际付款金额（元）\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),t.deposit?t._e():e("el-col",{staticClass:"boxCol",attrs:{span:20}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"15",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.amt,callback:function(a){t.$set(t.modalInfo,"amt",a)},expression:"modalInfo.amt"}})],1),t._v(" "),t.deposit?e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            金额（元）\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]):t._e(),t._v(" "),t.deposit?e("el-col",{staticClass:"boxCol",attrs:{span:20}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"15",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.amt,callback:function(a){t.$set(t.modalInfo,"amt",a)},expression:"modalInfo.amt"}})],1):t._e()],1),t._v(" "),t.deposit?t._e():e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            付款日期\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-date-picker",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.modalInfo.bizDate,callback:function(a){t.$set(t.modalInfo,"bizDate",a)},expression:"modalInfo.bizDate"}})],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            收款人名称\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"64",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.assseq,callback:function(a){t.$set(t.modalInfo,"assseq",a)},expression:"modalInfo.assseq"}})],1)],1),t._v(" "),t.deposit?t._e():e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            收款银行\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"64",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.assCustomerName,callback:function(a){t.$set(t.modalInfo,"assCustomerName",a)},expression:"modalInfo.assCustomerName"}})],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            收款账号\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"64",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.assCustomerNum,callback:function(a){t.$set(t.modalInfo,"assCustomerNum",a)},expression:"modalInfo.assCustomerNum"}})],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            备注\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:20}},[e("el-input",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{type:"textarea",maxlength:"500",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.remark,callback:function(a){t.$set(t.modalInfo,"remark",a)},expression:"modalInfo.remark"}})],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            付款材料\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:20}},[t.cashFlowModal?e("upLoadFile",{attrs:{"context-path":t.url.upApi},model:{value:t.modalInfo.descFile,callback:function(a){t.$set(t.modalInfo,"descFile",a)},expression:"modalInfo.descFile"}}):t._e()],1)],1),t._v(" "),"1"===t.modalInfo.recBillTypeNum?e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            是否符合付款要求\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},t._l(t.trueOrfalse,(function(a){return e("el-radio",{key:a.value,attrs:{label:a.value},model:{value:t.modalInfo.isComply,callback:function(a){t.$set(t.modalInfo,"isComply",a)},expression:"modalInfo.isComply"}},[t._v(t._s(a.label)+"\n            ")])})),1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            付款金额是否一致\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},t._l(t.trueOrfalse,(function(a){return e("el-radio",{key:a.value,attrs:{label:a.value},model:{value:t.modalInfo.isPaySame,callback:function(a){t.$set(t.modalInfo,"isPaySame",a)},expression:"modalInfo.isPaySame"}},[t._v(t._s(a.label)+"\n            ")])})),1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            材料是否完善\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},t._l(t.trueOrfalse,(function(a){return e("el-radio",{key:a.value,attrs:{label:a.value},model:{value:t.modalInfo.isPerfect,callback:function(a){t.$set(t.modalInfo,"isPerfect",a)},expression:"modalInfo.isPerfect"}},[t._v(t._s(a.label)+"\n            ")])})),1)],1):t._e()],1):t._e(),t._v(" "),"收款"===t.cashFlowModalStatus?e("div",[e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            资金去向\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},t._l(t.moneyDirectionList,(function(a){return e("el-radio",{key:a.label,attrs:{label:a.value},on:{change:t.choicePayType},model:{value:t.modalInfo.financeType,callback:function(a){t.$set(t.modalInfo,"financeType",a)},expression:"modalInfo.financeType"}},[t._v(t._s(a.label)+"\n            ")])})),1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            基金名称\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:"请选择"},on:{change:t.getFundName},model:{value:t.modalInfo.companyNumber,callback:function(a){t.$set(t.modalInfo,"companyNumber",a)},expression:"modalInfo.companyNumber"}},t._l(t.searchFundList,(function(t){return e("el-option",{key:t.fundId,attrs:{label:t.fundName,value:t.fundId}})})),1)],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            收款类型\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:20}},t._l(t.payTypeList,(function(a){return e("el-radio",{key:a.value,attrs:{label:a.value},on:{change:t.getMoneyType},model:{value:t.modalInfo.recBillTypeNum,callback:function(a){t.$set(t.modalInfo,"recBillTypeNum",a)},expression:"modalInfo.recBillTypeNum"}},[t._v(t._s(a.label)+"\n            ")])})),1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            最后一笔交易日期\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[t._v("\n            "+t._s(t.modalInfo.bizTime)+"\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            最后一笔交易后账户余额(元)\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},["edit"!==t.nowStatus?e("div",[t._v(t._s(t.modalInfo.accountBalance))]):t._e(),t._v(" "),"edit"===t.nowStatus?e("div",{staticStyle:{width:"100%"}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"30",placeholder:"请输入余额",size:"small"},model:{value:t.modalInfo.accountBalance,callback:function(a){t.$set(t.modalInfo,"accountBalance",a)},expression:"modalInfo.accountBalance"}})],1):t._e()])],1),t._v(" "),t.profit?e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            理财产品编号\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择编号"},on:{change:t.getProductNum},model:{value:t.modalInfo.productId,callback:function(a){t.$set(t.modalInfo,"productId",a)},expression:"modalInfo.productId"}},t._l(t.productList,(function(t){return e("el-option",{key:t.productId,attrs:{label:t.productCode,value:t.productId}})})),1)],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            赎回类型\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},t._l(t.redeemList,(function(a){return e("el-radio",{key:a.value,attrs:{label:a.value},model:{value:t.modalInfo.backType,callback:function(a){t.$set(t.modalInfo,"backType",a)},expression:"modalInfo.backType"}},[t._v(t._s(a.label)+"\n            ")])})),1)],1):t._e(),t._v(" "),t.profit?t._e():e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            往来单位类型\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},t._l(t.customerTypeList,(function(a){return e("el-radio",{key:a.value,attrs:{label:a.value},on:{change:t.customerTypeChange},model:{value:t.modalInfo.customerType,callback:function(a){t.$set(t.modalInfo,"customerType",a)},expression:"modalInfo.customerType"}},[t._v(t._s(a.label)+"\n            ")])})),1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            往来单位\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},["1"===t.modalInfo.customerType?e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.searchComponyList,loading:t.loading},on:{change:t.getCompany},model:{value:t.modalInfo.customerId,callback:function(a){t.$set(t.modalInfo,"customerId",a)},expression:"modalInfo.customerId"}},t._l(t.componyNameList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),t._v(" "),"1"!==t.modalInfo.customerType?e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"30",placeholder:"请输入",size:"small"},on:{change:t.customerNameChange},model:{value:t.modalInfo.customerName,callback:function(a){t.$set(t.modalInfo,"customerName",a)},expression:"modalInfo.customerName"}}):t._e()],1)],1),t._v(" "),t.profit?e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            起息日\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-date-picker",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择起息日"},model:{value:t.modalInfo.startDate,callback:function(a){t.$set(t.modalInfo,"startDate",a)},expression:"modalInfo.startDate"}})],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            到期日\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-date-picker",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择到期日"},model:{value:t.modalInfo.endDate,callback:function(a){t.$set(t.modalInfo,"endDate",a)},expression:"modalInfo.endDate"}})],1)],1):t._e(),t._v(" "),t.profit?e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            收款日期\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-date-picker",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{type:"date",readonly:!1,size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.modalInfo.bizDate,callback:function(a){t.$set(t.modalInfo,"bizDate",a)},expression:"modalInfo.bizDate"}})],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}}),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}})],1):t._e(),t._v(" "),t.profit?e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            本金（元）\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{attrs:{type:"text",maxlength:"15","placeholdcash-flow-modal-statuser":"请输入",size:"small"},on:{blur:t.checkProfit},model:{value:t.modalInfo.amt,callback:function(a){t.$set(t.modalInfo,"amt",a)},expression:"modalInfo.amt"}}),t._v(" "),t.modalInfo.productNumMoney?e("span",{staticStyle:{color:"#f00","margin-top":"4px"}},[t._v("（余额："+t._s(t.modalInfo.productNumMoney)+"）")]):t._e()],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            利息（元）\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{staticStyle:{width:"30%","margin-right":"3px"},attrs:{type:"text",maxlength:"15","placeholdcash-flow-modal-statuser":"请输入",size:"small"},model:{value:t.modalInfo.gainAmount,callback:function(a){t.$set(t.modalInfo,"gainAmount",a)},expression:"modalInfo.gainAmount"}})],1)],1):t._e(),t._v(" "),t.profit?t._e():e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            实际收款金额（元）\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"15","placeholdcash-flow-modal-statuser":"请输入",size:"small"},model:{value:t.modalInfo.amt,callback:function(a){t.$set(t.modalInfo,"amt",a)},expression:"modalInfo.amt"}})],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            收款日期\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-date-picker",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{type:"date",readonly:!1,size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.modalInfo.bizDate,callback:function(a){t.$set(t.modalInfo,"bizDate",a)},expression:"modalInfo.bizDate"}})],1)],1),t._v(" "),t.profit?t._e():e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            付款人名称\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"64",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.assseq,callback:function(a){t.$set(t.modalInfo,"assseq",a)},expression:"modalInfo.assseq"}})],1),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            付款银行\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:8}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"64",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.assCustomerName,callback:function(a){t.$set(t.modalInfo,"assCustomerName",a)},expression:"modalInfo.assCustomerName"}})],1)],1),t._v(" "),t.profit?t._e():e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            付款账号\n            "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:20}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"64",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.assCustomerNum,callback:function(a){t.$set(t.modalInfo,"assCustomerNum",a)},expression:"modalInfo.assCustomerNum"}})],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            备注\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:20}},[e("el-input",{staticStyle:{width:"720px",margin:"10px 0"},attrs:{type:"textarea",maxlength:"500",placeholder:"请输入",size:"small"},model:{value:t.modalInfo.remark,callback:function(a){t.$set(t.modalInfo,"remark",a)},expression:"modalInfo.remark"}})],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:4}},[t._v("\n            收款材料\n          ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:20}},[t.cashFlowModal?e("upLoadFile",{attrs:{"context-path":t.url.upApi},model:{value:t.modalInfo.descFile,callback:function(a){t.$set(t.modalInfo,"descFile",a)},expression:"modalInfo.descFile"}}):t._e()],1)],1)],1):t._e(),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.cashFlowModal=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.sureCashFlow}},[t._v("确 定")])],1)])],1)])},o=[],l=(e("e680"),e("a450"),e("aa18"),e("982e"),e("1bc7"),e("58b9")),n=e("698e"),i=e("e19c"),c={name:"CashFlow",components:{upLoadFile:l["default"]},data:function(){return{tableData:[{},{},{}],moneyDirection:"",modalTitle:"",dateTime:["",""],companyKeyWord:"",cashFlowModal:!1,cashFlowModalStatus:"付款",modalInfo:{direction:"1",customerNum:2},moneyDirectionList:"",url:i["a"],tableDataList:"",customerType:"1",payTypeList:[],customerTypeList:[],currencyTypeList:[],checkCashFlow:[],cashFlowModalStatusTitle:"付款",loading:!1,fundNameList:[],componyNameList:[],searchFundList:[],descFile:"",deposit:!1,profit:!1,redeemList:"",productList:[],nowStatus:"",fundIds:"",trueOrfalse:"",projList:[]}},computed:{linkTagFundList:function(){return this.searchFundList.map((function(t){return{label:t.fundName,value:t.fundId}}))}},mounted:function(){var t=this;this.getCashFlowList();var a=[{code:1003,keyName:"moneyDirectionList"},{code:1009,keyName:"customerTypeList"},{code:1003,keyName:"currencyTypeList"},{code:1012,keyName:"redeemList"},{code:102,keyName:"trueOrfalse"}];a.forEach((function(a){t.getParentId(a.code,a.keyName)})),this.choicePayType("1"),this.getSearchFundList();var e=this.$route.meta.buttons,s=this.$refs.cashAdd.getAttribute("data-code"),o=this.$refs.cashOut.getAttribute("data-code"),l=this.$refs.cashEdit.getAttribute("data-code"),n=this.$refs.cashDel.getAttribute("data-code"),i=[s,o,l,n];e.forEach((function(a){i.includes(a.code)&&("新增"===a.name?t.$refs.cashAdd.style.display="block":"导出"===a.name?t.$refs.cashOut.style.display="block":"删除"===a.name?t.$refs.cashDel.style.display="block":"编辑"===a.name&&(t.$refs.cashEdit.style.display="block"))}))},methods:{getParentId:function(t,a){var e=this;sessionStorage.getItem("code".concat(t))?this[a]=JSON.parse(sessionStorage.getItem("code".concat(t))):n["a"].getCodeByParentId({parentId:t}).then((function(s){e[a]=s.data.data.options,sessionStorage.setItem("code".concat(t),JSON.stringify(s.data.data.options))}))},customerTypeChange:function(t){this.customerType=t},getCashFlowList:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s={pageSize:a,currPage:e,startTime:this.dateTime[0],endTime:this.dateTime[1],financeType:"0"===this.moneyDirection?"":this.moneyDirection,keyword:this.companyKeyWord,groupId:"1",ids:this.fundIds,ledgeMagType:1};n["a"].cashFlowList(s).then((function(a){t.tableDataList=a.data}))},searchComponyList:function(t){var a=this;t?(this.loading=!0,n["a"].QCCSearchData({keyword:t}).then((function(t){var e=JSON.parse(t.data.data.value);a.loading=!1,null!==e.Result&&(a.componyNameList=e.Result.map((function(t){return{value:t.CreditCode,label:t.Name}})))}))):this.loading=!0},getFund:function(t){var a=this;this.fundNameList.forEach((function(e){e.value===t&&(a.modalInfo.companyName=e.label)})),n["a"].QCCDataGetDetailsByName({keyword:t}).then((function(t){return JSON.parse(t.data.data.value).Result})).then((function(t){return n["a"].saveEntBaseInfo(t)})).then((function(t){a.modalInfo.enteId=t.data.msg}))},getCompany:function(t){var a=this;this.$forceUpdate(),this.componyNameList.forEach((function(e){e.value===t&&(a.modalInfo.customerName=e.label,"add"===a.nowStatus&&(a.modalInfo.assseq=e.label),n["a"].QCCDataGetDetailsByName({keyword:t}).then((function(t){var e=JSON.parse(t.data.data.value).Result;return null===e?(a.$message({offset:150,type:"warning",message:"查询无结果，请重新选择合适数据"}),!1):e})).then((function(t){return n["a"].saveEntBaseInfo(t).then((function(t){"系统异常"!==t.data.msg?a.modalInfo.customerNum=t.data.msg:a.$message({offset:150,type:"warning",message:"网络波动，请重新选择"})}))})))}))},choiceMoneyType:function(t){t===this.moneyDirection?(this.moneyDirection="",this.getCashFlowList(this.tableDataList.pageSize,1)):(this.moneyDirection=t,this.getCashFlowList(this.tableDataList.pageSize,1))},searchFund:function(){this.getCashFlowList(this.tableDataList.pageSize,1)},removeFund:function(){this.moneyDirection="",this.companyKeyWord="",this.dateTime="",this.fundIds="",this.searchFund()},addCashFlow:function(){var t=this;this.cashFlowModal=!0,this.cashFlowModalStatusTitle="付款",this.cashFlowModalStatus="付款",this.modalInfo={financeType:"1",customerType:"1",descFile:"",accountBalance:"",assseq:"",customerName:"",productNumMoney:""},this.choicePayType("1"),this.descFile="",1===this.searchFundList.length&&(this.modalInfo.companyName=this.searchFundList[0].fundName,this.modalInfo.companyNumber=this.searchFundList[0].fundId,this.modalInfo.accounts=this.searchFundList[0].custodianBankNum,n["a"].getLedgerMag({fundId:this.searchFundList[0].fundId}).then((function(a){t.modalInfo.accountBalance=a.data.data.accountBalance,t.modalInfo.bizTime=a.data.data.bizTime})),n["a"].getProductNum({fundId:this.searchFundList[0].fundId}).then((function(a){t.productList=a.data.data.list}))),this.nowStatus="add"},delCashFlow:function(){var t=this;0===this.checkCashFlow.length?this.$message({offset:150,message:"请至少选择一条数据",type:"warning"}):this.$confirm("是否删除这".concat(this.checkCashFlow.length,"项数据,删除流水记录后系统不会对该流水记录日期之后的流水数据自动校验余额，\n      请自行核对并校验该流水记录之后的每笔数据帐户余额信息，谨慎删除!"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.checkCashFlow.forEach((function(a){n["a"].cashUpdateLedge({id:a.ledgerId,status:"1"}).then((function(){t.getCashFlowList(t.tableDataList.pageSize,t.tableDataList.currPage)}))})),t.$message({offset:150,type:"success",message:"删除成功!"})})).catch((function(){t.$message({offset:150,type:"info",message:"已取消删除"})}))},handleSelectionCash:function(t){this.checkCashFlow=t},editCashFlow:function(){var t=this;n["a"].getProductNum({fundId:this.searchFundList[0].fundId}).then((function(a){t.productList=a.data.data.list})),this.nowStatus="edit",0===this.checkCashFlow.length||this.checkCashFlow.length>1?this.$message({offset:150,message:"请选择一条数据",type:"warning"}):(this.cashFlowModal=!0,n["a"].cashFlowDetail({id:this.checkCashFlow[0].ledgerId}).then((function(a){t.modalInfo=a.data.data,t.customerType=a.data.data.customerType,t.choicePayType(a.data.data.financeType),t.modalInfo={amt:a.data.data.amt,assCustomerName:a.data.data.assCustomerName,assCustomerNum:a.data.data.assCustomerNum,assseq:a.data.data.assseq,bizDate:a.data.data.bizDate,companyName:a.data.data.companyName,companyNumber:a.data.data.companyNumber,customerName:a.data.data.customerName,customerId:a.data.data.customerNum,customerType:a.data.data.customerType,financeType:a.data.data.financeType,bizTime:a.data.data.bizDate,groupId:"1",investPaymentType:"2",recBillTypeNum:a.data.data.recBillTypeNum,remark:a.data.data.remark,id:t.checkCashFlow[0].ledgerId,accountBalance:a.data.data.accountBalance,startDate:a.data.data.bankProductModel?a.data.data.bankProductModel.startDate:"",endDate:a.data.data.bankProductModel?a.data.data.bankProductModel.endDate:"",moneyRate:a.data.data.moneyRate,maxRate:a.data.data.bankProductModel?a.data.data.bankProductModel.maxRate:"",minRate:a.data.data.bankProductModel?a.data.data.bankProductModel.minRate:"",productCode:a.data.data.bankProductModel?a.data.data.bankProductModel.productCode:"",productId:a.data.data.bankProductModel?a.data.data.bankProductModel.productId:"",depositTerm:a.data.data.bankProductModel?a.data.data.bankProductModel.depositTerm:"",descFile:a.data.data.descFile?a.data.data.descFile:"",backType:a.data.data.backType,gainAmount:a.data.data.gainAmount,isComply:a.data.data.isComply,isPaySame:a.data.data.isPaySame,isPerfect:a.data.data.isPerfect,projId:a.data.data.projId,projName:a.data.data.projName},t.searchprojList(a.data.data.projName),t.componyNameList=[{value:a.data.data.customerNum,label:a.data.data.customerName}],t.fundNameList=[{value:a.data.data.companyNumber,label:a.data.data.companyName}],"1"===t.modalInfo.financeType?t.deposit="3"===t.modalInfo.recBillTypeNum||"4"===t.modalInfo.recBillTypeNum:t.deposit=!1})))},sureCashFlow:function(){var t=this,a=/^\d+(\.\d+)?$/;if(this.modalInfo.investPaymentType=2,this.modalInfo.groupId="1",this.modalInfo.companyName)if(this.modalInfo.recBillTypeNum){if("1"===this.modalInfo.financeType)if("3"===this.modalInfo.recBillTypeNum||"4"===this.modalInfo.recBillTypeNum){if(!this.modalInfo.productCode)return void this.$message({offset:150,type:"warning",message:"请输入理财产品编号"});if(!this.modalInfo.startDate)return void this.$message({offset:150,type:"warning",message:"请选择起息日"});if(!this.modalInfo.amt)return void this.$message({offset:150,type:"warning",message:"请输入金额"});if(!this.modalInfo.bizDate)return void this.$message({offset:150,type:"warning",message:"请输入付款日期"});var e=/^\+?[1-9][0-9]*$/;if(this.modalInfo.depositTerm&&!e.test(this.modalInfo.depositTerm))return void this.$message({offset:150,type:"warning",message:"请输入正确的存款期限，格式为正整数"});if(this.modalInfo.amt&&!a.test(this.modalInfo.amt))return void this.$message({offset:150,type:"warning",message:"请输入正确的金额，格式为数字"})}else{if(!this.modalInfo.customerName)return void this.$message({offset:150,type:"warning",message:"请完善往来单位名称"});if(!this.modalInfo.amt)return void this.$message({offset:150,type:"warning",message:"请输入实际付款金额"});if(!this.modalInfo.assCustomerName)return void this.$message({offset:150,type:"warning",message:"请输入收款银行"});if(!this.modalInfo.bizDate)return void this.$message({offset:150,type:"warning",message:"请选择付款日期"});if(!this.modalInfo.assCustomerNum)return void this.$message({offset:150,type:"warning",message:"请输入收款账号"});if(this.modalInfo.amt&&!a.test(this.modalInfo.amt))return void this.$message({offset:150,type:"warning",message:"请输入正确的实际付款金额，格式为数字"});if("1"===this.modalInfo.recBillTypeNum){if(!this.modalInfo.projId)return void this.$message({offset:150,type:"warning",message:"请选择项目名称"});if(!this.modalInfo.isComply)return void this.$message({offset:150,type:"warning",message:"请选择是否符合付款要求"});if(!this.modalInfo.isPaySame)return void this.$message({offset:150,type:"warning",message:"请选择付款金额是否一致"});if(!this.modalInfo.isPerfect)return void this.$message({offset:150,type:"warning",message:"请选择材料是否完善"})}}if("2"===this.modalInfo.financeType)if("1"===this.modalInfo.recBillTypeNum){if(!this.modalInfo.productId)return void this.$message({offset:150,type:"warning",message:"请选择理财产品编号"});if(!this.modalInfo.startDate)return void this.$message({offset:150,type:"warning",message:"请选择起息日"});if(!this.modalInfo.amt)return void this.$message({offset:150,type:"warning",message:"请填写本金"});if(""===this.modalInfo.gainAmount||void 0===this.modalInfo.gainAmount||null===this.modalInfo.gainAmount)return void this.$message({offset:150,type:"warning",message:"请填写利息"});if(!this.modalInfo.bizDate)return void this.$message({offset:150,type:"warning",message:"请输入收款日期"});if(this.modalInfo.amt&&!a.test(this.modalInfo.amt))return void this.$message({offset:150,type:"warning",message:"请输入正确的本金，格式为数字"});if(this.modalInfo.gainAmount&&!a.test(this.modalInfo.gainAmount))return void this.$message({offset:150,type:"warning",message:"请输入正确的利息，格式为数字"})}else{if(!this.modalInfo.customerName)return void this.$message({offset:150,type:"warning",message:"请完善往来单位名称"});if(!this.modalInfo.amt)return void this.$message({offset:150,type:"warning",message:"请输入实际收款金额"});if(!this.modalInfo.assCustomerName)return void this.$message({offset:150,type:"warning",message:"请输入付款银行"});if(!this.modalInfo.bizDate)return void this.$message({offset:150,type:"warning",message:"请选择实到日期"});if(!this.modalInfo.assseq)return void this.$message({offset:150,type:"warning",message:"请输入付款人名称"});if(!this.modalInfo.assCustomerNum)return void this.$message({offset:150,type:"warning",message:"请输入付款账号"})}this.modalInfo.bizDate&&""!==this.modalInfo.bizDate||(this.modalInfo.bizDate=(new Date).getFullYear()+"-"+(Number((new Date).getMonth())+1)+"-"+(new Date).getDate()),"edit"===this.nowStatus?this.$confirm("编辑流水记录后系统不会对该流水记录日期之后的流水数据自动校验余额，请自行核对并校验该流水记录之后的每笔数据帐户余额信息，谨慎编辑!","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["a"].cashUpdateLedge(t.modalInfo).then((function(a){"0"===a.data.status?"成功"===a.data.msg?(t.$message({offset:150,message:"编辑成功",type:"success"}),t.cashFlowModal=!1,t.getCashFlowList(t.tableDataList.pageSize,t.tableDataList.currPage)):t.$message({offset:150,message:a.data.msg,type:"warning"}):(t.cashFlowModal=!1,t.$message({offset:150,message:"编辑异常",type:"warning"}))}))})).catch((function(){})):n["a"].cashFlowAdd(this.modalInfo).then((function(a){"0"===a.data.status?"成功"!==a.data.msg?t.$message({offset:150,message:a.data.msg,type:"warning"}):(t.$message({offset:150,message:"新增成功",type:"success"}),t.cashFlowModal=!1,t.modalInfo={},t.getCashFlowList(t.tableDataList.pageSize,t.tableDataList.currPage)):(t.cashFlowModal=!1,t.$message({offset:150,message:a.data.msg,type:"warning"}))}))}else this.$message({offset:150,type:"warning",message:"请选择实际收付款类型"});else this.$message({offset:150,type:"warning",message:"请选择基金名称"})},choicePayType:function(t){this.getParentId("1003"+t,"payTypeList"),"1"===t?(this.cashFlowModalStatus="付款",this.cashFlowModalStatusTitle="付款"):(this.cashFlowModalStatus="收款",this.cashFlowModalStatusTitle="收款"),"1"===this.modalInfo.financeType?this.deposit="3"===this.modalInfo.recBillTypeNum||"4"===this.modalInfo.recBillTypeNum:this.deposit=!1,"2"===this.modalInfo.financeType?this.profit="1"===this.modalInfo.recBillTypeNum:this.profit=!1},payMoneyType:function(){"1"===this.modalInfo.financeType?(this.deposit="3"===this.modalInfo.recBillTypeNum||"4"===this.modalInfo.recBillTypeNum,this.$set(this.modalInfo,"isComply",""),this.$set(this.modalInfo,"isPaySame",""),this.$set(this.modalInfo,"isPerfect","")):this.deposit=!1},getMoneyType:function(){"2"===this.modalInfo.financeType&&(this.profit="1"===this.modalInfo.recBillTypeNum)},cashFlowSize:function(t){this.getCashFlowList(t,this.tableDataList.currPage)},cashFlowCurrent:function(t){this.getCashFlowList(this.tableDataList.pageSize,t)},export2Excel:function(t){var a=this;Promise.all([e.e("chunk-3a822854"),e.e("chunk-91140928")]).then(function(){var s=e("39a0"),o=s.export_json_to_excel,l=["基金名称","往来单位","收付款日期","资金去向","资金类型","发生金额（元）","是否符合付款要求","付款金额是否一致","材料是否都完整","备注"],n=["companyName","customerName","bizDate","financeTypeName","recBillTypeName","amt","isComplyName","isPaySameName","isPerfectName","remark"];t.forEach((function(t){"1"===t.financeType&&"1"===t.recBillTypeNum?("1"===t.isComply?t.isComplyName="是":"0"===t.isComply?t.isComplyName="否":t.isComplyName="","1"===t.isPaySame?t.isPaySameName="是":"0"===t.isPaySame?t.isPaySameName="否":t.isPaySameName="","1"===t.isPerfect?t.isPerfectName="是":"0"===t.isPerfect?t.isPerfectName="否":t.isPerfectName=""):(t.isComplyName="",t.isPaySameName="",t.isPerfectName="")}));var i=a.formatJson(n,t);o(l,i,"现金流数据表")}.bind(null,e)).catch(e.oe)},modalClose:function(){this.modalInfo={}},formatJson:function(t,a){return a.map((function(a){return t.map((function(t){return a[t]}))}))},outExcelList:function(){var t=this;this.$confirm("确定导出所有项？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={pageSize:t.tableDataList.totalCount,currPage:1,startTime:t.dateTime[0],endTime:t.dateTime[1],financeType:0===t.moneyDirection?"":t.moneyDirection,keyword:t.companyKeyWord,groupId:"1",ids:t.fundIds,ledgeMagType:1};return n["a"].cashFlowList(a)})).then((function(t){return t.data.data})).then((function(a){t.export2Excel(a)})).catch((function(){t.$message({offset:150,type:"info",message:"已取消导出"})}))},getFundName:function(t){var a=this;n["a"].getLedgerMag({fundId:t}).then((function(t){a.modalInfo.accountBalance=t.data.data.accountBalance,a.modalInfo.bizTime=t.data.data.bizTime})),n["a"].getProductNum({fundId:t}).then((function(t){a.productList=t.data.data.list})),this.searchFundList.forEach((function(e){e.fundId===t&&(a.modalInfo.companyName=e.fundName,a.modalInfo.accounts=e.custodianBankNum)})),this.projList=[],this.$set(this.modalInfo,"projId","")},getSearchFundList:function(){var t=this;n["a"].getFundInfoList({pageSize:1e3,currPage:1,fundSrc:1,ledgeMagType:1}).then((function(a){t.searchFundList=a.data.data}))},checkNumber:function(t,a){},customerNameChange:function(t){this.modalInfo.assseq=t},getProductNum:function(t){var a=this;this.productList.forEach((function(e){e.productId===t&&(a.modalInfo.startDate=e.startDate,n["a"].getProductCodeNum({productId:e.productId}).then((function(t){a.modalInfo.productNumMoney=t.data.msg})))}))},checkProfit:function(){this.modalInfo.profit>this.modalInfo.productNumMoney&&(this.$message({offset:150,type:"warning",message:"赎回金额不足"}),this.modalInfo.profit="")},searchprojList:function(t){var a=this;n["a"].getProjInfoForInveId({inveId:this.modalInfo.companyNumber,keyword:t,pageSize:10,currPage:1}).then((function(t){console.log(t),a.projList=t.data.data}))},getProj:function(t){}}},r=c,d=(e("458c"),e("4ac2")),m=Object(d["a"])(r,s,o,!1,null,null,null);a["default"]=m.exports},"458c":function(t,a,e){"use strict";e("987d")},"58b9":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"upload-box"},[t.hiddenUpload?e("div",{staticClass:"fileView"},t._l(t.fileLists,(function(a){return e("h3",{key:a.uid},[e("a",{attrs:{href:t.contextPath+"attachController/download?fileId="+a.uid,target:"_blank"}},[t._v(t._s(a.name))])])})),0):t._e(),t._v(" "),t.hiddenUpload?t._e():e("div",{staticClass:"el-upload-box"},[e("el-upload",{ref:"upload",attrs:{limit:t.limit,action:t.updatePath,"auto-upload":!0,name:t.upLoadName,data:t.extraData,"file-list":t.fileLists,accept:t.acceptFormat,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-error":t.handleError,"on-change":t.handleChange,"before-remove":t.beforeRemove,"before-upload":t.beforeUpload}},[e("el-button",{class:{active:t.hiddenUpload},attrs:{size:t.size,type:"primary"}},[t._v("\n        "+t._s(t.uploadTitle)+"\n      ")]),t._v(" "),t.isShowTip?e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.TipTitle))]):t._e()],1)],1)])},o=[],l=(e("fc02"),e("a450"),e("e680"),e("7f43")),n=e.n(l),i={name:"GuluUpload",model:{prop:"value",event:"update-value"},props:{value:[String],isShowTip:{type:Boolean,default:!0},hiddenUpload:{type:Boolean,default:!1},TipTitle:{type:String,default:"最大可上传50M文件"},uploadTitle:{type:String,default:"点击上传"},limit:{type:Number,default:50},extraData:{type:Object,default:function(){return{bizTableName:"",bizTablePk:"",fieldName:""}}},size:{type:String,default:"small"},upLoadName:{type:String,default:"file"},contextPath:{type:String,default:"/ei-web/"},acceptFormat:{type:String,default:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP,.PDF,.rp,.vsd"}},data:function(){return{fileList:[],fileLists:[]}},watch:{value:function(t){null!==t&&void 0!==t&&""!==t&&this.getFileData()},hiddenUpload:function(){this.getFileData()}},computed:{updatePath:function(){var t="".concat(this.contextPath,"attachController/upload?fieldToken=").concat(this.value?this.value:"");return t}},created:function(){null!==this.value&&void 0!==this.value&&""!==this.value?this.getFileData():(this.fileLists=[],this.fileList=[])},methods:{getFileData:function(){var t=this,a=this.value;""!=a&&null!=a||(a="-1");var e=this.contextPath+"attachController/getFileList?fieldToken="+a;n()({url:e,method:"get"}).then((function(a){"0"===a.data.status&&a.data.data.fileList&&t.$nextTick((function(){t.fileLists=a.data.data.fileList,a.data.data.fileList.length>0&&(t.fileList=a.data.data.fileList),0==t.fileLists.length&&(t.$emit("update-value",""),this.fileLists=[],this.fileList=[])}))}))},beforeUpload:function(t){},handleChange:function(t,a){var e=t.name.substring(t.name.lastIndexOf(".")+1),s="rp"===e,o="vsd"===e;(s||o)&&(this.$message({offset:150,message:"上传文件不能是 rp 、vsd 格式!",type:"warning"}),this.$refs.upload.clearFiles())},handleExceed:function(t,a){this.$message.warning("当前限制选择 ".concat(t.length," 个文件，本次选择了 ").concat(t.length," 个文件，共选择了 ").concat(t.length+a.length," 个文件"))},handleRemove:function(t,a){var e=this;n()({url:this.contextPath+"attachController/delete?fileId="+t.uid,method:"get"}).then((function(t){"0"===t.data.status&&0==a.length&&(e.$emit("update-value",""),this.fileLists=[],this.fileList=[])}))},handleError:function(t,a,e){},handleSuccess:function(t,a,e){var s=t.data.fieldToken;void 0==s&&(s=this.value);var o=this.updatePath.split("=");""!=o[1]&&""==s&&(s=o[1]),this.$emit("update-value",s)},beforeRemove:function(t,a){return this.$confirm("确定移除 ".concat(t.name,"？"))},handlePreview:function(t){window.open(this.contextPath+"attachController/download?fileId="+t.uid)}}},c=i,r=(e("abf3"),e("4ac2")),d=Object(r["a"])(c,s,o,!1,null,"36d367e4",null);a["default"]=d.exports},"987d":function(t,a,e){t.exports={theme:"#b28147"}},abf3:function(t,a,e){"use strict";e("eec34")},eec34:function(t,a,e){}}]);