(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60200f22","chunk-0fa0d9ba"],{"37ec":function(e,t,r){"use strict";var a=r("2e91"),o=r("e19c");t["a"]={selectPerf:function(e){return Object(a["a"])({methods:"get",url:"".concat(o["a"].urlApi,"selectPerf"),params:e})},selectFundIdAll:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"selectFundIdAll"),params:e})},commonTCodeGetCodeByParentId:function(e){return Object(a["a"])({methods:"get",url:"".concat(o["a"].urlApi,"commonTCode/getCodeByParentId?parentId=").concat(e)})},getCodeByParentId:function(e){return Object(a["a"])({methods:"Get",url:"".concat(o["a"].urlApi,"commonTCode/getCodeByParentId?parentId=").concat(e.parentId),params:e})},addPerf:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"addPerf"),params:e})},selectPerOneNormList:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"selectPerOneNormList?pPerId=").concat(e),params:e})},addPerfOneNormModel:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"addPerfOneNormModel"),params:e})},delectOneNorms:function(e){return Object(a["a"])({methods:"get",url:"".concat(o["a"].urlApi,"delectOneNorms?oNormId=").concat(e)})},updatePerfOneNormModel:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"updatePerfOneNormModel"),params:e})},addPerfManageFundList:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"addPerfManageFundList"),params:e})},selectPerSecondNormList:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"selectPerSecondNormList?oNormId=").concat(e)})},addPerfSecondNormModel:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"addPerfSecondNormModel"),params:e})},delectSecondNorms:function(e){return Object(a["a"])({methods:"get",url:"".concat(o["a"].urlApi,"delectSecondNorms?sNormId=").concat(e)})},selectPerThreeNormList:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"selectPerThreeNormList?sNormId=").concat(e)})},updatePerfSecondNormModel:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"updatePerfSecondNormModel"),params:e})},addPerfThreeNormModel:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"addPerfThreeNormModel"),params:e})},delectThreeNorms:function(e){return Object(a["a"])({methods:"get",url:"".concat(o["a"].urlApi,"delectThreeNorms?tNormId=").concat(e)})},updatePerfThreeNormModel:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"updatePerfThreeNormModel"),params:e})},deletePerfMangeAll:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"deletePerfMangeAll?pPerId=").concat(e)})},selectPerfDetails:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"selectPerfDetails?pPerId=").concat(e)})},selectPerfManagementList:function(e){return Object(a["a"])({methods:"get",url:"".concat(o["a"].urlApi,"selectPerfManagementList"),params:e})},selectPerfList:function(e){return Object(a["a"])({methods:"get",url:"".concat(o["a"].urlApi,"selectPerfList"),params:e})},selectPerfFundDetails:function(e){return Object(a["a"])({methods:"get",url:"".concat(o["a"].urlApi,"selectPerfFundDetails?pPerId=").concat(e)})},selectPerfDetailsF:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"selectPerfFundDetails?pPerId=").concat(e.pPerID,"&fundId=").concat(e.fundId)})},addPerfScoreModelDetails:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"addPerfScoreModelDetails"),params:e})},selectFundProGovernmentSonFound:function(e){return Object(a["a"])({methods:"get",url:"".concat(o["a"].urlApi,"selectFundProGovernmentSonFound?pageSize=").concat(e.pageSize,"&currPage=").concat(e.currPage,"&motherFundName=").concat(e.motherFundName,"&fundName=").concat(e.fundName,"&type=").concat(e.type,"&dc=").concat(e.dc)})},selectFundProGovernmentSonSecond:function(e){return Object(a["a"])({methods:"get",url:"".concat(o["a"].urlApi,"selectFundProGovernmentSonSecond?pageSize=").concat(e.pageSize,"&currPage=").concat(e.currPage,"&chName=").concat(e.chName,"&inveName=").concat(e.inveName,"&type=").concat(e.type,"&year=").concat(e.year,"&dc=").concat(e.dc)})},updatePerfScore:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"updatePerfScore"),params:e})},updatePerf:function(e){return Object(a["a"])({methods:"post",url:"".concat(o["a"].urlApi,"updatePerf"),params:e})}}},"8aed":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"threeAddOrModify"},[r("el-dialog",{attrs:{width:"50%",title:"二级指标编辑",visible:e.dialogFormVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-dialog",{attrs:{width:"40%",title:e.titlechange?"三级指标编辑":"新增三级指标",visible:e.threeInnerVisible,"append-to-body":""},on:{"update:visible":function(t){e.threeInnerVisible=t}}},[r("el-form",{ref:"threeRuleForm",staticClass:"demo-ruleForm",attrs:{model:e.threeRuleForm,rules:e.threeRules}},[r("el-form-item",{attrs:{label:"三级指标名称",prop:"name"}},[r("el-input",{model:{value:e.threeRuleForm.name,callback:function(t){e.$set(e.threeRuleForm,"name",t)},expression:"threeRuleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"分值",prop:"value"}},[r("el-input",{model:{value:e.threeRuleForm.value,callback:function(t){e.$set(e.threeRuleForm,"value",t)},expression:"threeRuleForm.value"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"评分细则",prop:"tSuggest"}},[r("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.threeRuleForm.tSuggest,callback:function(t){e.$set(e.threeRuleForm,"tSuggest",t)},expression:"threeRuleForm.tSuggest"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.twoSubmitForm("threeRuleForm")}}},[e._v("确定")])],1)],1)],1),e._v(" "),r("div",{staticStyle:{display:"flex"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{border:"0px"},attrs:{model:e.queryData,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"指标名称",prop:"name"}},[r("el-input",{model:{value:e.queryData.name,callback:function(t){e.$set(e.queryData,"name",t)},expression:"queryData.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"分值",prop:"value"}},[r("el-input",{model:{value:e.queryData.value,callback:function(t){e.$set(e.queryData,"value",t)},expression:"queryData.value"}})],1)],1),e._v(" "),r("div",{staticStyle:{marginLeft:"30px",lineHeight:"80px"}},[r("div",{staticClass:"twoBtn"},[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.saveTwo("ruleForm")}}},[e._v("保存")])],1)])],1),e._v(" "),r("div",{staticClass:"twoBtn",staticStyle:{marginBottom:"10px"}},e._l(e.oneButtons,(function(t,a){return r("el-button",{key:a,attrs:{disabled:e.setStatus(t.btnScope),type:"danger",plain:"",size:"mini"},on:{click:function(r){return e.option(t.code)}}},[e._v(e._s(t.name))])})),1),e._v(" "),r("el-table",{attrs:{data:e.threeTableData,border:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"tThreeName",label:"名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"tThreeScore",label:"分值"}}),e._v(" "),r("el-table-column",{attrs:{prop:"tSuggest",label:"评分细则"}})],1)],1)],1)},o=[],n=(r("a450"),r("37ec")),s={data:function(){var e=function(e,t,r){""===t?r(new Error("分值不能为空")):/^(?:1|[1-9][0-9]?|100)$/.test(t)?r():r(new Error("分值1-100以内"))};return{dialogFormVisible:!1,threeInnerVisible:!1,isaddOrModify:"",titlechange:"",queryData:{name:"",value:""},threeRuleForm:{name:"",value:"",tSuggest:""},rules:{name:[{required:!0,message:"请输入绩效名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],value:[{required:!0,validator:e,trigger:"blur"}],tSuggest:[{required:!0,message:"请输入评分细则",trigger:"blur"}]},threeRules:{name:[{required:!0,message:"请输入绩效名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],value:[{required:!0,validator:e,trigger:"blur"}],tSuggest:[{required:!0,message:"请输入评分细则",trigger:"blur"}]},threeTableData:[],oneButtons:[{code:"111",name:"新增三级指标",btnScope:"normal"},{code:"112",name:"编辑",btnScope:"single"},{code:"113",name:"删除",btnScope:"multi"}],selectedItem:""}},methods:{showDialog:function(e,t){var r=this;this.queryData.name=e[0].sTwoName,this.queryData.value=e[0].sTwoScore,this.queryData.sNormId=e[0].sNormId,this.queryData.oNormId=t,this.threeList(),this.dialogFormVisible=!this.dialogFormVisible,this.$nextTick((function(){r.$refs["ruleForm"].clearValidate()}))},saveTwo:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r={};r.sTwoName=t.queryData.name,r.sTwoScore=t.queryData.value,r.sNormId=t.queryData.sNormId,r.oNormId=t.queryData.oNormId,n["a"].updatePerfSecondNormModel(r).then((function(e){"0"==e.data.status&&(t.$message.success("二级指标修改成功"),t.$emit("refresh"))}))}))},threeList:function(){var e=this;n["a"].selectPerThreeNormList(this.queryData.sNormId).then((function(t){e.threeTableData=t.data.data}))},threeCreate:function(){this.titlechange=!1,this.threeRuleForm.name="",this.threeRuleForm.value="",this.threeRuleForm.tSuggest="",this.isaddOrModify=!0,this.threeInnerVisible=!this.threeInnerVisible},twoSubmitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r={};r.tThreeName=t.threeRuleForm.name,r.tThreeScore=t.threeRuleForm.value,r.tSuggest=t.threeRuleForm.tSuggest,r.sNormId=t.queryData.sNormId,t.isaddOrModify?n["a"].addPerfThreeNormModel(r).then((function(e){"0"==e.data.status?t.$message.success("新增三级成功"):"1"==e.data.status&&t.$message.warning(e.data.msg),t.threeList()})):t.isaddOrModify||(r.tNormId=t.selectedItem[0].tNormId,n["a"].updatePerfThreeNormModel(r).then((function(e){"0"==e.data.status?t.$message.success("更新成功"):"1"==e.data.status&&t.$message.warning(e.data.msg),t.threeList()}))),t.threeInnerVisible=!t.threeInnerVisible}))},deleteThree:function(){var e=this;this.$confirm("是否删除选中数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["a"].delectThreeNorms(e.selectedItem[0].tNormId).then((function(t){"0"==t.data.status?e.$message.success("删除成功"):e.$message.warning("请求出错"),e.threeList()}))})).catch((function(){e.$message({offset:150,type:"info",message:"已取消删除"})}))},editThree:function(){this.titlechange=!0,this.threeRuleForm.name=this.selectedItem[0].tThreeName,this.threeRuleForm.value=this.selectedItem[0].tThreeScore,this.threeRuleForm.tSuggest=this.selectedItem[0].tSuggest,this.threeRuleForm.tNormId=this.selectedItem.tNormId,this.isaddOrModify=!1,this.threeInnerVisible=!this.threeInnerVisible},handleSelectionChange:function(e){this.selectedItem=e},option:function(e){"111"==e?this.threeCreate(e):"113"==e?this.deleteThree():"112"==e&&this.editThree(e)},setStatus:function(e){return"single"==e?1!=this.selectedItem.length:"multi"==e?!(this.selectedItem.length>=1):"normal"!=e}}},i=s,l=r("4ac2"),u=Object(l["a"])(i,a,o,!1,null,null,null);t["default"]=u.exports},9975:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"twoAddOrModify"},[r("el-dialog",{attrs:{width:"50%",title:"一级指标编辑",visible:e.dialogFormVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-dialog",{attrs:{width:"40%",title:"新增二级指标",visible:e.twoInnerVisible,"append-to-body":""},on:{"update:visible":function(t){e.twoInnerVisible=t}}},[r("div",[r("el-form",{ref:"twoRuleForm",staticClass:"demo-ruleForm",attrs:{model:e.twoRuleForm,rules:e.twoRuleRules}},[r("el-form-item",{attrs:{label:"二级指标名称",prop:"name"}},[r("el-input",{model:{value:e.twoRuleForm.name,callback:function(t){e.$set(e.twoRuleForm,"name",t)},expression:"twoRuleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"分值",prop:"value"}},[r("el-input",{model:{value:e.twoRuleForm.value,callback:function(t){e.$set(e.twoRuleForm,"value",t)},expression:"twoRuleForm.value"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.twoSubmitForm("twoRuleForm")}}},[e._v("确定")])],1)],1)],1)]),e._v(" "),r("div",{staticStyle:{display:"flex"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{border:"0px"},attrs:{model:e.queryData,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"指标名称",prop:"name"}},[r("el-input",{model:{value:e.queryData.name,callback:function(t){e.$set(e.queryData,"name",t)},expression:"queryData.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"分值",prop:"value"}},[r("el-input",{model:{value:e.queryData.value,callback:function(t){e.$set(e.queryData,"value",t)},expression:"queryData.value"}})],1)],1),e._v(" "),r("div",{staticStyle:{marginLeft:"30px",lineHeight:"80px"}},[r("div",{staticClass:"twoBtn"},[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.saveOne("ruleForm")}}},[e._v("保存")])],1)])],1),e._v(" "),r("div",{staticClass:"twoBtn",staticStyle:{marginBottom:"10px"}},e._l(e.oneButtons,(function(t,a){return r("el-button",{key:a,attrs:{disabled:e.setStatus(t.btnScope),type:"danger",plain:"",size:"mini"},on:{click:function(r){return e.option(t.code)}}},[e._v(e._s(t.name))])})),1),e._v(" "),r("el-table",{attrs:{data:e.twoTableData,border:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"sTwoName",label:"名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"sTwoScore",label:"分值"}})],1)],1),e._v(" "),r("three-add-or-modify",{ref:"threeAddOrModify",on:{refresh:e.refresh}})],1)},o=[],n=(r("e680"),r("a450"),r("1bc7"),r("37ec")),s=r("8aed"),i={components:{threeAddOrModify:s["default"]},data:function(){var e=function(e,t,r){""===t?r(new Error("分值不能为空")):/^(?:1|[1-9][0-9]?|100)$/.test(t)?r():r(new Error("分值1-100以内"))};return{dialogFormVisible:!1,twoInnerVisible:!1,queryData:{name:"",value:""},twoRuleForm:{name:"",value:""},rules:{name:[{required:!0,message:"请输入绩效名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],value:[{required:!0,validator:e,trigger:"blur"}]},twoRuleRules:{name:[{required:!0,message:"请输入绩效名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],value:[{required:!0,validator:e,trigger:"blur"}]},withOutcheck:[],twoTableData:[],oneButtons:[{code:"111",name:"新增二级指标",btnScope:"normal"},{code:"112",name:"编辑",btnScope:"single"},{code:"113",name:"删除",btnScope:"multi"}],selectedItem:""}},methods:{refresh:function(){this.twoList()},showDialog:function(e,t){this.dialogFormVisible=!this.dialogFormVisible;var r=[];t.forEach((function(t){t.oNormId!==e[0].oNormId&&r.push(t)})),this.withOutcheck=r,this.queryData.name=e[0].oOneName,this.queryData.value=e[0].oOneScore,this.queryData.oNormId=e[0].oNormId,this.twoList()},saveOne:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r={};r.oOneName=t.queryData.name,r.oOneScore=t.queryData.value,r.oNormId=t.queryData.oNormId;var a=Number(r.oOneScore);if(t.withOutcheck.forEach((function(e){a+=e.oOneScore})),a>100)return t.queryData.value=0,t.$message.warning("一级指标分值不能大于一百");n["a"].updatePerfOneNormModel(r).then((function(e){"0"==e.data.status&&(t.$message.success("一级指标修改成功"),t.$emit("refresh"))}))}))},twoList:function(){var e=this;n["a"].selectPerSecondNormList(this.queryData.oNormId).then((function(t){e.twoTableData=t.data.data}))},twoSubmitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r={};r.sTwoName=t.twoRuleForm.name,r.sTwoScore=t.twoRuleForm.value,r.oNormId=t.queryData.oNormId,n["a"].addPerfSecondNormModel(r).then((function(e){"0"==e.data.status?t.$message.success("新增二级成功"):"1"==e.data.status&&t.$message.warning(e.data.msg),t.twoList(),t.twoInnerVisible=!t.twoInnerVisible}))}))},deleteTwo:function(){var e=this;this.$confirm("是否删除选中数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["a"].delectSecondNorms(e.selectedItem[0].sNormId).then((function(t){"0"==t.data.status?e.$message.success("删除成功"):e.$message.warning("请求出错"),e.twoList()}))})).catch((function(){e.$message({offset:150,type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.selectedItem=e},twoCreate:function(e){this.twoRuleForm.name="",this.twoRuleForm.value="",this.twoInnerVisible=!this.twoInnerVisible},editTwo:function(e){this.$refs.threeAddOrModify.showDialog(this.selectedItem,this.queryData.oNormId)},option:function(e){"111"==e?this.twoCreate(e):"113"==e?this.deleteTwo():"112"==e&&this.editTwo(e)},setStatus:function(e){return"single"==e?1!=this.selectedItem.length:"multi"==e?!(this.selectedItem.length>=1):"normal"!=e}}},l=i,u=r("4ac2"),c=Object(u["a"])(l,a,o,!1,null,null,null);t["default"]=c.exports}}]);