(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d23016f"],{eb95:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",[t.btnPermission.includes("60204091")?e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.add}},[t._v("新增")]):t._e()],1),t._v(" "),e("div",{staticClass:"box_margin"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0)",size:"small",data:t.tableData.data,border:"","header-cell-style":{background:"#FEFAFA",color:"#333",fontWeight:"bold",fontSize:"12px",textAlign:"center"}}},[e("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{prop:"projName",label:"项目名称","min-width":"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"financeDateName",label:"企业类型","min-width":"100"}}),t._v(" "),e("el-table-column",{attrs:{prop:"inveName",label:"基金名称","min-width":"200"}},[[t._v("\n          "+t._s(t.baseInfo.fundName)+"\n        ")]],2),t._v(" "),e("el-table-column",{attrs:{prop:"disJcAmount",label:"基金管理人","min-width":"200"}},[[t._v("\n        "+t._s(t.baseInfo.mcName)+"\n      ")]],2),t._v(" "),e("el-table-column",{attrs:{prop:"inveAmt",label:"投资金额(万元)","min-width":"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"industryName",label:"所属行业","min-width":"140"}}),t._v(" "),e("el-table-column",{attrs:{prop:"processStatusName",label:"状态","min-width":"80"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"tableBtn"},["0"===a.row.processStatus&&t.btnPermission.includes("60204092")?e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.detail(a,"edit")}}},[t._v("编辑")]):t._e(),t._v(" "),"0"===a.row.processStatus&&t.btnPermission.includes("60204092")?e("div",{staticClass:"split_line"}):t._e(),t._v(" "),t.btnPermission.includes("60204094")?e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.detail(a,"view")}}},[t._v("查看")]):t._e(),t._v(" "),"0"===a.row.processStatus&&t.btnPermission.includes("60204093")?e("div",{staticClass:"split_line"}):t._e(),t._v(" "),"0"===a.row.processStatus&&t.btnPermission.includes("60204093")?e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.del(a)}}},[t._v("删除")]):t._e()],1)]}}])})],1),t._v(" "),e("el-pagination",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"flex-end"},attrs:{"current-page":t.tableData.currPage,"page-sizes":[10,20,30],"page-size":t.tableData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.tableData.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"90%"},on:{"update:visible":function(a){t.dialogVisible=a},close:t.dialogClose}},[t.dialogData.processInstId?e("div",[e("el-tabs",{model:{value:t.dialogName,callback:function(a){t.dialogName=a},expression:"dialogName"}},[e("el-tab-pane",{attrs:{label:"基础信息",name:"first"}},[t.dialogVisible?e("formPage",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.dialogLoading,expression:"dialogLoading",modifiers:{fullscreen:!0,lock:!0}}],ref:"formPage",attrs:{"element-loading-background":"rgba(0, 0, 0, 0)","is-edit":!1},model:{value:t.dialogData,callback:function(a){t.dialogData=a},expression:"dialogData"}}):t._e()],1),t._v(" "),e("el-tab-pane",{attrs:{label:"流程信息",name:"second"}},[e("iframe",{staticStyle:{width:"100%",height:"56vh"},attrs:{name:"contentFrame_1",frameborder:"no",scrolling:"auto",src:t.iframeUrl}})]),t._v(" "),e("el-tab-pane",{attrs:{label:"处理过程",name:"third"}},[e("iframe",{staticStyle:{width:"100%",height:"56vh"},attrs:{name:"contentFrame_1",frameborder:"no",scrolling:"auto",src:t.iframeProcessUrl}})])],1)],1):e("div",[t.dialogVisible?e("formPage",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.dialogLoading,expression:"dialogLoading",modifiers:{fullscreen:!0,lock:!0}}],ref:"formPage",attrs:{"element-loading-background":"rgba(0, 0, 0, 0)","is-edit":t.isEdit},model:{value:t.dialogData,callback:function(a){t.dialogData=a},expression:"dialogData"}}):t._e()],1),t._v(" "),"1"!==t.dialogData.processStatus?e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(a){t.dialogVisible=!1}}},[t._v("关闭")]),t._v(" "),t.isEdit?e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.save("save")}}},[t._v("保存")]):t._e(),t._v(" "),t.isEdit?e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.save("submit")}}},[t._v("提交")]):t._e()],1):e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(a){t.dialogVisible=!1}}},[t._v("关闭")])],1)])],1)])},s=[],o=e("a395"),n=e("fa8a"),l={name:"Index",components:{formPage:o["default"]},props:{baseInfo:{type:Object,default:function(){return{}}}},data:function(){return{tableData:{data:[],currPage:1,pageSize:10,totalCount:0},dialogVisible:!1,dialogData:{},isEdit:!0,fundId:"",projId:"",dialogLoading:!1,tableLoading:!1,dialogTitle:"新增",dialogName:"first",iframeProcessUrl:"",iframeUrl:"",defaultUrl:"/sysweb/action/workflowProcess!flowGraphics.action",defaultUrlTwo:"/sysweb/action/showListview.action",btnPermission:[]}},created:function(){this.initPage()},methods:{initPage:function(){this.fundId=this.$route.params.fundId,this.getTableList(),this.setButton()},setButton:function(){var t=this.$route.meta.buttons.filter((function(t){return 6020409===t.id}));this.btnPermission=t[0].buttons.map((function(t){return t.code})),console.log(this.btnPermission,"btnList")},getTableList:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.tableLoading=!0,Object(n["Nb"])({pageSize:a,currPage:e,fundId:this.fundId}).then((function(a){console.log(a),t.tableData=a,t.tableLoading=!1}))},add:function(){var t=this;this.dialogVisible=!0,this.dialogTitle="新增",this.$nextTick((function(){t.$refs.formPage.clearValidate()})),this.$set(this.dialogData,"entStatus","2"),this.$set(this.dialogData,"mcName",this.baseInfo.mcName),this.$set(this.dialogData,"mcId",this.baseInfo.mcId),this.$set(this.dialogData,"regName",this.baseInfo.fundName),this.$set(this.dialogData,"fundId",this.baseInfo.fundId),this.$set(this.dialogData,"inveName",this.baseInfo.fundName),this.$set(this.dialogData,"inveId",this.baseInfo.fundId),console.log(this.baseInfo)},save:function(t){var a=this;if(!this.$refs.formPage.checkValue())return!1;"0"===this.dialogData.entStatus&&this.$set(this.dialogData,"entName",this.dialogData.projName),this.dialogLoading=!0,this.dialogData.fundId=this.fundId,this.dialogData.status="0",this.dialogData.isDelete="0",this.dialogData.processStatus="save"===t?"0":"1",this.dialogData.isStartFlow="submit"===t,console.log(this.dialogData),Object(n["Mb"])(this.dialogData).then((function(e){console.log(e),"成功"===e.msg?(a.dialogVisible=!1,a.dialogLoading=!1,a.$message({message:"save"===t?"保存成功":"提交成功",type:"success",offset:150}),Object(n["Gb"])({projId:a.$route.params.projId}),a.getTableList()):(a.$message({message:e.msg,type:"warning",offset:150}),a.dialogLoading=!1)}))},detail:function(t,a){var e=this;console.log(t,a),Object(n["Lb"])({iraId:t.row.iraId}).then((function(t){console.log(t),"成功"===t.msg&&(e.dialogData=t.data,e.$set(e.dialogData,"mcName",e.baseInfo.mcName),e.$set(e.dialogData,"mcId",e.baseInfo.mcId),e.$set(e.dialogData,"regName",e.baseInfo.fundName),e.$set(e.dialogData,"fundId",e.baseInfo.fundId),e.$set(e.dialogData,"inveName",e.baseInfo.fundName),e.$set(e.dialogData,"inveId",e.baseInfo.fundId),e.$set(e.dialogData,"person",t.data.list.map((function(t){return t.commUserId})).join(",")),e.$set(e.dialogData,"personName",t.data.list.map((function(t){return t.commUserName})).join(",")),e.isEdit="edit"===a,e.dialogTitle="edit"===a?"编辑":"查看",e.iframeUrl="/sysweb/action/workflowProcess!flowGraphics.action?defId=".concat(t.data.deftId,"&instId=").concat(t.data.processInstId,"&taskId=").concat(t.data.taskId,"&frameInd=2"),e.iframeProcessUrl=e.defaultUrlTwo+"?instId="+t.data.processInstId+"&listViewId=fixflowProcessInfosListView&listViewFileName=fixflowProcessInfosListViewFirst",e.dialogVisible=!0)}))},handleSizeChange:function(t){this.getTableList(t,1)},handleCurrentChange:function(t){this.getTableList(this.tableData.pageSize,t)},dialogClose:function(){this.dialogData={},this.isEdit=!0},del:function(t){var a=this;this.$confirm("是否删除此数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["Kb"])({ids:t.row.iraId}).then((function(t){"成功"===t.msg?(a.$message({message:"成功删除",type:"success",offset:150}),Object(n["Gb"])({projId:a.$route.params.projId}),a.getTableList()):a.$message({message:t.msg,type:"warning",offset:150})}))})).catch((function(){}))}}},d=l,r=e("4ac2"),c=Object(r["a"])(d,i,s,!1,null,"7f6f0708",null);a["default"]=c.exports}}]);