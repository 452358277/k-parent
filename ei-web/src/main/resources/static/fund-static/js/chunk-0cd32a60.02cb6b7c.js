(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cd32a60","chunk-7aade0c8"],{"0230":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.dialogInfo.fundCode?e._e():s("el-row",{staticClass:"personHeadInfo",staticStyle:{"margin-top":"20px"},attrs:{align:"center"}},[s("el-col",{staticClass:"personHeadTitle",attrs:{span:3}},[e._v("\n      企业名称\n    ")]),e._v(" "),s("el-col",{staticClass:"personHeadItem",attrs:{span:9}},[s("div",[e._v("\n        "+e._s(e.dialogInfo.projName)+"\n      ")])]),e._v(" "),s("el-col",{staticClass:"personHeadTitle",attrs:{span:3}}),e._v(" "),s("el-col",{staticClass:"personHeadItem",attrs:{span:9}})],1),e._v(" "),e.dialogInfo.fundCode?s("el-row",{staticClass:"personHeadInfo",staticStyle:{"margin-top":"20px"},attrs:{align:"center"}},[s("el-col",{staticClass:"personHeadTitle",attrs:{span:3}},[e._v("\n      基金编号\n    ")]),e._v(" "),s("el-col",{staticClass:"personHeadItem",attrs:{span:9}},[s("div",[e._v("\n        "+e._s(e.dialogInfo.fundCode)+"\n      ")])]),e._v(" "),s("el-col",{staticClass:"personHeadTitle",attrs:{span:3}},[e._v("\n      出资主体\n    ")]),e._v(" "),s("el-col",{staticClass:"personHeadItem",attrs:{span:9}},[s("div",[e._v("\n        "+e._s(e.dialogInfo.inveName)+"\n      ")])])],1):e._e(),e._v(" "),e.dialogInfo.fundCode?s("el-row",{staticClass:"personHeadInfo",attrs:{align:"center"}},[s("el-col",{staticClass:"personHeadTitle",attrs:{span:3}},[e._v("\n      基金名称\n    ")]),e._v(" "),s("el-col",{staticClass:"personHeadItem",attrs:{span:9}},[s("div",[e._v("\n        "+e._s(e.dialogInfo.fundName)+"\n      ")])]),e._v(" "),s("el-col",{staticClass:"personHeadTitle",attrs:{span:3}},[e._v("\n      项目状态\n    ")]),e._v(" "),s("el-col",{staticClass:"personHeadItem",attrs:{span:9}},[s("div",[e._v("\n        "+e._s(e.dialogInfo.projType)+"\n      ")])])],1):e._e(),e._v(" "),s("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData2.data,"header-cell-style":{background:"#FEFAFA",color:"#333",fontWeight:"bold",fontSize:"12px",textAlign:"center"},size:"small",border:""}},[s("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{align:"left",width:"200",label:"派遣类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.userTypeName)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"left","min-width":"200",prop:"",label:"派遣人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[t.row.userName?s("el-tag",{staticStyle:{"font-size":"14px","margin-right":"10px"}},[e._v(e._s(t.row.userName)+"\n          ")]):e._e()],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center","min-width":"120",prop:"status",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.remark)+"\n      ")]}}])})],1),e._v(" "),"UserTask_4"===e.node&&4!=e.dialogInfo.groupId?s("personPage",{attrs:{"is-edit":"view"!==e.steps},model:{value:e.personInfo,callback:function(t){e.personInfo=t},expression:"personInfo"}}):e._e(),e._v(" "),"view"!==e.steps?s("div",{attrs:{id:"myDiv"}},[s("div",{staticClass:"processTitle"},[e._v("审批信息")]),e._v(" "),e.iframeShows?s("iframe",{attrs:{src:e.src,width:"100%",id:"contentFrame_sp",frameborder:"0",scrolling:"no"}}):e._e()]):e._e(),e._v(" "),"view"!==e.steps?s("process",{ref:"process",attrs:{"content-path":e.url.urlApi},on:{action:e.saveInfo}}):e._e()],1)},n=[],o=(s("1bc7"),s("a450"),s("91e8")),i=(s("2c2d"),s("e19c")),l=s("7562"),r=s("7a91"),c={name:"DispatchProcess",data:function(){return{tableData2:{data:[]},dialogInfo:{},src:"",queryInfo:{},iframeShows:!1,url:i["a"],extraData:{},steps:"",node:"",personInfo:{}}},components:{process:o["a"],personPage:r["default"]},mounted:function(){var e=this;this.queryInfo=this.$route.query,this.iframeShows=!0,this.src="".concat(i["a"].processUrl,"action/showListview.action?listViewId=fixflowProcessInfosListView&instId=").concat(this.queryInfo.instId,"&listViewFileName=fixflowProcessInfosListViewFirst&frameInd=").concat(this.queryInfo.frameInd),this.getPageDetail(),this.extraData={result:!0,extendParam:""},this.steps=this.$route.query.steps,this.node=this.$route.query.node,this.$route.query.projUser&&l["a"].getstaffNo({projUser:this.$route.query.projUser}).then((function(t){e.$set(e.personInfo,"applyNo",t.data.data.appNo),e.$set(e.personInfo,"APPLICANT_NAME",t.data.data.APPLICANT_NAME),e.$set(e.personInfo,"applicantName",t.data.data.APPLICANT_NAME),e.$set(e.personInfo,"applicantId",t.data.data.APPLICANT_ID),e.$set(e.personInfo,"applicantCompany",t.data.data.curOrg.attrMap.NAME),e.$set(e.personInfo,"applicantCompanyId",t.data.data.curOrg.attrMap.ID),e.$set(e.personInfo,"applicantDepartment",t.data.data.dept.name),e.$set(e.personInfo,"applicantDepartmentId",t.data.data.dept.id),e.$set(e.personInfo,"applyTime",t.data.data.APPLY_TIME),e.$set(e.personInfo,"PROCESS_STATUS",t.data.data.PROCESS_STATUS),e.$set(e.personInfo,"projUser",e.$route.query.projUser),e.$set(e.personInfo,"applicantId",e.$route.query.projUser),e.$set(e.personInfo,"applyStatus","1"),e.$set(e.personInfo,"applyType","RSZT")}))},methods:{getPageDetail:function(){var e=this;l["a"].staffListDetail({id:this.$route.query.assignId}).then((function(t){"0"===t.data.status&&(e.tableData2.data=t.data.data.listVO,e.assignId=t.data.data.assignId),e.tableData2.data.forEach((function(e){delete e.createDt,delete e.updateDt})),e.dialogInfo.fundCode=t.data.data.listVO[0].projInfoModel.fundInfo?t.data.data.listVO[0].projInfoModel.fundInfo.fundCode:"",e.dialogInfo.groupId=t.data.data.listVO[0].projInfoModel.groupId?t.data.data.listVO[0].projInfoModel.groupId:"",e.dialogInfo.inveName="0"===t.data.data.listVO[0].projInfoModel.inveId?"江苏省政府投资基金（有限合伙）":t.data.data.listVO[0].projInfoModel.inveName,e.dialogInfo.fundName=t.data.data.listVO[0].projInfoModel.fundInfo?t.data.data.listVO[0].projInfoModel.fundInfo.fundName:"",e.dialogInfo.projType=t.data.data.listVO[0].projStatusName,e.dialogInfo.projName=t.data.data.listVO[0].projInfoModel.projName,e.dialogInfo.assignId=e.$route.query.assignId,"view"===e.$route.query.steps&&(e.$set(e.personInfo,"applyNo",t.data.data.applyIssuedDocModel.applyNo),e.$set(e.personInfo,"APPLICANT_NAME",t.data.data.applyInfoModel.applicantName),e.$set(e.personInfo,"applicantCompany",t.data.data.applyInfoModel.applicantCompany),e.$set(e.personInfo,"applicantDepartment",t.data.data.applyInfoModel.applicantDepartment),e.$set(e.personInfo,"applyTime",t.data.data.applyInfoModel.applyTime),e.$set(e.personInfo,"issuedTitle",t.data.data.applyIssuedDocModel.issuedTitle),e.$set(e.personInfo,"issuedLevel",t.data.data.applyIssuedDocModel.issuedLevel),e.$set(e.personInfo,"issueDocumentClass",t.data.data.applyIssuedDocModel.issueDocumentClass),e.$set(e.personInfo,"urgencyDegree",t.data.data.applyIssuedDocModel.urgencyDegree),e.$set(e.personInfo,"printAmount",t.data.data.applyIssuedDocModel.printAmount),e.$set(e.personInfo,"issueDocumentType",t.data.data.applyIssuedDocModel.issueDocumentType),e.$set(e.personInfo,"issueDocumentNo",t.data.data.applyIssuedDocModel.issueDocumentNo),e.$set(e.personInfo,"meetingDepart",t.data.data.applyIssuedDocModel.meetingDepart),e.$set(e.personInfo,"destinationMs",t.data.data.applyIssuedDocModel.destinationMs),e.$set(e.personInfo,"destinationCc",t.data.data.applyIssuedDocModel.destinationCc),e.$set(e.personInfo,"content",t.data.data.applyIssuedDocModel.content),e.$set(e.personInfo,"attachment",t.data.data.applyIssuedDocModel.attachment),e.$set(e.personInfo,"issueDocumentClassName",t.data.data.issueDocumentClassName),e.$set(e.personInfo,"issueDocumentTypeName",t.data.data.issueDocumentTypeName),e.$set(e.personInfo,"issuedLevelName",t.data.data.issuedLevelName),e.$set(e.personInfo,"urgencyDegreeName",t.data.data.urgencyDegreeName))}))},saveInfo:function(){var e=this;if("UserTask_4"===this.node&&4!=this.dialogInfo.groupId){if(""===this.personInfo.issuedTitle||void 0===this.personInfo.issuedTitle||null===this.personInfo.issuedTitle)return void this.$message({offset:150,type:"warning",message:"请填写发文标题"});if(""===this.personInfo.issueDocumentClass||void 0===this.personInfo.issueDocumentClass||null===this.personInfo.issueDocumentClass)return void this.$message({offset:150,type:"warning",message:"请选择发文类别"});if(""===this.personInfo.destinationMs||void 0===this.personInfo.destinationMs||null===this.personInfo.destinationMs)return void this.$message({offset:150,type:"warning",message:"请选择主送内容"})}Object.assign(this.dialogInfo,this.personInfo),this.dialogInfo.content="".concat(this.dialogInfo.content?this.dialogInfo.content:"",",基金编号:").concat(this.dialogInfo.fundCode,",出资主体:").concat(this.dialogInfo.inveName,",基金名称:").concat(this.dialogInfo.fundName,",项目状态:").concat(this.dialogInfo.projType),this.tableData2.data.forEach((function(t,s){e.dialogInfo.content="".concat(e.dialogInfo.content,"。人事派遣信息： 派遣类型").concat(s+1,"：").concat(t.userTypeName,",派遣人员").concat(s+1,"：").concat(t.userName,",备注").concat(s+1,"：").concat(t.remark?t.remark:"")})),4==this.tableData2.data[0].projInfoModel.groupId?this.$refs.process.nextTask():l["a"].startWork(this.dialogInfo).then((function(t){e.$refs.process.nextTask()}))}}},d=c,u=(s("df09"),s("4ac2")),p=Object(u["a"])(d,a,n,!1,null,"717075d4",null);t["default"]=p.exports},"0c90":function(e,t,s){"use strict";s("d3c3")},"14d4":function(e,t,s){},"7a91":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"processTitle"},[e._v("申请信息")]),e._v(" "),s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      申请单号\n      "),s("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.applyNo)+"\n    ")]),e._v(" "),s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      拟稿人\n    ")]),e._v(" "),s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.APPLICANT_NAME)+"\n    ")])],1),e._v(" "),s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      所属公司\n      "),s("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.applicantCompany)+"\n    ")]),e._v(" "),s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      所属部门\n    ")]),e._v(" "),s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.applicantDepartment)+"\n    ")])],1),e._v(" "),s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      申请日期\n    ")]),e._v(" "),s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.applyTime)+"\n    ")]),e._v(" "),s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      流程步骤\n    ")]),e._v(" "),s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.PROCESS_STATUS)+"\n    ")])],1),e._v(" "),s("div",{staticClass:"processTitle"},[e._v("稿件信息")]),e._v(" "),s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      发文标题\n      "),s("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?s("el-col",{staticClass:"col-content",attrs:{span:20}},[s("el-input",{attrs:{size:"small"},model:{value:e.value.issuedTitle,callback:function(t){e.$set(e.value,"issuedTitle",t)},expression:"value.issuedTitle"}})],1):e._e(),e._v(" "),e.isEdit?e._e():s("el-col",{staticClass:"col-content",attrs:{span:20}},[e._v("\n      "+e._s(e.value.issuedTitle)+"\n    ")])],1),e._v(" "),s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      发文密级\n    ")]),e._v(" "),e.isEdit?s("el-col",{staticClass:"col-content",attrs:{span:8}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.value.issuedLevel,callback:function(t){e.$set(e.value,"issuedLevel",t)},expression:"value.issuedLevel"}},e._l(e.issuedLevelList,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.issuedLevel)+"\n    ")]),e._v(" "),s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      发文类别\n    ")]),e._v(" "),e.isEdit?s("el-col",{staticClass:"col-content",attrs:{span:8}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.value.issueDocumentClass,callback:function(t){e.$set(e.value,"issueDocumentClass",t)},expression:"value.issueDocumentClass"}},e._l(e.issueDocumentClassList,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.issueDocumentClass)+"\n    ")])],1),e._v(" "),s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      紧急程度\n    ")]),e._v(" "),e.isEdit?s("el-col",{staticClass:"col-content",attrs:{span:8}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.value.urgencyDegree,callback:function(t){e.$set(e.value,"urgencyDegree",t)},expression:"value.urgencyDegree"}},e._l(e.urgencyDegreeList,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.urgencyDegree)+"\n    ")]),e._v(" "),s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      印发数量\n    ")]),e._v(" "),e.isEdit?s("el-col",{staticClass:"col-content",attrs:{span:8}},[s("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.value.printAmount,callback:function(t){e.$set(e.value,"printAmount",t)},expression:"value.printAmount"}})],1):e._e(),e._v(" "),e.isEdit?e._e():s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.printAmount)+"\n    ")])],1),e._v(" "),s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      发文类型\n    ")]),e._v(" "),e.isEdit?s("el-col",{staticClass:"col-content",attrs:{span:8}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.value.issueDocumentType,callback:function(t){e.$set(e.value,"issueDocumentType",t)},expression:"value.issueDocumentType"}},e._l(e.issueDocumentTypeList,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.issueDocumentType)+"\n    ")]),e._v(" "),s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      发文文号\n    ")]),e._v(" "),e.isEdit?s("el-col",{staticClass:"col-content",attrs:{span:8}},[s("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.value.issueDocumentNo,callback:function(t){e.$set(e.value,"issueDocumentNo",t)},expression:"value.issueDocumentNo"}})],1):e._e(),e._v(" "),e.isEdit?e._e():s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.issueDocumentNo)+"\n    ")])],1),e._v(" "),s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      会办部门\n    ")]),e._v(" "),e.isEdit?s("el-col",{staticClass:"col-content",attrs:{span:8}},[s("el-input",{attrs:{size:"small",readonly:"readonly"},model:{value:e.value.meetingDepart,callback:function(t){e.$set(e.value,"meetingDepart",t)},expression:"value.meetingDepart"}}),e._v(" "),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.choicehbbm}},[e._v("部门选择")])],1):e._e(),e._v(" "),e.isEdit?e._e():s("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.meetingDepart)+"\n    ")]),e._v(" "),s("el-col",{staticClass:"col-title",attrs:{span:4}}),e._v(" "),s("el-col",{staticClass:"col-content",attrs:{span:8}})],1),e._v(" "),s("div",{staticClass:"processTitle"},[e._v("发布信息")]),e._v(" "),"1"===e.value.issueDocumentClass?s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      主送\n      "),s("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),s("el-col",{staticClass:"col-content",staticStyle:{"flex-direction":"column","align-items":"flex-start"},attrs:{span:20}},[s("el-input",{attrs:{size:"small",rows:4,type:"textarea",readonly:"readonly"},model:{value:e.value.destinationMsName,callback:function(t){e.$set(e.value,"destinationMsName",t)},expression:"value.destinationMsName"}}),e._v(" "),s("el-button",{staticStyle:{"margin-top":"4px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.zsVisible=!0}}},[e._v("主送选择")])],1)],1):e._e(),e._v(" "),"2"===e.value.issueDocumentClass?s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      主送\n      "),s("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),s("el-col",{staticClass:"col-content",attrs:{span:20}},[s("el-input",{attrs:{size:"small",rows:2,type:"textarea"},model:{value:e.value.destinationMs,callback:function(t){e.$set(e.value,"destinationMs",t)},expression:"value.destinationMs"}})],1)],1):e._e(),e._v(" "),s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      抄送\n    ")]),e._v(" "),s("el-col",{staticClass:"col-content",staticStyle:{"flex-direction":"column","align-items":"flex-start"},attrs:{span:20}},[s("el-input",{attrs:{size:"small",rows:4,type:"textarea",readonly:"readonly"},model:{value:e.value.destinationCcName,callback:function(t){e.$set(e.value,"destinationCcName",t)},expression:"value.destinationCcName"}}),e._v(" "),s("el-button",{staticStyle:{"margin-top":"4px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.csVisible=!0}}},[e._v("抄送选择")])],1)],1),e._v(" "),s("div",{staticClass:"processTitle"},[e._v("内容摘要")]),e._v(" "),s("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[s("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      内容摘要\n    ")]),e._v(" "),s("el-col",{staticClass:"col-content",attrs:{span:20}},[s("el-input",{attrs:{size:"small",rows:4,type:"textarea"},model:{value:e.value.destinationMsg,callback:function(t){e.$set(e.value,"destinationMsg",t)},expression:"value.destinationMsg"}})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"会办部门",visible:e.hbbmVisible,width:"90%"},on:{"update:visible":function(t){e.hbbmVisible=t},close:e.hbbmClose}},[s("choicehbbm",{attrs:{list:e.hbbmList},on:{surePerson:e.surePerson,cancelPerson:e.cancelPerson},model:{value:e.value.meetingDepartId,callback:function(t){e.$set(e.value,"meetingDepartId",t)},expression:"value.meetingDepartId"}})],1),e._v(" "),s("el-dialog",{attrs:{title:"主送",visible:e.zsVisible,width:"90%"},on:{"update:visible":function(t){e.zsVisible=t},close:e.zsClose}},[s("choicePerson",{attrs:{contextPath:e.url.upApi},on:{"update-value":e.getZSPerson},model:{value:e.value.destinationMs,callback:function(t){e.$set(e.value,"destinationMs",t)},expression:"value.destinationMs"}})],1),e._v(" "),s("el-dialog",{attrs:{title:"抄送",visible:e.csVisible,width:"90%"},on:{"update:visible":function(t){e.csVisible=t},close:e.csClose}},[s("choicePerson",{attrs:{contextPath:e.url.upApi},on:{"update-value":e.getCCPerson},model:{value:e.value.destinationCc,callback:function(t){e.$set(e.value,"destinationCc",t)},expression:"value.destinationCc"}})],1)],1)},n=[],o=(s("a450"),s("aa18"),s("982e"),s("1bc7"),s("fc02"),s("7562")),i=s("e19c"),l=s("2c2d"),r=s("3154"),c=s("fc12"),d={name:"Index",model:{prop:"value",event:"update-value"},components:{upLoad:l["a"],choicehbbm:r["a"],choicePerson:c["a"]},props:{value:{type:Object,default:function(){return{issueDocumentClass:"1"}}},isEdit:{type:Boolean,default:!0}},data:function(){return{exitTypeList:[],url:i["a"],issueDocumentClassList:[],issuedLevelList:[],issueDocumentTypeList:[],urgencyDegreeList:[],hbbmList:[],hbbmVisible:!1,zsVisible:!1,csVisible:!1,csList:[],zsList:[]}},mounted:function(){var e=this;this.getParentId("327","issuedLevelList","3,4,5,6"),this.getParentId("11009","issueDocumentClassList"),this.getParentId("11008","issueDocumentTypeList"),this.getParentId("11007","urgencyDegreeList"),o["a"].showSynchGroupTree().then((function(t){e.hbbmList=t.data,e.csList=t.data})),o["a"].showOrganization().then((function(t){e.zsList=t.data}))},methods:{getParentId:function(e,t){var s=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;sessionStorage.getItem("code".concat(e))?this[t]=JSON.parse(sessionStorage.getItem("code".concat(e))):o["a"].getCodeByParentId({parentId:e}).then((function(n){var o=[];if(a){var i=a.split(",");n.data.data.options.forEach((function(e){i.includes(e.value)&&o.push(e)}))}else o=n.data.data.options;s[t]=o,sessionStorage.setItem("code".concat(e),JSON.stringify(n.data.data.options))}))},hbbmClose:function(){},csClose:function(){},zsClose:function(){},choicehbbm:function(){this.hbbmVisible=!0},getZSPerson:function(e,t){this.value.destinationMsName=t.join(","),this.value.destinationMs=e,this.zsVisible=!1},getCCPerson:function(e,t){this.value.destinationCcName=t.join(","),this.value.destinationCc=e,this.csVisible=!1},surePerson:function(e){this.value.meetingDepart=e.name.join(","),this.value.meetingDepartId=e.id.join(","),this.hbbmVisible=!1},cancelPerson:function(){this.hbbmVisible=!1},zssurePerson:function(e){this.value.destinationMs=e.name.join(","),this.zsVisible=!1},zscancelPerson:function(){this.zsVisible=!1},cssurePerson:function(e){this.value.destinationCc=e.name.join(","),this.csVisible=!1},cscancelPerson:function(){this.csVisible=!1}}},u=d,p=(s("0c90"),s("4ac2")),f=Object(p["a"])(u,a,n,!1,null,"11daf1c3",null);t["default"]=f.exports},"91e8":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.instId,expression:"instId"}],attrs:{id:"instId",type:"hidden"},domProps:{value:e.instId},on:{input:function(t){t.target.composing||(e.instId=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.taskId,expression:"taskId"}],attrs:{id:"taskId",type:"hidden"},domProps:{value:e.taskId},on:{input:function(t){t.target.composing||(e.taskId=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formUri,expression:"formUri"}],attrs:{id:"formUri",type:"hidden"},domProps:{value:e.formUri},on:{input:function(t){t.target.composing||(e.formUri=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formUriView,expression:"formUriView"}],attrs:{id:"formUriView",type:"hidden"},domProps:{value:e.formUriView},on:{input:function(t){t.target.composing||(e.formUriView=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.pshow,expression:"pshow"}],attrs:{id:"pshow",type:"hidden"},domProps:{value:e.pshow},on:{input:function(t){t.target.composing||(e.pshow=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.phid,expression:"phid"}],attrs:{id:"phid",type:"hidden"},domProps:{value:e.phid},on:{input:function(t){t.target.composing||(e.phid=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.contentPath,expression:"contentPath"}],attrs:{id:"contentPath",type:"hidden"},domProps:{value:e.contentPath},on:{input:function(t){t.target.composing||(e.contentPath=t.target.value)}}}),e._v(" "),s("table",{staticClass:"addtable",staticStyle:{"margin-top":"0px","margin-bottom":"10px"},attrs:{id:"formToolBarTable",width:"100%",border:"0",cellspacing:"0",cellpadding:"0"}},[e._m(0),e._v(" "),s("tr",{staticStyle:{border:"1px solid #D9D9D9"}},[s("td",{staticClass:"td_name",staticStyle:{width:"20%",padding:"0px","font-size":"13px","text-align":"center","vertical-align":"middle",color:"#997528",background:"#eae3d8"}},[e._v("处理意见")]),e._v(" "),s("td",{staticClass:"td_value",staticStyle:{width:"82%",padding:"6px"},attrs:{colspan:"3"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.taskProcessDescValue,expression:"taskProcessDescValue"}],staticStyle:{width:"100%",height:"70px","border-radius":"4px"},attrs:{name:"taskProcessDesc",id:"taskProcessDesc"},domProps:{value:e.taskProcessDescValue},on:{input:function(t){t.target.composing||(e.taskProcessDescValue=t.target.value)}}})])]),e._v(" "),s("tr",[s("td",{staticClass:"td_name",staticStyle:{width:"18%"}}),e._v(" "),s("td",{staticClass:"td_value drawablel",staticStyle:{width:"82%"},attrs:{colspan:"3",id:"processToolBar"}},[1===e.allcommshow?e._l(e.commandes,(function(t){return s("button",{staticClass:"el-button el-button--primary el-button--small",attrs:{id:t.id,type:"primary"},on:{click:function(s){return e.btnHandel(t)}}},[e._v(e._s(t.name))])})):e._e(),e._v(" "),0===!e.allcommshow?e._l(e.commandes,(function(t){return t.fixParam_BeforeShowJS?s("button",{staticClass:"el-button el-button--primary el-button--small",attrs:{id:t.id,type:"primary"},on:{click:function(s){return e.btnHandel(t)}}},[e._v(e._s(t.name)+"\n          ")]):e._e()})):e._e()],2)])])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td",{attrs:{colspan:"4"}},[s("div",{staticClass:"panel-header panel-title",staticStyle:{"border-left":"0px","border-right":"0px","border-top":"0px","margin-top":"1px","margin-bottom":"1px"}},[e._v("流程审批\n        ")])])])}],o=s("e1da"),i=o["a"],l=(s("ac8e"),s("4ac2")),r=Object(l["a"])(i,a,n,!1,null,"3b8cec4e",null);t["a"]=r.exports},ac8e:function(e,t,s){"use strict";s("c73f")},c73f:function(e,t,s){},d3c3:function(e,t,s){},df09:function(e,t,s){"use strict";s("14d4")},e1da:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a450"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fc02"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e680"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_2__),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("7f43"),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__);__webpack_exports__["a"]={name:"process",props:{allcommshow:{type:Number,default:1},validateFun:Function,contentPath:{type:String,default:"/ei-web/"},contextPath:{type:String,default:"/ei-web/"},extraData:{type:Object,default:function(){return{result:!0,extendParam:""}}}},watch:{taskId:function(e){var t=this;axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(this.contentPath+"workflowProcess/getProcessCommandJSON?taskId="+this.taskId,{taskId:this.taskId}).then((function(e){t.commandes=e.data})).catch((function(e){})),this.showAndHidForm(this.pshow,this.phid)}},data:function(){return{isShowBtn:!1,btnId:"",btnName:"",btnJson:"",taskProcessDescValue:"",submitCount:0,commandes:null,instId:"",taskId:"",formUri:"",formUriView:"",pshow:"",phid:"",theRequest:{},extendParam:"",json:{},websock:""}},mounted:function(){window.location;var e=this.$route.query;this.theRequest=e,this.instId=this.theRequest.instId,this.taskId=this.theRequest.taskId,this.formUri=this.theRequest.formUri,this.formUriView=this.theRequest.formUriView,this.initWebSocket()},destroyed:function(){this.websocketclose()},methods:{initWebSocket:function(){var e="ws://".concat(window.location.host,"/sys-web/websocket/").concat(sessionStorage.getItem("userId"),"000");this.websock=new WebSocket(e),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){},websocketonerror:function(){this.initWebSocket()},websocketonmessage:function(e){console.log("接受到的消息："+e.data)},websocketsend:function(e){this.websock.send(e)},websocketclose:function(e){console.log("断开连接",e),1006===e.code&&this.initWebSocket()},showAndHidForm:function(e,t){if(null!=e&&""!==e)for(var s=e.split(","),a=0;a<s.length;a++)$("#"+s[a]).show();if(null!=t&&""!==t)for(var n=t.split(","),o=0;o<n.length;o++)$("#"+n[o]).attr("style","display:none").hide()},beforeCommandShow:function(){return!0},btnHandel:function(e){var t=e.fixParam_BeforeHandleJS,s=(e.type,"");this.json=e,console.log("undefined"!=typeof t&&null!=t&&""!=t,"fixParam_BeforeHandleJS"===e.id),"退回"===e.name||"不同意"===e.name?this.nextTask():"undefined"!=typeof t&&null!=t&&""!=t||"fixParam_BeforeHandleJS"===e.id?(this.$emit("action"),s="",this.extendParam=""):this.nextTask(),"undefined"!=typeof s&&null!=s&&""!=s||(s="")},nextTask:function(e){var t=this.json;this.doProcessTask("",t.name,t.id,t.type,t,this.extendParam)},doProcessTask:function(e,t,s,a,n,o){document.documentElement.scrollTop=0,this.processTask(t,s,a,n,o)},processTask:function(e,t,s,a,n){var o=this;this.confirmMessage("确认进行"+e+"操作？",(function(e){if(e){document.documentElement.scrollTop=0;var i=o.taskProcessDescValue;if(i.length>2e3)return void o.alertMessage("处理意见超长，最大长度为2000字符！");var l={instId:o.instId,taskId:o.taskId,commandId:t,commandType:s,processDesc:encodeURIComponent(o.taskProcessDescValue),formParam:n},r=!!a.fixParam_taskProcessDescFlag&&a.fixParam_taskProcessDescFlag,c=a.fixParam_taskProcessDescMessage?a.fixParam_taskProcessDescMessage:"";if("true"===r&&""===l.processDesc)return""===c&&(c="请填写处理意见，最大长度为2000字符！"),void o.alertMessage(c);if("rollBackTaskByExpression"===s){if(""===l.processDesc)return void o.alertMessage("请填写意见！")}else try{var d=saveDataMy();if(!d)return}catch(v){}if("modifyForm"===s){var u=a.fixParam_title;u&&""!==u||(u="修改");var p={toobarTitle:u},f=a.fixParam_url;return f&&""!==f||(f=o.formUri),f=appendParams(f,{submitBtnShow:"false"}),void o.getPageWin("layout",window).openWindow(800,600,p.toobarTitle,f,p,(function(){parent.refreshCenterRegion()}))}if("pending"===s){p={toobarTitle:"请选择转办人"},f=a.fixParam_url;if(f){var m=a.fixParam_width,_=a.fixParam_height;m||(m=800),_||(_=600),o.getPageWin("layout",window).openWindow(m,_,p.toobarTitle,f,p,(function(){var e=o.getPageWin("layout",window).invokeResult;e&&e.result&&(e.selectUserId&&(l["pendingUserId"]=e.selectUserId),o.execProcessTask(l))}))}else o.execProcessTask(l);return}if("rollBackTaskByTaskId"===s){p={toobarTitle:"请选择任务"},f="../jsps/process/listRollBackTaskList.jsp?taskId="+o.taskId+"&instId="+o.instId+"&commandId="+t+"&commandType="+s+"&processDesc="+encodeURIComponent(encodeURIComponent($("#taskProcessDesc").val()))+"&bizKey="+$("#keyValues").val();return openWindow(800,600,p.toobarTitle,f,p,(function(){})),!1}if("rollBack"==s){p={toobarTitle:"请选择节点"},f="../jsps/process/listRollBackNodeList.jsp?taskId="+taskId+"&instId="+instId+"&commandId="+t+"&commandType="+s+"&processDesc="+encodeURIComponent(encodeURIComponent($("#taskProcessDesc").val()))+"&bizKey="+$("#keyValues").val();return openWindow(480,320,p.toobarTitle,f,p,(function(){})),!1}if("submit"!=s){u=a.fixParam_title;u&&""!=u||(u="修改");p={toobarTitle:u},f=a.fixParam_url;if(f){m=a.fixParam_width,_=a.fixParam_height;m||(m=800),_||(_=600),o.getPageWin("layout",window).openWindow(m,_,p.toobarTitle,f,p,(function(){var e=getPageWin("layout",window).invokeResult;if(e&&e.result){if(e.taskProcessDesc){var t=$("#taskProcessDesc").val();t=""==t?e.taskProcessDesc:t+","+e.taskProcessDesc,$("#taskProcessDesc").val(t)}o.execProcessTask(l)}}))}else o.execProcessTask(l);return}if(!o.validate())return void alertMessage("表单验证不通过,请重新填写");o.execProcessTask(l)}}))},confirmMessage:function(e,t){$.messager.defaults.ok="确认",$.messager.defaults.cancel="关闭",$.messager.confirm("提示",e,t)},alertMessage:function(e,t){$.messager.defaults.ok="确认",$.messager.alert("提示",e,"info",t)},getPageWin:function(e,t){var s=this.getParentPageWin(e,t);return s},getParentPageWin:function(e,t){var s=t;return("undefined"===typeof s.pageId||s.pageId!=e)&&null!=s.parent?s.location.href!=s.parent.location.href?this.getPageWin(e,s.parent):null:s},closeLayUIOpen:function(){localStorage.setItem("closeKey",1),void 0!=parent.layer?parent.layer.close(parent.layer.getFrameIndex(window.name)):void 0!=parent.parent.layer?parent.parent.layer.close(parent.parent.layer.getFrameIndex(parent.name)):void 0!=parent.parent.parent.layer?parent.parent.parent.layer.close(parent.parent.parent.layer.getFrameIndex(parent.parent.name)):parent.parent.parent.parent.layer.close(parent.parent.parent.parent.layer.getFrameIndex(parent.parent.parent.name))},execProcessTask:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.submitCount;s++;var a=e.instId;1===s&&axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(this.contentPath+"workflowProcess/processTask?"+"instId=".concat(e.instId,"&taskId=").concat(e.taskId,"&commandId=").concat(e.commandId,"&commandType=").concat(e.commandType,"&processDesc=").concat(e.processDesc,"&formParam=").concat(JSON.stringify(e.formParam)),e).then((function(e){var s=e.data;s.result?t.alertMessage(s.successMessage,(function(){t.websocketsend("fixFlow,".concat(a));var e=t.getListviewWin(window);null==e?t.closeLayUIOpen():t.getListviewWin(window).closeWindow()})):(t.submitCount=0,t.alertMessage(s.errorMessage,(function(){var e=t.getListviewWin(window);null==e?t.closeLayUIOpen():t.getListviewWin(window).closeWindow()})))}))},getListviewWin:function(e){var t=e;return"undefined"===typeof t.listviewId&&null!=t.parent?t.location.href!=t.parent.location.href?this.getListviewWin(t.parent):null:t},taskProcessDescCheck:function(){var e="",t=0,s=$("#taskProcessDesc").val();return e=""==s?'{"result":false,"errorMsg":"请填写退回理由！"}':'{"result":true,"extendParam":'+t+"}",e},saveData2:function saveData2(fn,data2){try{var mark=this.saveDataBefore();if(!mark)return}catch(e){}var result=this.validate(),editWin=getEditWin(window),inJCEdit=null!=editWin;"false"==parameterJsonObj.inJCEdit&&(inJCEdit=!1),result&&($.messager.progress({title:"正在处理,请稍等..."}),$("#dataForm").form("submit",{url:"../action/bizObjectBase!save.action",async:!1,onSubmit:function(){return!0},success:function success(data){$.messager.progress("close"),execProcessTask(data2);var dataObj=eval("("+data+")");if(dataObj.result){"new"==dealMark&&(keyValues=dataObj.attribute.keyValues,dealMark="update",document.getElementsByName("keyValues")[0].value=keyValues,document.getElementsByName("dealMark")[0].value=dealMark);try{saveDataAfter()}catch(e){}}if(inJCEdit){if(getEditWin(window).assetExist=!0,getEditWin(window).keyValues=dataObj.attribute.keyValues,null!=fn)return fn(dataObj)}else if($.messager.progress("close"),dataObj.result){var listviewWin=getListviewWin(window);null!=listviewWin&&listviewWin.refresh(),$.messager.defaults.ok="确定",$.messager.alert("提示",dataObj.successMessage,"info",(function(){if(null!=fn)return fn(dataObj)}))}else $.messager.defaults.ok="确定",$.messager.alert("提示",dataObj.errorMessage,"info",(function(){if(null!=fn)return fn(dataObj)}))}}))},getEditWin:function(e){var t=e;return"undefined"===typeof t.integrationEditorId&&null!=t.parent?t.location.href!=t.parent.location.href?this.getEditWin(t.parent):null:t},validate:function(){return!0},saveDataBefore:function(){return!0}}}}}]);