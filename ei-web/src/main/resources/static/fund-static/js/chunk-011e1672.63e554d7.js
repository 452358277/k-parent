(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-011e1672","chunk-52fe907c","chunk-9c1bf314","chunk-75113a49","chunk-811fa970"],{"01a0":function(e,t,a){e.exports={menuText:"#fff",menuActiveText:"#fff",subMenuActiveText:"#fff",menuBg:"#49443e",menuHover:"rgba(178,129,71,0.54902)",menuActive:"#B28147",menuItemH:"45px",subMenuBg:"#1f2d3d",subMenuHover:"rgba(178,129,71,0.54902)",sideBarWidth:"180px",headerH:"0px"}},"050c":function(e,t,a){"use strict";a("31b7")},"1fc9":function(e,t,a){"use strict";a("66a5")},"1ff2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{background:"#fff","padding-top":"20px"}},[a("div",{staticClass:"btnBox"},[a("button",{on:{click:e.addInfo}},[a("i",{staticClass:"iconfont iconjiahao"}),e._v("\n        新增\n      ")]),e._v(" "),a("button",{on:{click:function(t){return e.editInfo(e.selectList)}}},[a("i",{staticClass:"iconfont iconbianji"}),e._v("\n        编辑\n      ")]),e._v(" "),a("button",{on:{click:function(t){return e.delInfo(e.selectList)}}},[a("i",{staticClass:"iconfont iconbianji"}),e._v("\n        删除\n      ")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData.data,"header-cell-style":{background:"#FEFAFA",color:"#333",fontWeight:"bold",fontSize:"12px",textAlign:"center"},size:"small",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"230",prop:"investorIdName",label:"投资人名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"110",prop:"inveTypeName",label:"投资人类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"110",prop:"inveRoleName",label:"投资角色"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"110",prop:"gB",label:"股比%"}}),e._v(" "),a("el-table-column",{attrs:{align:"right","min-width":"200",prop:"userName",label:"认缴金额(万元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("money")(t.row.inveAmount))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"110",prop:"inveCurrencyName",label:"币种"}}),e._v(" "),a("el-table-column",{attrs:{align:"right","min-width":"200",prop:"userName",label:"累计出资金额(万元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("money")(t.row.totalFinancial))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"200",prop:"userName",label:"累计出资币种"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.totalFinCurrencyName)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"110",prop:"schedule",label:"出资进度"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"110",prop:"schedule",label:"更新时间"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.tableData.currPage,"page-sizes":[5,10,20,30],"page-size":e.tableData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.submitLoading,expression:"submitLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{title:e.modalTitle,visible:e.dialogVisible,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.2)",width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose}},[a("formPage",{attrs:{"is-edit":e.isEdit},model:{value:e.dialogInfo,callback:function(t){e.dialogInfo=t},expression:"dialogInfo"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDialogInfo("save")}}},[e._v("保 存")])],1)],1)],1)},n=[],s=(a("e680"),a("aa18"),a("982e"),a("1bc7"),a("fc02"),a("7562")),o=a("8785"),l={name:"Index",data:function(){return{tableData:{data:[],pageSize:5,currPage:1,totalCount:10},modalTitle:"",dialogVisible:!1,dialogInfo:{},contractList:[],currencyList:[],submitLoading:!1,selectList:[],isEdit:!0}},mounted:function(){this.getTableList()},components:{formPage:o["default"]},methods:{getParentId:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(sessionStorage.getItem("code".concat(e))){var n=[];if(i){var o=i.split(",");JSON.parse(sessionStorage.getItem("code".concat(e))).forEach((function(e){o.includes(e.value)&&n.push(e)}))}else n=JSON.parse(sessionStorage.getItem("code".concat(e)));this[t]=n}else s["a"].getCodeByParentId({parentId:e}).then((function(n){var s=[];if(i){var o=i.split(",");n.data.data.options.forEach((function(e){o.includes(e.value)&&s.push(e)}))}else s=n.data.data.options;a[t]=s,sessionStorage.setItem("code".concat(e),JSON.stringify(n.data.data.options))}))},getTableList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s["a"].selectFundSharInfoRZT({pageSize:t,currPage:a,fundId:this.$route.params.fundId}).then((function(t){e.tableData=t.data}))},addInfo:function(){this.modalTitle="新增出资信息",this.dialogVisible=!0},editInfo:function(){var e=this;1!==this.selectList.length?this.$message({offset:150,type:"warning",message:"请选择一条数据编辑"}):(this.modalTitle="编辑出资信息",s["a"].selectFundSharInfoRZTdetail({pkId:this.selectList[0].pkId}).then((function(t){e.dialogInfo=t.data.data})),this.dialogVisible=!0)},delInfo:function(e){var t=this;if(0===e.length)this.$message({offset:150,type:"warning",message:"请至少选择一条数据删除"});else{var a=this.selectList.map((function(e){return e.pkId})).join(",");s["a"].deleteFundSharInfoRZT({pkId:a}).then((function(e){"0"===e.data.status&&"成功"===e.data.msg&&(t.$message({offset:150,type:"success",message:"删除成功"}),t.getTableList(t.tableData.pageSize,1))}))}},handleSizeChange:function(e){this.getTableList(e,1)},handleCurrentChange:function(e){this.getTableList(this.tableData.pageSize,e)},handleSelectionChange:function(e){this.selectList=e},dialogClose:function(){this.dialogInfo={}},submitDialogInfo:function(e){var t=this;this.dialogInfo.fundId=this.$route.params.fundId,void 0!==this.dialogInfo.investorId&&null!==this.dialogInfo.investorId&&""!==this.dialogInfo.raiseAmount?void 0!==this.dialogInfo.inveRole&&null!==this.dialogInfo.inveRole&&""!==this.dialogInfo.inveRole?void 0!==this.dialogInfo.inveNature&&null!==this.dialogInfo.inveNature&&""!==this.dialogInfo.inveNature?void 0!==this.dialogInfo.inveCurrency&&null!==this.dialogInfo.inveCurrency&&""!==String(this.dialogInfo.inveCurrency).trim()?void 0!==this.dialogInfo.inveAmount&&null!==this.dialogInfo.inveAmount&&""!==String(this.dialogInfo.inveAmount).trim()?isNaN(Number(this.dialogInfo.inveAmount))?this.$message({offset:150,type:"warning",message:"请正确填写认缴金额，格式为数字"}):void 0!==this.dialogInfo.rmbIntendedAmount&&null!==this.dialogInfo.rmbIntendedAmount&&""!==String(this.dialogInfo.rmbIntendedAmount).trim()?isNaN(Number(this.dialogInfo.rmbIntendedAmount))?this.$message({offset:150,type:"warning",message:"请正确填写折算为人民币，格式为数字"}):(this.submitLoading=!0,this.dialogInfo.pkId?s["a"].updateFundSharInfoRZT(this.dialogInfo).then((function(e){"0"===e.data.status||"成功"===e.data.msg?(t.$message({offset:150,type:"success",message:"成功编辑"}),t.dialogVisible=!1,t.submitLoading=!1,t.getTableList(t.tableData.pageSize,t.tableData.currPage)):(t.$message({offset:150,type:"warning",message:e.data.msg}),t.submitLoading=!1)})):s["a"].addFundSharInfoRZT(this.dialogInfo).then((function(e){"0"===e.data.status||"成功"===e.data.msg?(t.$message({offset:150,type:"success",message:"成功新增"}),t.dialogVisible=!1,t.submitLoading=!1,t.getTableList(t.tableData.pageSize,t.tableData.currPage)):(t.$message({offset:150,type:"warning",message:e.data.msg}),t.submitLoading=!1)}))):this.$message({offset:150,type:"warning",message:"请填写折算为人民币"}):this.$message({offset:150,type:"warning",message:"请填写认缴金额"}):this.$message({offset:150,type:"warning",message:"请选择认缴金额币种"}):this.$message({offset:150,type:"warning",message:"请选择投资人属性"}):this.$message({offset:150,type:"warning",message:"请选择投资角色"}):this.$message({offset:150,type:"warning",message:"请选择投资人名称"})}}},r=l,c=(a("c4c9"),a("4ac2")),d=Object(c["a"])(r,i,n,!1,null,"3ed1edc6",null);t["default"]=d.exports},"28f4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      投资人名称\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",placeholder:"请输入关键词"},on:{change:e.getProj},model:{value:e.value.investorId,callback:function(t){e.$set(e.value,"investorId",t)},expression:"value.investorId"}},e._l(e.invePersonList,(function(e){return a("el-option",{key:e.investorId,attrs:{label:e.investorName,value:e.investorId}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.investorIdName)+"\n    ")]),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      投资人类型\n    ")]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",placeholder:"请选择"},model:{value:e.value.inveType,callback:function(t){e.$set(e.value,"inveType",t)},expression:"value.inveType"}},e._l(e.inveTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.inveTypeName)+"\n    ")])],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      投资角色\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",placeholder:"请选择"},model:{value:e.value.inveRole,callback:function(t){e.$set(e.value,"inveRole",t)},expression:"value.inveRole"}},e._l(e.inveRoleList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.inveRoleName)+"\n    ")]),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      投资人属性\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",placeholder:"请选择"},model:{value:e.value.inveNature,callback:function(t){e.$set(e.value,"inveNature",t)},expression:"value.inveNature"}},e._l(e.inveNatureList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.inveNatureName)+"\n    ")])],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      认缴金额(万元)\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.value.inveCurrency,callback:function(t){e.$set(e.value,"inveCurrency",t)},expression:"value.inveCurrency"}},e._l(e.currencyList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("el-input",{staticStyle:{width:"100%","margin-left":"4px"},attrs:{maxlength:"10",autocomplete:"off",size:"small"},model:{value:e.value.inveAmount,callback:function(t){e.$set(e.value,"inveAmount",t)},expression:"value.inveAmount"}})],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.inveAmount)+e._s(e.value.inveCurrencyName)+"\n    ")]),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      折算为人民币(万元)\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-input",{attrs:{maxlength:"10",size:"small"},model:{value:e.value.rmbIntendedAmount,callback:function(t){e.$set(e.value,"rmbIntendedAmount",t)},expression:"value.rmbIntendedAmount"}})],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.rmbIntendedAmount)+"\n    ")])],1),e._v(" "),e._e()],1)},n=[],s=(a("aa18"),a("982e"),a("1bc7"),a("fc02"),a("7562")),o={name:"Index",model:{prop:"value",event:"update-value"},props:{value:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!0}},data:function(){return{loading:!1,invePersonList:[],inveTypeList:[{value:"1",label:"个人"},{value:"2",label:"机构"}],inveRoleList:[{value:"1",label:"LP"},{value:"2",label:"GP"},{value:"3",label:"管理公司"},{value:"4",label:"其他"}],inveNatureList:[{value:"1",label:"中央财政"},{value:"2",label:"国家基金"},{value:"3",label:"省级财政"},{value:"4",label:"省级基金"},{value:"5",label:"市县财政"},{value:"6",label:"国有企业"},{value:"7",label:"国有金融机构"},{value:"8",label:"民营企业"},{value:"9",label:"自然人"}],currencyList:[{value:"1",label:"人民币"},{value:"2",label:"美元"},{value:"3",label:"欧元"}]}},mounted:function(){this.getParentId(888,"inveNatureList"),this.getInvePerson()},methods:{getParentId:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(sessionStorage.getItem("code".concat(e))){var n=[];if(i){var o=i.split(",");JSON.parse(sessionStorage.getItem("code".concat(e))).forEach((function(e){o.includes(e.value)&&n.push(e)}))}else n=JSON.parse(sessionStorage.getItem("code".concat(e)));this[t]=n}else s["a"].getCodeByParentId({parentId:e}).then((function(n){var s=[];if(i){var o=i.split(",");n.data.data.options.forEach((function(e){o.includes(e.value)&&s.push(e)}))}else s=n.data.data.options;a[t]=s,sessionStorage.setItem("code".concat(e),JSON.stringify(n.data.data.options))}))},getInvePerson:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s["a"].fundShareInfoSelectInveInfo({pageSize:t,currPage:a,investorType:"",keyword:""}).then((function(t){"成功"===t.data.msg&&(e.invePersonList=t.data.data)}))},searchProjList:function(e){var t=this;e?(this.loading=!0,s["a"].QCCSearchData({keyword:e}).then((function(e){var a=JSON.parse(e.data.data.value);t.loading=!1,null==a.Result||(t.invePersonList=a.Result.map((function(e){return{value:e.CreditCode,label:e.Name}})))}))):this.loading=!1},getProj:function(e){var t=this;this.invePersonList.forEach((function(a){a.investorId===e&&(t.value.investorName=a.investorName)}))}}},l=o,r=(a("504c"),a("4ac2")),c=Object(r["a"])(l,i,n,!1,null,"1a4bbcad",null);t["default"]=c.exports},"2ec9":function(e,t,a){"use strict";a("fd40")},"31b7":function(e,t,a){},3801:function(e,t,a){"use strict";a("4fb0")},"4fb0":function(e,t,a){},"504c":function(e,t,a){"use strict";a("fcab")},5979:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{background:"#fff","padding-top":"20px"}},[a("div",{staticClass:"btnBox"},[e.buttonList.includes("602030401")||e.buttonList.includes("602020401")?a("button",{on:{click:e.addInfo}},[a("i",{staticClass:"iconfont iconjiahao"}),e._v("\n      新增\n    ")]):e._e(),e._v(" "),e.buttonList.includes("602030402")||e.buttonList.includes("602020402")?a("button",{on:{click:function(t){return e.editInfo(e.selectList)}}},[a("i",{staticClass:"iconfont iconbianji"}),e._v("\n      编辑\n    ")]):e._e(),e._v(" "),e.buttonList.includes("602030403")||e.buttonList.includes("602020403")?a("button",{on:{click:function(t){return e.delInfo(e.selectList)}}},[a("i",{staticClass:"iconfont iconbianji"}),e._v("\n      删除\n    ")]):e._e()]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData.data,"header-cell-style":{background:"#FEFAFA",color:"#333",fontWeight:"bold",fontSize:"12px",textAlign:"center"},size:"small",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"230",prop:"investorIdName",label:"投资人名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"110",prop:"inveTypeName",label:"投资人类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"110",prop:"inveRoleName",label:"投资角色"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"110",prop:"gB",label:"股比%"}}),e._v(" "),a("el-table-column",{attrs:{align:"right","min-width":"200",prop:"userName",label:"认缴金额(万元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("money")(t.row.inveAmount))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"110",prop:"inveCurrencyName",label:"币种"}}),e._v(" "),a("el-table-column",{attrs:{align:"right","min-width":"200",prop:"userName",label:"累计出资金额(万元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("money")(t.row.totalFinancial))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"200",prop:"userName",label:"累计出资币种"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.totalFinCurrencyName)+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.tableData.currPage,"page-sizes":[5,10,20,30,40,50,60,70],"page-size":e.tableData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{title:e.modalTitle,visible:e.dialogVisible,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255,255, 0.2)",width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose}},[a("formPage",{attrs:{"is-edit":e.isEdit},model:{value:e.dialogInfo,callback:function(t){e.dialogInfo=t},expression:"dialogInfo"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDialogInfo("save")}}},[e._v("保 存")])],1)],1)],1)},n=[],s=(a("e680"),a("a450"),a("aa18"),a("982e"),a("1bc7"),a("fc02"),a("7562")),o=a("28f4"),l={name:"Index",data:function(){return{tableData:{data:[],pageSize:5,currPage:1,totalCount:10},modalTitle:"",dialogVisible:!1,dialogInfo:{},contractList:[],currencyList:[],submitLoading:!1,selectList:[],isEdit:!0,fullscreenLoading:!1,buttonList:[]}},mounted:function(){this.getTableList(5,1)},components:{formPage:o["default"]},methods:{getParentId:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(sessionStorage.getItem("code".concat(e))){var n=[];if(i){var o=i.split(",");JSON.parse(sessionStorage.getItem("code".concat(e))).forEach((function(e){o.includes(e.value)&&n.push(e)}))}else n=JSON.parse(sessionStorage.getItem("code".concat(e)));this[t]=n}else s["a"].getCodeByParentId({parentId:e}).then((function(n){var s=[];if(i){var o=i.split(",");n.data.data.options.forEach((function(e){o.includes(e.value)&&s.push(e)}))}else s=n.data.data.options;a[t]=s,sessionStorage.setItem("code".concat(e),JSON.stringify(n.data.data.options))}))},setButtonList:function(){var e=this;this.buttonList=[],this.$route.meta.buttons.forEach((function(t){"股权结构"===t.name&&t.buttons.forEach((function(t){"602020401"===t.code&&e.buttonList.push(t.code),"602020402"===t.code&&e.buttonList.push(t.code),"602020403"===t.code&&e.buttonList.push(t.code),"602030401"===t.code&&e.buttonList.push(t.code),"602030402"===t.code&&e.buttonList.push(t.code),"602030403"===t.code&&e.buttonList.push(t.code)}))}))},getTableList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s["a"].selectFundSharInfoRZT({pageSize:t,currPage:a,fundId:this.$route.params.fundId}).then((function(t){e.tableData=t.data}))},addInfo:function(){this.modalTitle="新增股权结构",this.dialogVisible=!0},editInfo:function(){var e=this;1!==this.selectList.length?this.$message({offset:150,type:"warning",message:"请选择一条数据编辑"}):(this.modalTitle="编辑股权结构",s["a"].selectFundSharInfoRZTdetail({pkId:this.selectList[0].pkId}).then((function(t){e.dialogInfo=t.data.data})),this.dialogVisible=!0)},delInfo:function(e){var t=this;if(0===e.length)this.$message({offset:150,type:"warning",message:"请至少选择一条数据删除"});else{var a=this.selectList.map((function(e){return e.pkId})).join(",");this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s["a"].deleteFundSharInfoRZT({pkId:a}).then((function(e){"0"===e.data.status&&"成功"===e.data.msg?(t.$message({offset:150,type:"success",message:"删除成功"}),t.getTableList(t.tableData.pageSize,1)):t.$message({offset:150,type:"warning",message:e.data.msg})}))}))}},handleSizeChange:function(e){this.getTableList(e,1)},handleCurrentChange:function(e){this.getTableList(this.tableData.pageSize,e)},handleSelectionChange:function(e){this.selectList=e},dialogClose:function(){this.dialogInfo={}},submitDialogInfo:function(e){var t=this;if("submit"===e);else if("save"===e){if(void 0===this.dialogInfo.investorId||null===this.dialogInfo.investorId||""===this.dialogInfo.raiseAmount)return void this.$message({offset:150,type:"warning",message:"请选择投资人名称"});if(void 0===this.dialogInfo.inveRole||null===this.dialogInfo.inveRole||""===this.dialogInfo.inveRole)return void this.$message({offset:150,type:"warning",message:"请选择投资角色"});if(void 0===this.dialogInfo.inveNature||null===this.dialogInfo.inveNature||""===this.dialogInfo.inveNature)return void this.$message({offset:150,type:"warning",message:"请选择投资属性"});if(void 0===this.dialogInfo.inveCurrency||null===this.dialogInfo.inveCurrency||""===String(this.dialogInfo.inveCurrency).trim())return void this.$message({offset:150,type:"warning",message:"请选择认缴金额币种"});if(void 0===this.dialogInfo.inveAmount||null===this.dialogInfo.inveAmount||""===String(this.dialogInfo.inveAmount).trim())return void this.$message({offset:150,type:"warning",message:"请填写认缴金额"});if(isNaN(Number(this.dialogInfo.inveAmount)))return void this.$message({offset:150,type:"warning",message:"请正确填写认缴金额，格式为数字"});if(void 0===this.dialogInfo.rmbIntendedAmount||null===this.dialogInfo.rmbIntendedAmount||""===String(this.dialogInfo.rmbIntendedAmount).trim())return void this.$message({offset:150,type:"warning",message:"请填写折算为人民币"});if(isNaN(Number(this.dialogInfo.rmbIntendedAmount)))return void this.$message({offset:150,type:"warning",message:"请正确填写折算为人民币，格式为数字"})}this.dialogInfo.fundId=this.$route.params.fundId,this.fullscreenLoading=!0,this.dialogInfo.pkId?s["a"].updateFundSharInfoRZT(this.dialogInfo).then((function(e){"0"===e.data.status&&"成功"===e.data.msg?(t.$message({offset:150,type:"success",message:"成功编辑"}),t.dialogVisible=!1,t.getTableList(t.tableData.pageSize,t.tableData.currPage),t.fullscreenLoading=!1):(t.$message({offset:150,type:"warning",message:e.data.msg}),t.fullscreenLoading=!1)})):s["a"].addFundSharInfoRZT(this.dialogInfo).then((function(e){"0"===e.data.status&&"成功"===e.data.msg?(t.$message({offset:150,type:"success",message:"成功新增"}),t.dialogVisible=!1,t.fullscreenLoading=!1,t.getTableList(t.tableData.pageSize,t.tableData.currPage)):(t.$message({offset:150,type:"warning",message:e.data.msg}),t.fullscreenLoading=!1)}))}}},r=l,c=(a("2ec9"),a("4ac2")),d=Object(c["a"])(r,i,n,!1,null,"58f7efa5",null);t["default"]=d.exports},"66a5":function(e,t,a){},"6b9e":function(e,t,a){},"79cd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"20px"}},[e.buttonList.includes("602030101")||e.buttonList.includes("602010101")||e.buttonList.includes("602020101")?a("div",{staticClass:"btnBox"},[e.isEdit?e._e():a("button",{on:{click:e.edit}},[e._v("编辑")]),e._v(" "),e.isEdit?a("button",{on:{click:e.save}},[e._v("保存")]):e._e(),e._v(" "),e.isEdit?a("button",{on:{click:e.cancel}},[e._v("取消编辑")]):e._e()]):e._e(),e._v(" "),a("detail",{ref:"detail",attrs:{"is-edit":e.isEdit,detail:!0,type:"daiguanjijin"},model:{value:e.dialogInfo,callback:function(t){e.dialogInfo=t},expression:"dialogInfo"}})],1)},n=[],s=(a("e680"),a("fc02"),a("a450"),a("1bc7"),a("ab18")),o=a("7562"),l={name:"Index",components:{detail:s["default"]},props:{fundInfo:{type:Object,default:function(){return{}}}},data:function(){return{dialogInfo:{},isEdit:!1,buttonList:[]}},watch:{fundInfo:function(e){this.dialogInfo=e}},mounted:function(){},methods:{setButtonList:function(){var e=this;this.buttonList=[],this.$route.meta.buttons.forEach((function(t){"基金基本信息"===t.name&&t.buttons.forEach((function(t){"602010101"===t.code&&e.buttonList.push(t.code),"602030101"===t.code&&e.buttonList.push(t.code),"602020101"===t.code&&e.buttonList.push(t.code)})),"基本信息"===t.name&&t.buttons.forEach((function(t){"602030101"===t.code&&e.buttonList.push(t.code),"602020101"===t.code&&e.buttonList.push(t.code)}))}))},getFundDetail:function(){var e=this;o["a"].fundInfoDetail({fundId:this.$route.params.fundId,projId:this.$route.params.projId}).then((function(t){var a=t.data.data.model;null===a.gp||a.gp.split(",");a.projAppInfo=a.projAppInfo?a.projAppInfo:{},a.entBaseInfoModel=a.entBaseInfoModel?a.entBaseInfoModel:{},a.fundInveDescModel=a.fundInveDescModel?a.fundInveDescModel:{},e.dialogInfo={registerStatus:a.registerStatus,isZhuce:a.registerStatus,createCode:a.fundName,fundName:a.fundName,isRecord:a.isRecord,recordCode:a.recordCode,shortName:a.shortName,fundCategoryName:a.fundCategoryName,fundCategory:a.fundCategory,inveId:a.projInfo.inveId,inveName:a.projInfo.inveName,fundStruct:a.fundStruct,fundStructName:a.fundStructName,platProp:a.platProp,platPropName:a.platPropName,subPlatProp:a.subPlatProp,subPlatPropName:a.subPlatPropName,isExcept:a.isExcept,socode:a.entBaseInfoModel.creditCode,address:a.entBaseInfoModel.addressDetails,date:a.entBaseInfoModel.termStart,gpIdList:null===a.gp?[]:a.gp.split(","),gp:a.gp,gpId:a.gpId,closeDt:a.closeDt,mcName:a.mcName,mcId:a.mcId,fundGenre:a.fundGenre,fundGenreName:a.fundGenreName,contact:a.contact,phoneNo:a.phoneNo,email:a.email,manDep:a.manDep,manDepName:a.manDepName,appDep:a.appDep,appDepName:a.appDepName,isExit:a.isExit,financeAmount:a.financeAmount,govFundSrc:a.govFundSrc,govFundSrcName:a.govFundSrcName,inveType:a.inveType,inveTypeName:a.inveTypeName,isLead:a.isLead,planAmount:a.planAmount,isFit:a.isFit,currentAmount:a.currentAmount,raiseAmount:a.raiseAmount,inveCurrentAmount:a.projAppInfo.inveCurrentAmount,inveRaiseAmount:a.projAppInfo.inveRaiseAmount,inveStartDate:a.fundInveDescModel.inveStartDate,inveEndDate:a.fundInveDescModel.inveEndDate,mgtOrPaid:a.fundInveDescModel.mgtOrPaid,inveFeeRate:a.fundInveDescModel.inveFeeRate,mgtFeeRate:a.fundInveDescModel.mgtFeeRate,paybackFeeRate:a.fundInveDescModel.paybackFeeRate,mgtFeeDesc:a.fundInveDescModel.mgtFeeDesc,durationPeriod:a.fundInveDescModel.durationPeriod,invePeriod:a.fundInveDescModel.invePeriod,isRollOver:a.fundInveDescModel.isRollOver,rollOver:a.fundInveDescModel.rollOver,paybackPeriod:a.fundInveDescModel.paybackPeriod,isPaybackOver:a.fundInveDescModel.isPaybackOver,paybackOver:a.fundInveDescModel.paybackOver,durationDesc:a.fundInveDescModel.durationDesc,hurdleRate:a.fundInveDescModel.hurdleRate,inveStrategy:a.fundInveDescModel.inveStrategy,mcFee:a.fundInveDescModel.mcFee,performanceFee:a.fundInveDescModel.performanceFee,incomeDistDesc:a.fundInveDescModel.incomeDistDesc,investmentStrategy:a.fundInveDescModel.investmentStrategy,groupId:a.groupId,inveLimit:a.inveLimit,basis:a.basis,descFile:a.descFile,socialCode:a.entBaseInfoModel.creditCode,addressDetails:a.entBaseInfoModel.addressDetails,startDate:a.entBaseInfoModel.startDate}}))},save:function(){var e=this;if(""!==this.dialogInfo.isRecord&&void 0!==this.dialogInfo.isRecord&&null!==this.dialogInfo.isRecord)if("2"!==this.dialogInfo.isRecord||""!==this.dialogInfo.recordCode&&void 0!==this.dialogInfo.recordCode&&null!==this.dialogInfo.recordCode)if(""!==this.dialogInfo.fundName&&void 0!==this.dialogInfo.fundName&&null!==this.dialogInfo.fundName)if(""!==this.dialogInfo.fundStruct&&void 0!==this.dialogInfo.fundStruct&&null!==this.dialogInfo.fundStruct)if(""!==this.dialogInfo.platProp&&void 0!==this.dialogInfo.platProp&&null!==this.dialogInfo.platProp)if("1"!==this.dialogInfo.platProp&&"3"!==this.dialogInfo.platProp||""!==this.dialogInfo.subPlatProp&&void 0!==this.dialogInfo.subPlatProp&&null!==this.dialogInfo.subPlatProp)if("2"!==this.dialogInfo.platProp||""!==this.dialogInfo.isExcept&&void 0!==this.dialogInfo.isExcept&&null!==this.dialogInfo.isExcept)if(""!==this.dialogInfo.mcId&&void 0!==this.dialogInfo.mcId&&null!==this.dialogInfo.mcId)if("1"!==this.dialogInfo.isDirect||""!==this.dialogInfo.fundsType&&void 0!==this.dialogInfo.fundsType&&null!==this.dialogInfo.fundsType)if(void 0!==this.dialogInfo.financeAmount&&null!==this.dialogInfo.financeAmount&&""!==String(this.dialogInfo.financeAmount).trim()&&isNaN(Number(this.dialogInfo.financeAmount)))this.$message({offset:150,type:"warning",message:"请正确填写省级财政出资金额，格式为数字"});else if(void 0!==this.dialogInfo.planAmount&&null!==this.dialogInfo.planAmount&&""!==String(this.dialogInfo.planAmount).trim()&&isNaN(Number(this.dialogInfo.planAmount)))this.$message({offset:150,type:"warning",message:"请正确填写基金目标规模，格式为数字"});else if(void 0!==this.dialogInfo.currentAmount&&null!==this.dialogInfo.currentAmount&&""!==String(this.dialogInfo.currentAmount).trim())if(isNaN(Number(this.dialogInfo.currentAmount)))this.$message({offset:150,type:"warning",message:"请正确填写基金认缴总规模，格式为数字"});else if(void 0!==this.dialogInfo.raiseAmount&&null!==this.dialogInfo.raiseAmount&&""!==String(this.dialogInfo.raiseAmount).trim()&&isNaN(Number(this.dialogInfo.raiseAmount)))this.$message({offset:150,type:"warning",message:"请正确填写基金实缴规模，格式为数字"});else if(void 0!==this.dialogInfo.inveRaiseAmount&&null!==this.dialogInfo.inveRaiseAmount&&""!==String(this.dialogInfo.inveRaiseAmount).trim()&&isNaN(Number(this.dialogInfo.inveRaiseAmount)))this.$message({offset:150,type:"warning",message:"请正确填写其中：基金实缴规模，格式为数字"});else if(Date.parse(this.dialogInfo.inveStartDate)>Date.parse(this.dialogInfo.inveEndDate))this.$message({offset:150,type:"warning",message:"投资期起算日不得晚于投资期截止日"});else if(void 0!==this.dialogInfo.inveCurrentAmount&&null!==this.dialogInfo.inveCurrentAmount&&""!==String(this.dialogInfo.inveCurrentAmount).trim())if(isNaN(Number(this.dialogInfo.inveCurrentAmount)))this.$message({offset:150,type:"warning",message:"请正确填写其中:基金认缴总规模，格式为数字"});else if(void 0!==this.dialogInfo.inveFeeRate&&null!==this.dialogInfo.inveFeeRate&&""!==String(this.dialogInfo.inveFeeRate).trim()&&isNaN(Number(this.dialogInfo.inveFeeRate)))this.$message({offset:150,type:"warning",message:"请正确填写投资期，格式为数字"});else if(void 0!==this.dialogInfo.mgtFeeRate&&null!==this.dialogInfo.mgtFeeRate&&""!==String(this.dialogInfo.mgtFeeRate).trim()&&isNaN(Number(this.dialogInfo.mgtFeeRate)))this.$message({offset:150,type:"warning",message:"请正确填写延长期，格式为数字"});else if(void 0!==this.dialogInfo.paybackFeeRate&&null!==this.dialogInfo.paybackFeeRate&&""!==String(this.dialogInfo.paybackFeeRate).trim()&&isNaN(Number(this.dialogInfo.paybackFeeRate)))this.$message({offset:150,type:"warning",message:"请正确填写退出期，格式为数字"});else if(void 0!==this.dialogInfo.durationPeriod&&null!==this.dialogInfo.durationPeriod&&""!==String(this.dialogInfo.durationPeriod).trim()&&isNaN(Number(this.dialogInfo.durationPeriod)))this.$message({offset:150,type:"warning",message:"请正确填写存续期，格式为数字"});else if(void 0!==this.dialogInfo.invePeriod&&null!==this.dialogInfo.invePeriod&&""!==String(this.dialogInfo.invePeriod).trim()&&isNaN(Number(this.dialogInfo.invePeriod)))this.$message({offset:150,type:"warning",message:"请正确填写投资期，格式为数字"});else if(void 0!==this.dialogInfo.rollOver&&null!==this.dialogInfo.rollOver&&""!==String(this.dialogInfo.rollOver).trim()&&isNaN(Number(this.dialogInfo.rollOver)))this.$message({offset:150,type:"warning",message:"请正确填写投资期延长年数，格式为数字"});else if(void 0!==this.dialogInfo.paybackPeriod&&null!==this.dialogInfo.paybackPeriod&&""!==String(this.dialogInfo.paybackPeriod).trim()&&isNaN(Number(this.dialogInfo.paybackPeriod)))this.$message({offset:150,type:"warning",message:"请正确填写退出期，格式为数字"});else if(void 0!==this.dialogInfo.paybackOver&&null!==this.dialogInfo.paybackOver&&""!==String(this.dialogInfo.paybackOver).trim()&&isNaN(Number(this.dialogInfo.paybackOver)))this.$message({offset:150,type:"warning",message:"请正确填写退出期延长年数，格式为数字"});else if(""!==this.dialogInfo.mgtFeeDesc&&void 0!==this.dialogInfo.mgtFeeDesc&&null!==this.dialogInfo.mgtFeeDesc)if(""!==this.dialogInfo.durationDesc&&void 0!==this.dialogInfo.durationDesc&&null!==this.dialogInfo.durationDesc)if(""!==this.dialogInfo.incomeDistDesc&&void 0!==this.dialogInfo.incomeDistDesc&&null!==this.dialogInfo.incomeDistDesc)if(""!==this.dialogInfo.inveStrategy&&void 0!==this.dialogInfo.inveStrategy&&null!==this.dialogInfo.inveStrategy){if(void 0!==this.dialogInfo.email&&null!==this.dialogInfo.email&&""!==String(this.dialogInfo.email).trim()){if(!1===this.checkEmail(this.dialogInfo.email))return void this.$message({offset:150,type:"warning",message:"请填写正确的邮箱格式"})}else if(""===String(this.dialogInfo.email).trim())return void this.$message({offset:150,type:"warning",message:"请勿填写空格"});this.dialogInfo.fundId=this.$route.params.fundId,this.dialogInfo.projId=this.$route.params.projId,"04"!==this.dialogInfo.fundCategory&&(this.dialogInfo.parentId=""),o["a"].saveFundFof(this.dialogInfo).then((function(t){"0"===t.data.status&&"成功"===t.data.msg?(e.$message({offset:150,type:"success",message:"修改成功"}),e.isEdit=!1,e.$emit("refreshData")):e.$message({offset:150,type:"warning",message:t.data.msg})}))}else this.$message({offset:150,type:"warning",message:"请填写投资方向及其目标"});else this.$message({offset:150,type:"warning",message:"请填写收益分配方式"});else this.$message({offset:150,type:"warning",message:"请填写存续期介绍"});else this.$message({offset:150,type:"warning",message:"请填写管理费提取方式"});else this.$message({offset:150,type:"warning",message:"请填写其中:本基金认缴规模"});else this.$message({offset:150,type:"warning",message:"请填写基金认缴总规模"});else this.$message({offset:150,type:"warning",message:"请选择基金分类"});else this.$message({offset:150,type:"warning",message:"请选择基金管理人"});else this.$message({offset:150,type:"warning",message:"请选择是否为国家专项子基金"});else this.$message({offset:150,type:"warning",message:"请选择二级基金类型"});else this.$message({offset:150,type:"warning",message:"请选择基金类型"});else this.$message({offset:150,type:"warning",message:"请选择基金形式"});else this.$message({offset:150,type:"warning",message:"请输入/选择基金名称"});else this.$message({offset:150,type:"warning",message:"请填写备案号"});else this.$message({offset:150,type:"warning",message:"请选择基金备案状态"})},checkEmail:function(e){var t=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return!!t.test(e)},edit:function(){this.isEdit=!0,this.$refs.detail.selectSubPlatProp(this.dialogInfo.platProp)},cancel:function(){this.isEdit=!1,this.$emit("refreshData")}}},r=l,c=a("4ac2"),d=Object(c["a"])(r,i,n,!1,null,"739ec59e",null);t["default"]=d.exports},8785:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      投资人名称\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",placeholder:"请输入关键词"},on:{change:e.getProj},model:{value:e.value.investorId,callback:function(t){e.$set(e.value,"investorId",t)},expression:"value.investorId"}},e._l(e.invePersonList,(function(e){return a("el-option",{key:e.investorId,attrs:{label:e.investorName,value:e.investorId}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.investorIdName)+"\n    ")]),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      投资人类型\n    ")]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",placeholder:"请选择"},model:{value:e.value.inveType,callback:function(t){e.$set(e.value,"inveType",t)},expression:"value.inveType"}},e._l(e.inveTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.inveTypeName)+"\n    ")])],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      投资角色\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",placeholder:"请选择"},model:{value:e.value.inveRole,callback:function(t){e.$set(e.value,"inveRole",t)},expression:"value.inveRole"}},e._l(e.inveRoleList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.inveRoleName)+"\n    ")]),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      投资人属性\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",placeholder:"请选择"},model:{value:e.value.inveNature,callback:function(t){e.$set(e.value,"inveNature",t)},expression:"value.inveNature"}},e._l(e.inveNatureList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.inveNatureName)+"\n    ")])],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      认缴金额(万元)\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.value.inveCurrency,callback:function(t){e.$set(e.value,"inveCurrency",t)},expression:"value.inveCurrency"}},e._l(e.currencyList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("el-input",{staticStyle:{width:"100%","margin-left":"4px"},attrs:{maxlength:"10",autocomplete:"off",size:"small"},model:{value:e.value.inveAmount,callback:function(t){e.$set(e.value,"inveAmount",t)},expression:"value.inveAmount"}})],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.inveAmount)+e._s(e.value.inveCurrencyName)+"\n    ")]),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      折算为人民币(万元)\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-input",{attrs:{maxlength:"10",size:"small"},model:{value:e.value.rmbIntendedAmount,callback:function(t){e.$set(e.value,"rmbIntendedAmount",t)},expression:"value.rmbIntendedAmount"}})],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v("\n      "+e._s(e.value.rmbIntendedAmount)+"\n    ")])],1),e._v(" "),e._e()],1)},n=[],s=(a("aa18"),a("982e"),a("1bc7"),a("fc02"),a("7562")),o={name:"Index",model:{prop:"value",event:"update-value"},props:{value:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!0}},data:function(){return{loading:!1,invePersonList:[],inveTypeList:[{value:"1",label:"个人"},{value:"2",label:"机构"}],inveRoleList:[{value:"1",label:"LP"},{value:"2",label:"GP"},{value:"3",label:"管理公司"},{value:"4",label:"其他"}],inveNatureList:[{value:"1",label:"中央财政"},{value:"2",label:"国家基金"},{value:"3",label:"省级财政"},{value:"4",label:"省级基金"},{value:"5",label:"市县财政"},{value:"6",label:"国有企业"},{value:"7",label:"国有金融机构"},{value:"8",label:"民营企业"},{value:"9",label:"自然人"}],currencyList:[{value:"1",label:"人民币"},{value:"2",label:"美元"},{value:"3",label:"欧元"}]}},mounted:function(){this.getParentId(888,"inveNatureList"),this.getInvePerson()},methods:{getParentId:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(sessionStorage.getItem("code".concat(e))){var n=[];if(i){var o=i.split(",");JSON.parse(sessionStorage.getItem("code".concat(e))).forEach((function(e){o.includes(e.value)&&n.push(e)}))}else n=JSON.parse(sessionStorage.getItem("code".concat(e)));this[t]=n}else s["a"].getCodeByParentId({parentId:e}).then((function(n){var s=[];if(i){var o=i.split(",");n.data.data.options.forEach((function(e){o.includes(e.value)&&s.push(e)}))}else s=n.data.data.options;a[t]=s,sessionStorage.setItem("code".concat(e),JSON.stringify(n.data.data.options))}))},getInvePerson:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s["a"].fundShareInfoSelectInveInfo({pageSize:t,currPage:a,investorType:"",keyword:""}).then((function(t){"成功"===t.data.msg&&(e.invePersonList=t.data.data)}))},searchProjList:function(e){var t=this;e?(this.loading=!0,s["a"].QCCSearchData({keyword:e}).then((function(e){var a=JSON.parse(e.data.data.value);t.loading=!1,null==a.Result||(t.invePersonList=a.Result.map((function(e){return{value:e.CreditCode,label:e.Name}})))}))):this.loading=!1},getProj:function(e){var t=this;this.invePersonList.forEach((function(a){a.investorId===e&&(t.value.investorName=a.investorName)}))}}},l=o,r=(a("050c"),a("4ac2")),c=Object(r["a"])(l,i,n,!1,null,"c5fe95ee",null);t["default"]=c.exports},a2c0:function(e,t,a){"use strict";a("01a0")},c4c9:function(e,t,a){"use strict";a("6b9e")},e70c:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"projBox dueDiligence"},[a("div",{staticClass:"projPartItem"},[a("div",{ref:"proj500300",staticClass:"itemTitle notes_text",attrs:{"data-id":"500300"}},[e._v("\n        基金基本信息\n      ")]),e._v(" "),a("fundDetail",{ref:"fundDetail",attrs:{"fund-info":e.dialogInfo,"is-edit":!1,detail:!1},on:{refreshData:e.refreshData}})],1),e._v(" "),a("div",{staticClass:"projPartItem"},[a("div",{ref:"proj500301",staticClass:"itemTitle notes_text",attrs:{"data-id":"500301"}},[e._v("\n        历史沿革及增值服务\n      ")]),e._v(" "),a("historical",{ref:"historical"})],1),e._v(" "),a("div",{staticClass:"projPartItem"},[a("div",{ref:"proj500302",staticClass:"itemTitle notes_text",attrs:{"data-id":"500302"}},[e._v("\n        定期报告\n      ")]),e._v(" "),a("periodicRep",{ref:"periodicRep"})],1),e._v(" "),a("div",{staticClass:"projPartItem"},[a("div",{ref:"proj500303",staticClass:"itemTitle notes_text",attrs:{"data-id":"500303"}},[e._v("\n        股权结构\n      ")]),e._v(" "),a("ownershipStructure",{ref:"ownershipStructure"})],1),e._v(" "),a("div",{staticClass:"projPartItem"},[a("div",{ref:"proj500305",staticClass:"itemTitle notes_text",attrs:{"data-id":"500305"}},[e._v("\n        文件库\n      ")]),e._v(" "),a("wheelsTree",{staticStyle:{"margin-top":"20px"},attrs:{itemType:"12",url_id:e.$route.params.fundId,addFile:e.buttonList.includes("602030501")}})],1),e._v(" "),a("div",{ref:"lys",staticClass:"left fixed-asider-menu",attrs:{id:"left_y_scroll"}},[a("div",[a("div",{staticClass:"side_nav",attrs:{id:"chap_nav"}},e._l(e.menuList,(function(t){return a("ul",{key:t.id,staticClass:"side_nav_level1"},[a("li",{staticClass:"first_li",attrs:{id:"lNav"+t.id}},[t.childList.length>0?a("span",{staticClass:"first_li_title"},[e._v(e._s(t.name))]):a("span",{staticClass:"first_li_title first_li_title_cur",class:{li_a_red:e.isshow==t.id},on:{click:function(a){return e.jump(t.id)}}},[e._v(e._s(t.name))]),e._v(" "),a("ul",{staticClass:"side_nav_level2"},e._l(t.childList,(function(t){return a("li",{key:t.id,attrs:{id:"lNav"+t.id}},[a("a",{class:{a_red:e.isshow==t.id},on:{click:function(a){return e.jump(t.id)}}},[e._v(e._s(t.name))])])})),0)])])})),0)])])])},n=[],s=(a("fc02"),a("a450"),a("1bc7"),a("79cd")),o=a("f36d"),l=a("f8c9"),r=a("5979"),c=a("7562"),d=a("1ff2"),u=a("55a2"),f={name:"Daiguanjijin",components:{fundDetail:s["default"],historical:o["default"],periodicRep:l["default"],ownershipStructure:r["default"],inveInfo:d["default"],wheelsTree:u["a"]},data:function(){return{projInfo:"",menuList:[{childList:[],fatherid:5003,id:500300,name:"基金基金本息",height:""},{childList:[],fatherid:5003,id:500301,name:"历史沿革及增值服务",height:""},{childList:[],fatherid:5003,id:500302,name:"定期报告",height:""},{childList:[],fatherid:5003,id:500303,name:"股权结构",height:""},{childList:[],fatherid:5003,id:500305,name:"文件库",height:""}],isshow:500300,title:"",dialogInfo:{labelId:[],generalManager:{memberName:""}},projList:[],buttonList:[]}},watch:{},mounted:function(){var e=this;this.getInfoDetail(),this.setTagsViewTitle(),window.addEventListener("scroll",this.menu,!0),c["a"].projectFuncPermissionList({fatherid:"60203"}).then((function(t){0!==t.data.data.length&&(e.$route.meta.buttons=t.data.data,e.$refs.fundDetail.setButtonList(),e.$refs.historical.setButtonList(),e.$refs.periodicRep.setButtonList(),e.$refs.ownershipStructure.setButtonList(),e.buttonList=[],e.$route.meta.buttons.forEach((function(t){"文件库"===t.name&&t.buttons.forEach((function(t){"602030501"===t.code&&e.buttonList.push(t.code)}))})))}))},methods:{setTagsViewTitle:function(){this.title=sessionStorage.getItem("daiguanjijinFund".concat(this.$route.params.fundId))?sessionStorage.getItem("daiguanjijinFund".concat(this.$route.params.fundId)):"母基金详情",this.tempRoute=Object.assign({},this.$route);var e=Object.assign({},this.tempRoute,{title:"".concat(this.title)});this.$store.dispatch("tagsView/updateVisitedView",e)},menu:function(){var e=this;if("daiguanjijinDetail"===this.$route.name){var t=document.documentElement.scrollTop+40;this.menuList.forEach((function(t){t.height=e.$refs["proj"+t.id].offsetTop})),this.menuList.forEach((function(a,i){t>=a.height&&t<=e.menuList[i+1].height&&(e.isshow=a.id)}))}},jump:function(e){this.isshow=e;for(var t=document.querySelectorAll(".notes_text"),a=null,i=0;i<t.length;i++){var n=t[i].getAttribute("data-id");n==e&&(a=i)}var s=t[a].offsetTop-40,o=document.documentElement.scrollTop,l=s/50;if(s>o)c();else{var r=o-s;l=r/50,d()}function c(){o<s?(o+=l,document.documentElement.scrollTop=o,setTimeout(c,10)):document.documentElement.scrollTop=s}function d(){o>s?(o-=l,document.documentElement.scrollTop=o,setTimeout(d,10)):document.documentElement.scrollTop=s}},getInfoDetail:function(){var e=this;c["a"].fundInfoDetail({fundId:this.$route.params.fundId,projId:this.$route.params.projId}).then((function(t){var a=t.data.data.model;a.projAppInfo=a.projAppInfo?a.projAppInfo:{},a.entBaseInfoModel=a.entBaseInfoModel?a.entBaseInfoModel:{},a.fundInveDescModel=a.fundInveDescModel?a.fundInveDescModel:{},e.dialogInfo={registerStatus:a.registerStatus,isZhuce:a.registerStatus,parentId:a.parentId,createCode:a.fundName,fundName:a.fundName,isRecord:a.isRecord,inveName:a.parentName,recordCode:a.recordCode,shortName:a.shortName,fundStruct:a.fundStruct,fundStructName:a.fundStructName,isDirect:a.isDirect,platProp:a.platProp,platPropName:a.platPropName,subPlatProp:a.subPlatProp,subPlatPropName:a.subPlatPropName,isExcept:a.isExcept,socode:a.entBaseInfoModel.creditCode,address:a.entBaseInfoModel.addressDetails,date:a.entBaseInfoModel.startDate,gpIdList:null===a.gp?[]:a.gp.split(","),gp:a.gp,gpId:a.gpId,closeDt:a.closeDt,mcName:a.mcName,mcId:a.mcId,fundGenre:a.fundGenre,fundsType:a.fundsType,fundsTypeName:a.fundsTypeName,fundGenreName:a.fundGenreName,contact:a.contact,phoneNo:a.phoneNo,email:a.email,manDep:a.manDep,manDepName:a.manDepName,appDep:a.appDep,appDepName:a.appDepName,fundCategory:a.fundCategory,fundCategoryName:a.fundCategoryName,isExit:a.isExit,financeAmount:a.financeAmount,govFundSrc:a.govFundSrc,govFundSrcName:a.govFundSrcName,inveType:a.inveType,inveTypeName:a.inveTypeName,isLead:a.isLead,planAmount:a.planAmount,isFit:a.isFit,currentAmount:a.currentAmount,raiseAmount:a.raiseAmount,inveCurrentAmount:a.inveCurrentAmount,currentCurrency:a.currentCurrency,currentCurrencyName:a.currentCurrencyName,fundCode:a.fundCode,oldSubPlatProp:a.oldSubPlatProp,inveRaiseAmount:a.inveRaiseAmount,inveStartDate:a.fundInveDescModel.inveStartDate,inveEndDate:a.fundInveDescModel.inveEndDate,mgtOrPaid:a.fundInveDescModel.mgtOrPaid,inveFeeRate:a.fundInveDescModel.inveFeeRate,mgtFeeRate:a.fundInveDescModel.mgtFeeRate,paybackFeeRate:a.fundInveDescModel.paybackFeeRate,mgtFeeDesc:a.fundInveDescModel.mgtFeeDesc,durationPeriod:a.fundInveDescModel.durationPeriod,invePeriod:a.fundInveDescModel.invePeriod,isRollOver:a.fundInveDescModel.isRollOver,rollOver:a.fundInveDescModel.rollOver,paybackPeriod:a.fundInveDescModel.paybackPeriod,isPaybackOver:a.fundInveDescModel.isPaybackOver,paybackOver:a.fundInveDescModel.paybackOver,durationDesc:a.fundInveDescModel.durationDesc,hurdleRate:a.fundInveDescModel.hurdleRate,inveStrategy:a.fundInveDescModel.inveStrategy,mcFee:a.fundInveDescModel.mcFee,performanceFee:a.fundInveDescModel.performanceFee,incomeDistDesc:a.fundInveDescModel.incomeDistDesc,investmentStrategy:a.fundInveDescModel.investmentStrategy,groupId:a.groupId,inveLimit:a.inveLimit,basis:a.basis,descFile:a.descFile,socialCode:a.entBaseInfoModel.creditCode,addressDetails:a.entBaseInfoModel.addressDetails,startDate:a.entBaseInfoModel.startDate}}))},loadSroll:function(){this.menuList,this.menuList.length;for(var e=document.querySelectorAll(".notes_text"),t=0;t<e.length;t++)if(this.scroll>=e[t].offsetTop){var a=e[t].getAttribute("data-id");this.UnderTitle={id:a,isshow:!0},this.isshow=a,this.flagId=a;var i=document.getElementById("lNav"+a).offsetTop+70;this.$refs.lys.scrollTop=i>414?i:0}},getFuncPermissionList:function(e){var t=this;projectFuncPermissionList(e).then((function(e){t.menuList=e.data}))},refreshData:function(){this.getInfoDetail()}}},p=f,g=(a("1fc9"),a("4ac2")),v=Object(g["a"])(p,i,n,!1,null,"5d1d6a78",null);t["default"]=v.exports},f36d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tableContent",staticStyle:{padding:"0px"}},[e.buttonList.includes("602020201")||e.buttonList.includes("602030201")?a("div",{staticClass:"btnBox"},[e.isEdit?e._e():a("button",{on:{click:e.editInfo}},[e._v("编辑")]),e._v(" "),e.isEdit?a("button",{on:{click:e.saveInfo}},[e._v("保存")]):e._e(),e._v(" "),e.isEdit?a("button",{on:{click:e.cancelInfo}},[e._v("取消")]):e._e()]):e._e(),e._v(" "),a("div",{staticClass:"dialog-item"},[a("div",{staticClass:"dialog-item-title"},[e._v("历史沿革")]),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{align:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n        附件说明\n      ")]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:20}},[a("el-input",{attrs:{rows:4,size:"small",type:"textarea",maxlength:"1000"},model:{value:e.dialogInfo.fundDesc,callback:function(t){e.$set(e.dialogInfo,"fundDesc",t)},expression:"dialogInfo.fundDesc"}})],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:20}},[a("div",[e._v("\n          "+e._s(e.dialogInfo.fundDesc)+"\n        ")])])],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{align:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n        附件\n      ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:20}},[a("upLoad",{attrs:{"hidden-upload":!e.isEdit,"context-path":e.url.upApi},model:{value:e.dialogInfo.fundDescFile,callback:function(t){e.$set(e.dialogInfo,"fundDescFile",t)},expression:"dialogInfo.fundDescFile"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-item"},[a("div",{staticClass:"dialog-item-title"},[e._v("增值服务")]),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{align:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n        附件说明\n      ")]),e._v(" "),e.isEdit?a("el-col",{staticClass:"col-content",attrs:{span:20}},[a("el-input",{attrs:{rows:4,size:"small",type:"textarea",maxlength:"1000"},model:{value:e.dialogInfo.vaService,callback:function(t){e.$set(e.dialogInfo,"vaService",t)},expression:"dialogInfo.vaService"}})],1):e._e(),e._v(" "),e.isEdit?e._e():a("el-col",{staticClass:"col-content",attrs:{span:20}},[a("div",[e._v("\n          "+e._s(e.dialogInfo.vaService)+"\n        ")])])],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{align:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n        附件\n      ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:20}},[a("upLoad",{attrs:{"hidden-upload":!e.isEdit,"context-path":e.url.upApi},model:{value:e.dialogInfo.vaServiceFile,callback:function(t){e.$set(e.dialogInfo,"vaServiceFile",t)},expression:"dialogInfo.vaServiceFile"}})],1)],1)],1)])},n=[],s=(a("a450"),a("1bc7"),a("7562")),o=a("2c2d"),l=a("e19c"),r={name:"Index",components:{upLoad:o["a"]},data:function(){return{dialogInfo:{},url:l["a"],isEdit:!1,buttonList:[]}},mounted:function(){this.getDetailInfo()},methods:{setButtonList:function(){var e=this;this.buttonList=[],this.$route.meta.buttons.forEach((function(t){"历史沿革及服务"===t.name&&t.buttons.forEach((function(t){"602020201"===t.code&&e.buttonList.push(t.code),"602030201"===t.code&&e.buttonList.push(t.code)}))}))},getDetailInfo:function(){var e=this;s["a"].selectFundDescInfo({fundId:this.$route.params.fundId}).then((function(t){e.dialogInfo=t.data.data}))},editInfo:function(){this.isEdit=!this.isEdit},saveInfo:function(){var e=this;this.dialogInfo.fundId=this.$route.params.fundId,s["a"].updateFundDescInfo(this.dialogInfo).then((function(t){"0"===t.data.status?(e.getDetailInfo(),e.$message({offset:150,type:"success",message:"保存成功"})):e.$message({offset:150,type:"warning",message:t.data.msg})})),this.isEdit=!this.isEdit},cancelInfo:function(){this.isEdit=!this.isEdit,this.getDetailInfo()}}},c=r,d=(a("3801"),a("4ac2")),u=Object(d["a"])(c,i,n,!1,null,"c19d2ff0",null);t["default"]=u.exports},f8c9:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createBox"},[a("div",{staticClass:"btnBox",staticStyle:{"margin-top":"20px"}},[e.buttonList.includes("602020301")||e.buttonList.includes("602030301")?a("button",{on:{click:e.addReport}},[a("i",{staticClass:"iconfont iconjiahao"}),e._v("\n      新建\n    ")]):e._e(),e._v(" "),e.buttonList.includes("602020302")||e.buttonList.includes("602030302")?a("button",{on:{click:e.editReport}},[a("i",{staticClass:"iconfont iconbianji"}),e._v("\n      编辑\n    ")]):e._e(),e._v(" "),e.buttonList.includes("602020303")||e.buttonList.includes("602030303")?a("button",{staticClass:"defalut",on:{click:e.delReport}},[a("i",{staticClass:"iconfont iconqingchu"}),e._v("\n      删除\n    ")]):e._e()]),e._v(" "),a("el-table",{attrs:{data:e.periodicReportList.data,"header-cell-style":{background:"#FEFAFA",color:"#333",fontSize:"12px",fontWeight:"bold",textAlign:"center"},"tooltip-effect":"dark",border:""},on:{"selection-change":e.reportList}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"class-name":"cellText",prop:"rptTitle",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rptDt","class-name":"cellText",label:"报告日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rptTypeName","class-name":"cellText",label:"分类"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark","class-name":"cellText",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{"class-name":"cellText",label:"附件"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("purvarUpload",{attrs:{"hidden-upload":e.hideUp,"context-path":e.url.upApi},model:{value:t.row.rptFile,callback:function(a){e.$set(t.row,"rptFile",a)},expression:"scope.row.rptFile"}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.modalTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.reportVisible},on:{"update:visible":function(t){e.reportVisible=t},close:e.reportClose}},[a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:6}},[e._v("\n        标题\n        "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:18}},[a("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"64",autocomplete:"off",size:"small"},model:{value:e.newReport.rptTitle,callback:function(t){e.$set(e.newReport,"rptTitle",t)},expression:"newReport.rptTitle"}})],1)],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:6}},[e._v("\n        报告日期\n        "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:18}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date",size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.newReport.rptDt,callback:function(t){e.$set(e.newReport,"rptDt",t)},expression:"newReport.rptDt"}})],1)],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:6}},[e._v("\n        分类\n        "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:18}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.newReport.rptType,callback:function(t){e.$set(e.newReport,"rptType",t)},expression:"newReport.rptType"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:6}},[e._v("\n        附件\n      ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:18}},[e.reportVisible?a("purvarUpload",{staticStyle:{"margin-right":"10px"},attrs:{"context-path":e.url.upApi},model:{value:e.rptFile,callback:function(t){e.rptFile=t},expression:"rptFile"}}):e._e()],1)],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:6}},[e._v("\n        备注\n      ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:18}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:2,maxRows:4},maxlength:"200"},model:{value:e.newReport.remark,callback:function(t){e.$set(e.newReport,"remark",t)},expression:"newReport.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"reportBtn",on:{click:e.cancelReport}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"reportBtn",attrs:{type:"primary"},on:{click:e.submitReport}},[e._v("保 存")])],1)],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.periodicReportList.currPage,"page-sizes":[5,10,15,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.periodicReportList.totalCount},on:{"size-change":e.reportSizeChange,"current-change":e.reportCurrentChange}})],1)},n=[],s=(a("a450"),a("aa18"),a("982e"),a("1bc7"),a("fc02"),a("2c2d")),o=a("698e"),l=a("e19c"),r={name:"PeriodicReport",components:{purvarUpload:s["a"]},props:["tableData"],data:function(){return{periodicReportList:"",reportVisible:!1,newReport:{},typeList:[{label:"类别1",value:1},{label:"类别2",value:2},{label:"类别3",value:3},{label:"类别4",value:4}],choiceList:[],url:l["a"],rules:{rptTitle:[{required:!0,message:"请输入报告名称",trigger:"blur"}],tprDate:[{required:!0,message:"请选择日期",trigger:"change"}]},hideUp:!0,rptFile:"",modalTitle:"",buttonList:[]}},mounted:function(){this.getPeriodicReportList(),this.getParentId(221,"typeList")},methods:{getParentId:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(sessionStorage.getItem("code".concat(e))){var n=[];if(i){var s=i.split(",");JSON.parse(sessionStorage.getItem("code".concat(e))).forEach((function(e){s.includes(e.value)&&n.push(e)}))}else n=JSON.parse(sessionStorage.getItem("code".concat(e)));this[t]=n}else o["a"].getCodeByParentId({parentId:e}).then((function(n){var s=[];if(i){var o=i.split(",");n.data.data.options.forEach((function(e){o.includes(e.value)&&s.push(e)}))}else s=n.data.data.options;a[t]=s,sessionStorage.setItem("code".concat(e),JSON.stringify(n.data.data.options))}))},setButtonList:function(){var e=this;this.buttonList=[],this.$route.meta.buttons.forEach((function(t){"定期报告"===t.name&&t.buttons.forEach((function(t){"602020301"===t.code&&e.buttonList.push(t.code),"602020302"===t.code&&e.buttonList.push(t.code),"602020303"===t.code&&e.buttonList.push(t.code),"602030301"===t.code&&e.buttonList.push(t.code),"602030302"===t.code&&e.buttonList.push(t.code),"602030303"===t.code&&e.buttonList.push(t.code)}))}))},getPeriodicReportList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.periodicReportList={};var i={length:t,currPage:a,fundId:this.$route.params.fundId?this.$route.params.fundId:0};o["a"].fundAnalysisReportList(i).then((function(t){e.periodicReportList=t.data}))},reportSizeChange:function(e){this.periodicReportList.pageSize=e,this.getPeriodicReportList(this.periodicReportList.pageSize,1)},reportCurrentChange:function(e){this.periodicReportList.currPage=e,this.getPeriodicReportList(this.periodicReportList.pageSize,this.periodicReportList.currPage)},submitReport:function(){var e=this;return this.newReport.rptFile=this.rptFile,this.newReport.rptTitle?this.newReport.rptDt?this.newReport.rptType?(this.newReport.fundId=this.$route.params.fundId?this.$route.params.fundId:0,void("新建报告"===this.modalTitle?o["a"].fundAnalysisReport(this.newReport).then((function(t){"0"===t.data.status&&(e.$message({offset:150,type:"success",message:"新增成功"}),e.reportVisible=!1)})).then((function(t){e.getPeriodicReportList(e.periodicReportList.pageSize,e.periodicReportList.currPage)})).catch((function(t){e.$message({offset:150,type:"error",message:"操作失败"})})):o["a"].fundAnalysisReportUpdate(this.newReport).then((function(t){"成功"===t.data.msg?(e.$message({offset:150,type:"success",message:"修改成功"}),e.reportVisible=!1,e.getPeriodicReportList(e.periodicReportList.pageSize,e.periodicReportList.currPage)):e.$message({offset:150,type:"warning",message:t.data.msg})})))):(this.$message({offset:150,type:"warning",message:"请填写分类"}),!1):(this.$message({offset:150,type:"warning",message:"请填写报告日期"}),!1):(this.$message({offset:150,type:"warning",message:"请填写标题"}),!1)},reportClose:function(){this.newReport={},this.rptFile=""},addReport:function(){this.reportVisible=!0,this.modalTitle="新建报告",this.rptFile=""},delReport:function(){var e=this;0==this.choiceList.length?this.$message({offset:150,message:"请至少选择一条数据",type:"warning"}):this.$confirm("确定要删除这".concat(this.choiceList.length,"条数据?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.choiceList.forEach((function(t,a){o["a"].fundAnalysisReportDelete({fieldValue:t.rptId,fundId:t.fundId}).then((function(t){e.getPeriodicReportList(e.periodicReportList.pageSize,1)}))})),e.$message({offset:150,type:"success",message:"删除成功!"})}))},editReport:function(){0==this.choiceList.length?this.$message({offset:150,message:"请选择一条数据",type:"warning"}):(this.newReport=this.choiceList[0],this.reportVisible=!0,this.rptFile=this.choiceList[0].rptFile,this.modalTitle="编辑报告")},reportList:function(e){this.choiceList=e},cancelReport:function(){this.reportVisible=!1,this.getPeriodicReportList(this.periodicReportList.pageSize,1)}}},c=r,d=(a("a2c0"),a("4ac2")),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},fcab:function(e,t,a){},fd40:function(e,t,a){}}]);