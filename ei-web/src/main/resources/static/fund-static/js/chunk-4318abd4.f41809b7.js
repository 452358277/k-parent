(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4318abd4","chunk-2d0b3498"],{2873:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tree",{attrs:{data:e.list,props:e.defaultProps,"default-checked-keys":e.value},on:{"node-click":e.handleNodeClick}})],1)},i=[],n={name:"UserTree",model:{prop:"value",event:"update-value"},props:{list:{type:Array,default:function(){return[]}},defaultProps:{type:Object,default:function(){return{children:"children",label:"name"}}},value:{type:Array,default:function(){return[]}}},methods:{handleNodeClick:function(e){this.value.length=0,this.value.push(e)}}},o=n,l=a("4ac2"),r=Object(l["a"])(o,s,i,!1,null,"08d9eb5d",null);t["default"]=r.exports},"3cc9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personnelDispatch"},[a("div",{staticClass:"btnBox",staticStyle:{"margin-top":"20px"}},[e.buttonList.includes("603020801")?a("button",{on:{click:e.addInfo}},[a("i",{staticClass:"iconfont iconjiahao"}),e._v("\n        新增\n      ")]):e._e(),e._v(" "),e.buttonList.includes("603020802")?a("button",{on:{click:e.editInfo}},[a("i",{staticClass:"iconfont iconbianji"}),e._v("\n        编辑\n      ")]):e._e(),e._v(" "),e.buttonList.includes("603020803")?a("button",{on:{click:function(t){return e.delInfo(e.selectList)}}},[a("i",{staticClass:"iconfont iconqingchu"}),e._v("\n        删除\n      ")]):e._e(),e._v(" "),a("button",{on:{click:e.lookDetail}},[a("i",{staticClass:"iconfont iconsousuo1"}),e._v("\n        查看\n      ")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData.data,"header-cell-style":{background:"#FEFAFA",color:"#333",fontWeight:"bold",fontSize:"12px",textAlign:"center"},size:"small",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"200",prop:"userTypeName",label:"派遣类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"200",prop:"userName",label:"派遣人员"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"120",prop:"statusName",label:"状态"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.tableData.currPage,"page-sizes":[5,10,15,20],"page-size":e.tableData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.submitLoading,expression:"submitLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{title:e.modalTitle,visible:e.dialogVisible,"element-loading-background":"rgba(0, 0, 0, 0)",width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose}},[e.lookStatus?e._e():a("el-row",{staticClass:"personHeadInfo",attrs:{align:"center"}},[a("el-col",{staticClass:"personHeadTitle",attrs:{span:3}},[e._v("\n          企业名称\n        ")]),e._v(" "),a("el-col",{staticClass:"personHeadItem",attrs:{span:9}},[a("div",[e._v("\n            "+e._s(e.dialogInfo.projObjectName)+"\n          ")])])],1),e._v(" "),e.lookStatus?e._e():a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData2.data,"header-cell-style":{background:"#FEFAFA",color:"#333",fontWeight:"bold",fontSize:"12px",textAlign:"center"},size:"small",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"200",prop:"",label:"派遣类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.row.userType,callback:function(a){e.$set(t.row,"userType",a)},expression:"scope.row.userType"}},e._l(e.dispatchList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}],null,!1,709046907)}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"200",prop:"",label:"派遣人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","align-items":"center"}},[t.row.userName?a("el-tag",{staticStyle:{"font-size":"14px","margin-right":"10px"}},[e._v(e._s(t.row.userName)+"\n              ")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.choicePerson(t)}}},[e._v("选择人员")])],1)]}}],null,!1,3203988451)}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"120",prop:"status",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}})]}}],null,!1,328334811)}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.delList(t)}}},[e._v("删除\n            ")])]}}],null,!1,3671752369)},[a("template",{slot:"header"},[a("el-button",{attrs:{size:"small"},on:{click:e.addList}},[e._v("新增")])],1)],2)],1),e._v(" "),e.lookStatus?a("div",{staticStyle:{padding:"0px 20px"}},[e.lookStatus?a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"数据信息",name:"first"}},[a("el-row",{staticClass:"personHeadInfo",attrs:{align:"center"}},[a("el-col",{staticClass:"personHeadTitle",attrs:{span:3}},[e._v("\n                企业名称\n              ")]),e._v(" "),a("el-col",{staticClass:"personHeadItem",attrs:{span:9}},[a("div",[e._v("\n                  "+e._s(e.dialogInfo.projObjectName)+"\n                ")])])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData2.data,"header-cell-style":{background:"#FEFAFA",color:"#333",fontWeight:"bold",fontSize:"12px",textAlign:"center"},size:"small",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"200",prop:"",label:"派遣类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.userTypeName)+"\n                ")]}}],null,!1,571333139)}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"200",prop:"",label:"派遣人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","align-items":"center"}},[t.row.userName?a("el-tag",{staticStyle:{"font-size":"14px","margin-right":"10px"}},[e._v(e._s(t.row.userName)+"\n                    ")]):e._e()],1)]}}],null,!1,2543906183)}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"120",prop:"status",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.remark)+"\n                ")]}}],null,!1,424289631)})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"流程图",name:"second"}},[a("div",[a("iframe",{staticStyle:{width:"100%",height:"50vh"},attrs:{src:e.liuchengUrl,frameborder:"0"}})])]),e._v(" "),a("el-tab-pane",{attrs:{label:"处理过程",name:"third"}},[a("div",[a("iframe",{staticStyle:{width:"100%",height:"50vh"},attrs:{src:e.processUrl,frameborder:"0"}})])])],1):e._e()],1):e._e(),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.lookStatus?e._e():a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),e.lookStatus?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDialogInfo("save")}}},[e._v("保 存")]),e._v(" "),e.lookStatus?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDialogInfo("submit")}}},[e._v("提 交")]),e._v(" "),e.lookStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")]):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择人员",visible:e.choicePersonDialogVisible,width:"70%"},on:{"update:visible":function(t){e.choicePersonDialogVisible=t}}},[a("choicePerson",{attrs:{contextPath:e.url.upApi},on:{"update-value":e.getUserId},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1)],1)},i=[],n=(a("aa18"),a("982e"),a("fc02"),a("1bc7"),a("a450"),a("e19c")),o=a("2873"),l=a("7562"),r=a("fc12"),c={name:"Index",data:function(){return{url:n["a"],tableData:{data:[],currPage:1,pageSize:10,totalCount:100},tableData2:{data:[],currPage:1,pageSize:10,totalCount:100},changeLabel:function(e){return{id:e.userId,label:e.name,children:e.children}},modalTitle:"",dialogVisible:!1,dispatchList:[{value:"1",label:"股东会"},{value:"2",label:"合伙人会"},{value:"3",label:"监事会"},{value:"4",label:"董事会"},{value:"5",label:"投决会"}],choicePersonDialogVisible:!1,personInfo:"",userList:[],defaultProps:{children:"children",label:"name"},userId:"",nowIndex:"",selectList:[],assignId:"",dialogInfo:{},submitLoading:!1,liuchengUrl:"",processUrl:"",lookStatus:!1,activeName:"first",buttonList:[]}},watch:{projInfo:function(e){this.dialogInfo.projObjectName=e.projObjectName}},props:{projInfo:{type:Object,default:function(){return{}}}},components:{choicePerson:r["a"],treeSelect:o["default"]},mounted:function(){var e=this;l["a"].userTreeList().then((function(t){e.userList[0]=t.data.data.model})),this.getTableList(),this.getParentId(1017,"dispatchList")},methods:{setButtonList:function(){var e=this;this.buttonList=[],this.$route.meta.buttons.forEach((function(t){"人事派遣"===t.name&&t.buttons.forEach((function(t){"603020801"===t.code&&e.buttonList.push(t.code),"603020802"===t.code&&e.buttonList.push(t.code),"603020803"===t.code&&e.buttonList.push(t.code)}))}))},getParentId:function(e,t){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(sessionStorage.getItem("code".concat(e))){var i=[];if(s){var n=s.split(",");JSON.parse(sessionStorage.getItem("code".concat(e))).forEach((function(e){n.includes(e.value)&&i.push(e)}))}else i=JSON.parse(sessionStorage.getItem("code".concat(e)));this[t]=i}else l["a"].getCodeByParentId({parentId:e}).then((function(i){var n=[];if(s){var o=s.split(",");i.data.data.options.forEach((function(e){o.includes(e.value)&&n.push(e)}))}else n=i.data.data.options;a[t]=n,sessionStorage.setItem("code".concat(e),JSON.stringify(i.data.data.options))}))},getTableList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l["a"].getStaffList({pageSize:t,currPage:a,projId:this.$route.params.projId}).then((function(t){"0"===t.data.status&&(e.tableData=t.data)}))},addInfo:function(){this.modalTitle="新增人事派遣",this.dialogVisible=!0},editInfo:function(){var e=this;this.modalTitle="编辑人事派遣",1===this.selectList.length?"0"!==this.selectList[0].status?this.$message({offset:150,type:"warning",message:"审批中的数据无法编辑"}):l["a"].staffListDetail({id:this.selectList[0].assignId}).then((function(t){"0"===t.data.status&&(e.tableData2.data=t.data.data.listVO,e.assignId=t.data.data.assignId),e.tableData2.data.forEach((function(e){delete e.createDt,delete e.updateDt})),e.dialogVisible=!0})):this.$message({offset:150,type:"warning",message:"请选择一条数据编辑"})},delInfo:function(e){var t=this;if(1!==e.length)this.$message({offset:150,type:"warning",message:"请选择一条数据进行删除"});else{if("0"!==e[0].status)return void this.$message({offset:150,type:"warning",message:"审核中的数据无法删除"});this.$confirm("删除此数据，会将此数据同组数据一同删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l["a"].staffListDel({assignId:e[0].assignId}).then((function(e){"0"===e.data.status&&"成功"===e.data.msg?(t.$message({offset:150,type:"success",message:"成功删除"}),t.getTableList(t.tableData.pageSize,1)):t.$message({offset:150,type:"warning",message:e.data.msg})}))}))}},handleSizeChange:function(e){this.getTableList(e,this.tableData.currPage)},handleCurrentChange:function(e){this.getTableList(this.tableData.pageSize,e)},handleSelectionChange:function(e){this.selectList=e},dialogClose:function(){this.assignId="",this.tableData2.data=[],this.dialogInfo.projObjectName=this.projInfo.projObjectName,this.lookStatus=!1},submitDialogInfo:function(e){for(var t=this,a=0;a<this.tableData2.data.length;a++){if(""===this.tableData2.data[a].userType||null===this.tableData2.data[a].userType||void 0===this.tableData2.data[a].userType)return void this.$message({offset:150,type:"warning",message:"请选择派遣类型"});if(""===this.tableData2.data[a].userName||null===this.tableData2.data[a].userName||void 0===this.tableData2.data[a].userName)return void this.$message({offset:150,type:"warning",message:"请选择派遣人员"})}var s={};if(s.projId=this.$route.params.projId,s.assignId=this.assignId,"save"===e?(s.isStartFlow=!1,s.status="0"):"submit"===e&&(s.isStartFlow=!0,s.status="1"),0===this.tableData2.data.length)this.$message({offset:150,type:"warning",message:"请添加至少一条人员派遣数据"});else{var i=this.tableData2.data;s.list=i,this.submitLoading=!0,l["a"].staffListSaveInfo(s).then((function(e){"0"===e.data.status&&"成功"===e.data.msg?"新增人事派遣"===t.modalTitle?(t.$message({offset:150,type:"success",message:"新增成功"}),t.dialogVisible=!1,t.submitLoading=!1,t.getTableList(t.tableData.pageSize,t.tableData.currPage)):"编辑人事派遣"===t.modalTitle&&(t.$message({offset:150,type:"success",message:"编辑成功"}),t.dialogVisible=!1,t.submitLoading=!1,t.getTableList(t.tableData.pageSize,t.tableData.currPage)):(t.$message({offset:150,type:"warning",message:e.data.msg}),t.submitLoading=!1)}))}},addList:function(){this.tableData2.data.push({})},delList:function(e){var t=this,a=e.$index;this.$confirm("确定删除此条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableData2.data.splice(a,1)})).catch((function(){}))},choicePerson:function(e){this.nowIndex=e.$index,this.choicePersonDialogVisible=!0},selectUser:function(e){},handleNodeClick:function(e){},getUserId:function(e,t){1!==t.length?this.$message({offset:150,type:"warning",message:"请选择一位人员"}):(this.$set(this.tableData2.data[this.nowIndex],"userId",e),this.$set(this.tableData2.data[this.nowIndex],"userName",t.join(",")),this.choicePersonDialogVisible=!1)},lookDetail:function(){var e=this;this.modalTitle="查看人事派遣",1===this.selectList.length?(this.lookStatus=!0,l["a"].staffListDetail({id:this.selectList[0].assignId}).then((function(t){if("0"===t.data.status){e.tableData2.data=t.data.data.listVO,e.assignId=t.data.data.assignId;var a=e.tableData2.data.length>0?e.tableData2.data[0].processInstId:"",s=e.tableData2.data.length>0?e.tableData2.data[0].taskId:"";l["a"].getDefIdProcessinstanceId({processId:a}).then((function(t){e.liuchengUrl="/sysweb/action/workflowProcess!flowGraphics.action?defId=".concat(t.data,"&instId=").concat(a,"&taskId=").concat(s,"&frameInd=2"),e.processUrl="/sysweb/action/showListview.action?listViewId=fixflowProcessInfosListView&instId=".concat(a,"&listViewFileName=fixflowProcessInfosListView&frameInd=2")}))}e.tableData2.data.forEach((function(e){delete e.createDt,delete e.updateDt})),e.dialogVisible=!0}))):this.$message({offset:150,type:"warning",message:"请选择一条数据编辑"})}}},u=c,d=(a("afd0"),a("4ac2")),h=Object(d["a"])(u,s,i,!1,null,"78c53026",null);t["default"]=h.exports},"3d10":function(e,t,a){},"850d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAOCAYAAAAMn20lAAAAF0lEQVQYlWNscGD4z4AFMGETHJUgTQIAcsYB2/7VbKAAAAAASUVORK5CYII="},8758:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALGklEQVR4Xu2dXYhdVxmGv+8kmZDQ0mbSmcmsndDcSIxVSAQRMZqG2hvphQpSkSCtWBWEUsUKFgsWxd4UbRBEo/FGtFYQhSLexJBW441/AZuaC0FoZq+dnzZp2khifs4nR6YXijOzZ5/1rZms/cxt13rPeZ/1PqR/MCr8QAACCxJQ2EAAAgsTQBDWAYFFCCAI84AAgrABCHQjwJ8g3bhxqycEEKQnD03NbgQQpBs3bvWEAIL05KGp2Y0AgnTjxq2eEECQnjw0NbsRQJBu3LjVEwII0pOHpmY3AgjSjRu3ekIAQXry0NTsRgBBunHjVk8IIEhPHpqa3QggSDdu3OoJgVUhSIzxDhHZrqq39IQ7NRchMBwOL6rqqRDCKysNakUEMTONMd6vqh81s7tVdXKlQfD5q5LASJDfDgaDZ2dmZn6mqpb7W2YXJMa408x+oqq7cpfl825eAmZ2fN26dQ9OT08fz9kiqyB1Xe8WkSOqenvOknxWGQTM7F8i8mBVVc/kapRNkLqud6jqH0Tk1lzl+JwiCQzN7P1VVR3L0S6LIOfOnbv16tWrJ1R1W45SfEbZBMysmZiY2DE1NfWGd9MsgsQYD4jIw95lyO8VgQMhhEe8G7sLcv78+duuXLnyqois8S5Dfq8I3BgOhzNbt24dbcvtx12Q06dP3z8cDn/q1oDg3hIws09VVXXIE4C7IDHGgyLykGcJsntL4MchhP2e7d0Fqev6sKre41mC7N4SOBpC2OfZ3l2QGOMJEXlbmxJm9kSbcwudUdUHROTONhlm9pSI/LPNWc7IBlX9UhsOZnZKRH7Y5uwi7/i4iAxaZLwUQrirxbnOR3II8jcReWubbxhCGOv7xBiPisjeNp+1Zs2aLTMzM2fanO37mbm5uc2DwaDV/xdlZseqqtozDrMY4zURWdsi42QIYWeLc52PjDXINp8aY0SQNqBW8RkEcXwcBHGEmykaQRxBI4gj3EzRCOIIGkEc4WaKRhBH0AjiCDdTNII4gkYQR7iZohHEETSCOMLNFI0gjqARxBFupmgEcQSNII5wM0UjiCNoBHGEmykaQRxBI4gj3EzRCOIIGkEc4WaKRhBH0AjiCDdTNII4gkYQR7iZohHEETSCOMLNFI0gjqARxBFupmgEcQSNII5wM0UjiCNoBHGEmykaQRxBI4gj3EzRCOIIGkEc4WaKRhBH0AjiCDdTNII4gkYQR7iZohHEETSCOMLNFI0gjqARxBFupmgEcQSNII5wM0UjiCNoBHGEmykaQRxBI4gj3EzRCOIIGkEc4WaKRhBH0AjiCDdTNII4gkYQR7iZohHEETSCOMLNFI0gjqARxBFupmgEcQSNII5wM0UjiCNoBHGEmykaQRxBI4gj3EzRCOIIGkEc4WaKRhBH0AjiCDdTNII4gkYQR7iZohHEETSCOMLNFI0gjqARxBFupmgEcQSNII5wM0UjiCNoBHGEmykaQRxB5xSkruvnVPU+xzpEL03g1yGEDy59bOETMcZrIrK2RcbJEMLOFuc6H9HON1tezClIjPGgiDzU8qtxzIfA90MInx4nGkEWoBdCGEvYGOPnReSb4zwOd8cm8NkQwvfGSUEQJ0GaptluZv8Y53G4Ox6B9evXb9u8efPcOCkI4iTIKDbGeFRE9o7zQNztTOB3IYT3db49fxFBHAWp63q3qv553Efi/vIJrF27dvf09PTx5d/87xsI4ijI/J8i3xCRL4/7UNxfFoHHQghPLuvGAocRxFkQMxs0TfMbEbk7xYORsTgBM/tOVVWfS8UJQZwFGcWb2UTTNN8WkbH+lWOqRy8458kQwmMp+yFIBkHe/IimafYOh8OnVXVXykfse5aZHR8MBo/Mzs4+n5oFgmQU5M2Pqut6x2AwuMfMdojINhHZJCJj/XeX1MNYxXkmIq+JyMsi8pKIPB9COOn1fRFkBQTxekxy0xNAEARJv6qCEhEEQQqac/oqCIIg6VdVUCKCIEhBc05fBUEQJP2qCkpEEAQpaM7pqyAIgqRfVUGJCIIgBc05fRUEQZD0qyooEUEQpKA5p6+CIAiSflUFJSIIghQ05/RVEARB0q+qoEQEQZCC5py+CoIgSPpVFZSIIAhS0JzTV0EQBEm/qoISEQRBCppz+ioIgiDpV1VQIoIgSEFzTl8FQRAk/aoKSkQQBClozumrIAiCpF9VQYkIgiAFzTl9FQRBkPSrKigRQRCkoDmnr4IgCJJ+VQUlIgiCFDTn9FUQBEHSr6qgRARBkILmnL4KgiBI+lUVlIggKyTIhQsXbr98+fIXRWRPQXvKVsXMjm7cuPHpTZs2jX6ZjtsPgqyAIE3TfGL+V7GNfrMUPx0JmNkFEXm0qqpDHSOWvIYgmQVpmmafmR1Z8mU40JqAmd1bVdXh1heWcRBBMgsSYxz9Xr2dy3gjji5BwMz+XlXVWzxAIUhGQc6ePbvr+vXrf/F4SDLlXSGEP6bmgCAZBYkxfkhEfpH6Ecn7D4EPhxB+mZoFgmQU5MyZM++5cePG71M/InkiZranqqpjqVkgSEZBRh9V1/WrqjqZ+iF7nvd6COE2DwYIklmQGOPXROQrHo/Z10wze6qqqkc9+iNIZkHm/xR5TlXv83jQHmb+KoTgxhJBVkCQeUm+qqoPiMidPRz12JXNrFbV74YQvj522CIBCLJCgng+KtnpCCAIgqRbU4FJCIIgBc46XSUEQZB0ayowCUEQpMBZp6uEIAiSbk0FJiEIghQ463SVEARB0q2pwCQEQZACZ52uEoIgSLo1FZiEIAhS4KzTVUIQBEm3pgKTEARBCpx1ukoIgiDp1lRgEoIgSIGzTlcJQRAk3ZoKTEIQBClw1ukqIQiCpFtTgUkIgiAFzjpdJQRBkHRrKjAJQRCkwFmnq4QgCJJuTQUmIQiCFDjrdJUQBEHSranAJARBkAJnna4SgiBIujUVmIQgCFLgrNNVQhAESbemApMQBEEKnHW6SgiCIOnWVGASgiBIgbNOVwlBECTdmgpMQhAEKXDW6SohCIKkW1OBSQiCIAXOOl0lBEGQdGsqMAlBEKTAWaerhCAIkm5NBSYhCIIUOOt0lRAEQdKtqcAkBEGQAmedrhKCIEi6NRWYhCAIUuCs01XqmyB/FZG3t8FnZk+0OceZsgmo6uMiMmjR8sUQwjtanOt8RDvfbHkxxnhERPa1PM4xCLQmYGaHq6q6t/WFDgdzCPIjEdnf4btxBQJLETgYQvjMUofG+evugtR1/UlVPTTOl+QuBP4fgcFg8LEtW7Y860nHXZC5ubnNqtqo6jrPImT3i4CZXduwYcPU5OTkRc/m7oKMvnyM8YCIPOxZhOzeEfhWCOEL3q2zCHLx4sXJS5cuvaiqs96FyC+fgJmdmpiYuGtqauoN77ZZBBmVqOv6var6Qst/fefdm/ybl8DrIvLuEMLJHBWyCTL/t1r7zewHqro+Rzk+oywCZvaaqn4ghPCnXM2yCjIvyTvN7JCq7spVks+5+QmY2fHBYLB/dnb2RM422QUZlTMzbZrm4yLyETPbp6qbcpbms24aAq+IyAtm9vMQwjOqarm/+YoI8r8lY4x3iMh2Vb0lNwA+b/URMLPRP2e8HEIYCbKiP6tCkBUlwIdDYBECCMI8IIAgbAAC3QjwJ0g3btzqCQEE6clDU7MbAQTpxo1bPSGAID15aGp2I4Ag3bhxqycEEKQnD03NbgQQpBs3bvWEAIL05KGp2Y0AgnTjxq2eEECQnjw0NbsRQJBu3LjVEwII0pOHpmY3AgjSjRu3ekIAQXry0NTsRgBBunHjVk8I/BuPe7JBoQgSAAAAAABJRU5ErkJggg=="},afd0:function(e,t,a){"use strict";a("3d10")},b64e:function(e,t,a){},c489:function(e,t,a){"use strict";a("b64e")},fc12:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"multiple-selection-component"},[s("div",{staticClass:"transfer-contanier clearfix"},[s("div",{staticClass:"inner clearfix"},[s("div",{staticClass:"tree-left"},[s("div",{staticClass:"button-box"},[s("el-input",{attrs:{size:"mini",clearable:"",placeholder:"输入姓名进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText="string"===typeof t?t.trim():t},expression:"filterText"}}),e._v(" "),s("el-button",{staticStyle:{"margin-left":"5px"},attrs:{icon:"el-icon-search",size:"mini"}},[e._v("查询")])],1),e._v(" "),s("div",{staticClass:"tree-box"},[s("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{"empty-text":"暂无数据","show-checkbox":"","check-on-click-node":!0,"default-expand-all":!0,"expand-on-click-node":!1,props:e.defaultProps,data:e.treeData,"filter-node-method":e.filterNode,"node-key":"userId"},on:{"check-change":e.checkChange}})],1)]),e._v(" "),s("div",{staticClass:"box-center"},[s("div",{staticClass:"list-member"},[e._m(0),e._v(" "),s("ul",e._l(e.defaultMember,(function(t,a){return s("li",{key:t.userId,ref:"memberLi",refInFor:!0,class:{"li-focus":e.chooseNum==a},on:{click:function(s){return e.memberSelect(a,t.userId,t.userName)}}},[s("i",{staticClass:"select el-icon-check"}),e._v(" "),s("span",{staticStyle:{"padding-left":"17px"}},[e._v(e._s(t.userName))])])})),0)])]),e._v(" "),s("div",{staticClass:"list-right"},[s("div",{staticClass:"select"},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",size:"mini",placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.valueSelect,callback:function(t){e.valueSelect=t},expression:"valueSelect"}},e._l(e.options,(function(t){return s("el-option",{key:t.groupId,attrs:{label:t.groupName,value:t.groupId}},[s("span",{staticStyle:{float:"left"}},[e._v(e._s(t.groupName))]),e._v(" "),s("span",{staticClass:"icon-nav",staticStyle:{float:"right",color:"#8492a6","font-size":"12px",display:"none"}},[s("i",{on:{click:function(a){return a.stopPropagation(),e.defaultSetting(t.groupId)}}},[e._v("默认")]),e._v(" "),s("i",{staticStyle:{"margin-left":"10px"},on:{click:function(a){return a.stopPropagation(),e.deleteGroupMember(t.groupId)}}},[e._v("删除")])])])})),1)],1),e._v(" "),s("div",{staticClass:"choose-member-content"},[s("div",{staticClass:"tag-box"},e._l(e.chooseMember,(function(t){return s("el-tag",{key:t.userId,staticStyle:{"margin-right":"10px"},attrs:{closable:"",size:"mini",type:"success"},on:{close:function(a){return e.tagClose(t.userId)}}},[e._v(e._s(t.name))])})),1)]),e._v(" "),s("div",{staticClass:"button-nav"},[s("el-button",{staticStyle:{"background-color":"#B28147"},attrs:{type:"primary",size:"mini",icon:"el-icon-delete"},on:{click:e.all_delete}},[e._v("全部删除")]),e._v(" "),s("el-button",{staticStyle:{"background-color":"#B28147"},attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(t){e.innerVisible=!0}}},[e._v("保存分组")])],1)])]),e._v(" "),s("el-dialog",{attrs:{title:"自定义分组","append-to-body":"",visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[s("div",{staticClass:"edit-box"},[s("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:e.editInput,callback:function(t){e.editInput="string"===typeof t?t.trim():t},expression:"editInput"}}),e._v(" "),s("div",{staticClass:"setting"},[s("p",[e._v("\n            保存为默认分组\n            "),s("el-switch",{attrs:{"active-color":"#2a71c3","inactive-color":"#ccc"},model:{value:e.switchValue,callback:function(t){e.switchValue=t},expression:"switchValue"}})],1),e._v(" "),s("el-button",{staticStyle:{"margin-left":"10px","background-color":"#B28147"},attrs:{type:"primary",size:"mini",icon:"el-icon-success"},on:{click:e.save_group_name}},[e._v("确认")])],1)],1)]),e._v(" "),s("div",{staticClass:"button-bottom"},[s("div",{staticClass:"button",on:{click:e.handleSave}},[s("img",{attrs:{src:a("8758"),alt:""}}),e._v("保存\n      ")])])],1)])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h2",[s("img",{attrs:{src:a("850d"),alt:""}}),e._v("常选人员\n          ")])}],n=(a("1bc7"),a("a450"),a("fc02"),a("e680"),a("7f43")),o=a.n(n),l={name:"MultipleSelection",model:{prop:"value",event:"update-value"},props:{value:{type:String,default:""},contextPath:{type:String,default:"/ei-web/"},userId:[String,Number],selectType:{type:String,default:"role"},bid:{type:String,default:"75"}},data:function(){return{switchValue:!1,editInput:"",innerVisible:!1,dialogTableVisible:!1,chooseNum:null,filterText:"",treeData:[],defaultProps:{children:"children",label:"name"},defaultMember:[],chooseMember:[],options:[],valueSelect:"",groupsList:[],sChooseMemberArr:[],valueDefault:[],url_project_id:"",loading:!1}},computed:{myValue:function(){return""!==this.value?this.value.split(","):[]}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},created:function(){this.url_project_id=this.bid,this.initDefaultData(),this.getTreeList()},mounted:function(){this.$nextTick((function(){var e=[];if(""!==this.value){e=this.value.split(","),this.$refs.tree.setCheckedKeys(e);for(var t=0;t<this.defaultMember.length;t++)for(var a=0;a<e.length;a++)this.defaultMember[t].id==e[a]&&(this.$refs.memberLi[t].className="li-focus");this.chooseMember=this.$refs.tree.getCheckedNodes();for(var s=0;s<this.chooseMember.length;s++)void 0!==this.chooseMember[s].children&&this.chooseMember.splice(s,1)}}))},methods:{getTreeList:function(){var e=this;o()({url:this.contextPath+"/getTreeList",method:"get"}).then((function(t){var a=t.data.data.model;e.treeData.push(a),e.$nextTick((function(){e.valueDefault=this.value.split(","),e.$refs.tree.setCheckedKeys(this.valueDefault)}))}))},initDefaultData:function(){var e=this;o()({url:this.contextPath+"/selectUser/init",method:"get"}).then((function(t){var a=t.data.data.groups;if(e.groupsList=t.data.data.groups,e.defaultMember=t.data.data.users,a.length>0){e.options=[];for(var s=0;s<a.length;s++){var i={groupName:"",groupId:""};i.groupName=a[s].groupName,i.groupId=a[s].groupId,e.options.push(i)}}}))},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},memberSelect:function(e,t,a){if(this.$refs.memberLi[e].className.length<=0){this.$refs.memberLi[e].className="li-focus";var s={userId:"",name:""};s.userId=t,s.name=a,this.sChooseMemberArr.push(s),this.$refs.tree.setCheckedNodes(this.sChooseMemberArr)}else{this.$refs.memberLi[e].className="";for(var i=0;i<this.chooseMember.length;i++)this.chooseMember[i].userId==t&&this.chooseMember.splice(i,1);this.$refs.tree.setCheckedNodes(this.chooseMember)}},checkChange:function(e,t){this.chooseMember.length;if(t){if("PERSON"===e.type){for(var a=0;a<this.defaultMember.length;a++)this.defaultMember[a].userId==e.userId&&(this.$refs.memberLi[a].className="li-focus");var s={userId:"",name:""};s.userId=e.userId,s.name=e.name,this.sChooseMemberArr.push(s);var i={};this.chooseMember=this.sChooseMemberArr.reduce((function(e,t){return!i[t.userId]&&(i[t.userId]=e.push(t)),e}),[])}}else{for(var n=0;n<this.defaultMember.length;n++)this.defaultMember[n].userId==e.userId&&(this.$refs.memberLi[n].className="");for(var o=0;o<this.chooseMember.length;o++)this.chooseMember[o].userId==e.userId&&this.chooseMember.splice(o,1)}this.sChooseMemberArr=this.chooseMember},defaultHandleArr:function(e){this.$refs.tree.setCheckedNodes(e)},handleChange:function(){for(var e=this.groupsList.length,t=[],a=0;a<e;a++)this.groupsList[a].groupId===this.valueSelect&&(t=this.groupsList[a].groupMembers);var s=t.length;if(s>0)for(var i=0;i<s;i++){var n={userId:"",name:""};n.userId=t[i].memberId,n.name=t[i].memberName,this.sChooseMemberArr.push(n)}var o={};this.chooseMember=this.sChooseMemberArr.reduce((function(e,t){return!o[t.userId]&&(o[t.userId]=e.push(t)),e}),[]),this.$refs.tree.setCheckedNodes(this.chooseMember)},defaultSetting:function(e){var t=this;o()({url:this.contextPath+"/selectUser/setDefaultGroup?groupId=".concat(e),method:"get"}).then((function(e){t.$message({offset:150,message:e.data.msg,type:"success"}),t.initDefaultData()}))},deleteGroupMember:function(e){var t=this;o()({url:this.contextPath+"/selectUser/deleteGroup?groupId=".concat(e),method:"get"}).then((function(e){t.$message({offset:150,message:e.data.msg,type:"success"}),t.initDefaultData();var a=t.options.length;1==a&&(t.options=[])}))},tagClose:function(e){for(var t=0;t<this.chooseMember.length;t++)this.chooseMember[t].userId==e&&this.chooseMember.splice(t,1);this.$refs.tree.setCheckedNodes(this.chooseMember)},defaultDelete:function(e){for(var t=0;t<this.chooseMember.length;t++)this.chooseMember[t].userId==e&&this.chooseMember.splice(t,1);this.$refs.tree.setCheckedNodes(this.chooseMember)},all_delete:function(){this.$refs.tree.setCheckedKeys([])},save_group_name:function(){var e=this.editInput,t=this;if(""===e)this.$message({offset:150,message:"请输入关键字搜索"});else if(e.length>=20)this.$message({offset:150,message:"请输入小于20字符"});else{var a=[];this.defaultChoose(a,this.chooseMember,"edit-save");var s=JSON.stringify(a),i=new URLSearchParams;i.append("groupName",e),i.append("groupMembers",s),i.append("isDefault",this.switchValue);var n=this.contextPath+"/selectUser/saveGroup";o.a.post(n,i).then((function(e){t.innerVisible=!1,t.$message({offset:150,message:e.data.msg,type:"success"}),t.initDefaultData()})).catch((function(e){console.log(e)}))}},handleSave:function(){var e=[],t=[],a=[];this.all_delete();for(var s=0;s<this.chooseMember.length;s++)e.push(this.chooseMember[s].userId),a.push(this.chooseMember[s].name);var i=e.join(",");this.$emit("update-value",i,a),this.defaultChoose(t,this.chooseMember,"save");var n=JSON.stringify(t),l=new URLSearchParams;l.append("selectUsers",n);var r=this.contextPath+"/selectUser/saveSelectUser";o.a.post(r,l).then((function(e){}));var c=new URLSearchParams;c.append("roleId",i),c.append("userIds",this.userId)},defaultChoose:function(e,t,a){return"edit-save"==a?(t.forEach((function(t,a,s){var i={memberId:"",memberName:""};i.memberId=t.userId,i.memberName=t.name,e.push(i)})),e):(t.forEach((function(t,a,s){var i={userId:"",userName:""};i.userId=t.userId,i.userName=t.name,e.push(i)})),e)}}},r=l,c=(a("c489"),a("4ac2")),u=Object(c["a"])(r,s,i,!1,null,"9fec0eb0",null);t["a"]=u.exports}}]);