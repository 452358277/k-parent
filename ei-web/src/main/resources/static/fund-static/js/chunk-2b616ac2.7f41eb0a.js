(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b616ac2","chunk-2d0deb05"],{"1b623":function(e,t,a){},6979:function(e,t,a){"use strict";a("1b623")},"875e":function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));a("a450"),a("fc02"),a("8dee"),a("3269");function s(e,t,a,s,l){var o=top.document.documentElement.clientHeight-50,i=n();"IE10"==i&&(o=top.document.documentElement.clientHeight-50),""!=s&&s>o&&(s=o),layer.open({type:2,title:e,shadeClose:!1,offset:"auto",shade:[.8,"#393D49"],area:[a,s],tips:[1,"#c00"],scrollbar:!1,content:t,end:l})}function n(){var e=navigator.userAgent,t=e.indexOf("Opera")>-1,a=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!t,s=e.indexOf("Windows NT 6.1; Trident/7.0;")>-1&&!a,n=e.indexOf("Firefox")>-1,l=e.indexOf("Safari")>-1&&-1==e.indexOf("Chrome"),o=e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1;if(a){var i=new RegExp("MSIE (\\d+\\.\\d+);");i.test(e);var u=parseFloat(RegExp["$1"]);return 7==u?"IE7":8==u?"IE8":9==u?"IE9":10==u?"IE10":11==u?"IE11":"0"}return n?"FF":t?"Opera":l?"Safari":o?"Chrome":s?"Edge":void 0}function l(e,t){var a=e;return-1==e.indexOf("?")?a+="?":a+="&",$.isPlainObject(t)?a+=$.param(t):a+=t,a}function o(e){var t=decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null;return t?t.indexOf("/")>-1?t.split("/")[0]:t:""}},e1e1:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createBox"},[a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      基金名称\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.writeFundName,loading:e.FundLoading},on:{change:e.getFundInfo},model:{value:e.value.fundName,callback:function(t){e.$set(e.value,"fundName",t)},expression:"value.fundName"}},e._l(e.selectFundList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      基金管理人\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{"margin-right":"20px",width:"100%"},attrs:{filterable:"","reserve-keyword":"",remote:"",placeholder:"请输入关键词","remote-method":e.fundManagementPeople,loading:e.loading},on:{change:e.selectFundPeopleHandel},model:{value:e.value.mcName,callback:function(t){e.$set(e.value,"mcName",t)},expression:"value.mcName"}},e._l(e.fundPeople,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("button",{on:{click:e.addFundPeople}},[e._v("新增管理人")])],1)],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      基金形式\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.value.fundStruct,callback:function(t){e.$set(e.value,"fundStruct",t)},expression:"value.fundStruct"}},e._l(e.fundType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      基金类别\n    ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},e._l(e.fundAttributeList,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value},model:{value:e.value.fundGenre,callback:function(t){e.$set(e.value,"fundGenre",t)},expression:"value.fundGenre"}},[e._v(e._s(t.label))])})),1)],1),e._v(" "),"2"===e.value.platProp?a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      是否需要合规审查\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},e._l(e.trueOrFalse,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value},model:{value:e.value.isFit,callback:function(t){e.$set(e.value,"isFit",t)},expression:"value.isFit"}},[e._v(e._s(t.label))])})),1),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[a("el-tooltip",{attrs:{content:"该二级基金用于投资国家基金",placement:"top",effect:"light"}},[a("div",[e._v("是否为国家专项投资基金")])]),e._v(" "),a("span",{staticClass:"mustIn"},[e._v("*")])],1),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},e._l(e.trueOrFalse,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value},model:{value:e.value.isExcept,callback:function(t){e.$set(e.value,"isExcept",t)},expression:"value.isExcept"}},[e._v(e._s(t.label))])})),1)],1):e._e(),e._v(" "),"2"!==e.value.platProp?a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      是否需要合规审查\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:20}},e._l(e.trueOrFalse,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value},model:{value:e.value.isFit,callback:function(t){e.$set(e.value,"isFit",t)},expression:"value.isFit"}},[e._v(e._s(t.label))])})),1)],1):e._e(),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      法定代表人或执行事务合伙人\n    ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v(e._s(e.value.legalPerson))]),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      统一社会信用代码\n    ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v(e._s(e.value.socialCode))])],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      组织机构代码\n    ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v(e._s(e.value.orgnCode))]),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      基金注册日期\n    ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[e._v(e._s(e.value.setupDt))])],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      基金属性\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%","margin-right":"3px"},attrs:{placeholder:"请选择"},on:{change:e.getSubPlatPropList},model:{value:e.value.platProp,callback:function(t){e.$set(e.value,"platProp",t)},expression:"value.platProp"}},e._l(e.platPropList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),e.subPlatPropList?a("el-select",{staticStyle:{width:"100%","margin-left":"3px"},attrs:{placeholder:"请选择"},on:{change:e.getSubPlatPropValue},model:{value:e.value.subPlatProp,callback:function(t){e.$set(e.value,"subPlatProp",t)},expression:"value.subPlatProp"}},e._l(e.subPlatPropList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      基金状态\n      "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:"10008"===e.value.mcId},model:{value:e.value.fundSts,callback:function(t){e.$set(e.value,"fundSts",t)},expression:"value.fundSts"}},e._l(e.screenList.type3,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-row",{staticClass:"infoRow",staticStyle:{"border-bottom":"1px solid #d8dcf0"},attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n      基金注册地址\n    ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:20}},[e._v(e._s(e.value.regAdd))])],1),e._v(" "),a("span",{staticClass:"btnBox",staticStyle:{"margin-bottom":"0px","margin-top":"20px","justify-content":"flex-end"}},[a("el-button",{on:{click:e.newCreateCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.newCreateSure}},[e._v("确 定")])],1),e._v(" "),a("el-dialog",{attrs:{title:"新增基金管理人",visible:e.addFundDialog,"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!0,width:"50%"},on:{"update:visible":function(t){e.addFundDialog=t},close:e.addFundModal}},[a("el-row",{staticClass:"infoRow",attrs:{align:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:6}},[e._v("\n            基金管理人\n        ")]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:18}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"","remote-method":e.remoteMethod,loading:e.loading,placeholder:"请选择"},on:{change:e.getFundName},model:{value:e.newFundInfo.mcId,callback:function(t){e.$set(e.newFundInfo,"mcId",t)},expression:"newFundInfo.mcId"}},e._l(e.managementNameList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{align:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:6}},[e._v("\n            基金管理人登记情况\n            "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:18}},e._l(e.registerList,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value},model:{value:e.newFundInfo.isRegister,callback:function(t){e.$set(e.newFundInfo,"isRegister",t)},expression:"newFundInfo.isRegister"}},[e._v(e._s(t.label))])})),1)],1),e._v(" "),a("el-row",{staticClass:"infoRow",attrs:{align:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:6}},[e._v("\n            管理人登记号\n            "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:18}},[a("el-input",{model:{value:e.newFundInfo.registerNo,callback:function(t){e.$set(e.newFundInfo,"registerNo",t)},expression:"newFundInfo.registerNo"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addFundDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addFundManage("save")}}},[e._v("保 存")])],1)],1)],1)},n=[],l=(a("8dee"),a("aa18"),a("982e"),a("fc02"),a("1bc7"),a("698e")),o=a("e19c"),i=a("875e"),u={name:"NewCreate",props:{screenList:Object,values:Object},data:function(){return{value:this.values,options:[],fundPeopleValue:[],fundStatus:this.platPropList,fundType:[],fundPeople:[],addFundDialog:!1,newFundInfo:{mcId:"",isRegister:"",registerNo:"",fundId:""},selectfundPeople:"",foundFundName:!1,checkedFundName:"",fundMcList:"",firstList:"",loading:!1,managementNameList:[],FundLoading:!1,selectFundList:[],url:o["a"],fundCodeNum:"",mcName:"",mcId:"",platPropList:"",subPlatPropList:"",fundAttributeList:"",trueOrFalse:"",registerList:[]}},watch:{values:{handler:function(e,t){this.values=e,this.value=e},deep:!0}},mounted:function(){this.getParentId(1011,"fundAttributeList"),this.getParentId(204,"platPropList"),this.getParentId(102,"trueOrFalse"),this.getParentId(249,"registerList"),this.getParentId(210,"fundType","1,2,3")},methods:{getParentId:function(e,t){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(sessionStorage.getItem("code".concat(e))){var n=[];if(s){var o=s.split(",");JSON.parse(sessionStorage.getItem("code".concat(e))).forEach((function(e){o.includes(e.value)&&n.push(e)}))}else n=JSON.parse(sessionStorage.getItem("code".concat(e)));this[t]=n}else l["a"].getCodeByParentId({parentId:e}).then((function(n){var l=[];if(s){var o=s.split(",");n.data.data.options.forEach((function(e){o.includes(e.value)&&l.push(e)}))}else l=n.data.data.options;a[t]=l,sessionStorage.setItem("code".concat(e),JSON.stringify(n.data.data.options))}))},addFundModal:function(){this.newFundInfo={}},getPlatProp:function(){var e=this;l["a"].getCodeByParentId({parentId:204}).then((function(t){var a=[];t.data.data.options.length>0&&(a=t.data.data.options,e.platPropList=a)}))},getsubPlatProp:function(e){var t=this;this.subPlatPropList=null,this.value.subPlatProp="",l["a"].getCodeByParentId({parentId:"204"+e}).then((function(e){e.data.data.options.length>0?t.subPlatPropList=e.data.data.options:t.subPlatPropList=null}))},getSubPlatPropList:function(e){this.platProp=e,this.getsubPlatProp(e)},getSubPlatPropValue:function(e){},writeFundName:function(e){var t=this;e?(this.FundLoading=!0,l["a"].QCCSearchData({keyword:e.replace(/\s+/g,"")}).then((function(e){var a=JSON.parse(e.data.data.value);t.FundLoading=!1,null!==a.Result&&(t.selectFundList=a.Result.map((function(e){return{value:e.CreditCode,label:e.Name}})))}))):this.FundLoading=!0},remoteMethod:function(e){var t=this;e?(this.FundLoading=!0,l["a"].QCCSearchData({keyword:e.replace(/\s+/g,"")}).then((function(e){var a=JSON.parse(e.data.data.value);t.FundLoading=!1,null!==a.Result&&(t.managementNameList=a.Result.map((function(e){return{value:e.CreditCode,label:e.Name}})))}))):this.FundLoading=!0},getFundInfo:function(e){var t=this;this.$forceUpdate(),this.fundCodeNum=e,l["a"].QCCDataGetDetailsByName({keyword:this.fundCodeNum}).then((function(e){var a=JSON.parse(e.data.data.value).Result;return null===a?(t.$message({offset:150,type:"warning",message:"查询无结果，请重新选择合适数据"}),t.fundCodeNum="",t.value.fundName="",!1):(t.value.fundName=a.Name,t.value.legalPerson=a.OperName,t.value.socialCode=a.CreditCode,t.value.orgnCode=a.OrgNo,t.value.setupDt=a.TermStart?a.TermStart.substr(0,10):"",t.value.regAdd=a.Address,a)})).then((function(e){return l["a"].saveEntBaseInfo(e)})).then((function(e){if("系统异常"===e.data.msg)return t.value.fundName="",t.value.legalPerson="",t.value.socialCode="",t.value.orgnCode="",t.value.setupDt="",t.value.regAdd="",void t.$message({offset:150,type:"warning",message:"网络波动，请重新选择"});t.value.objectId=e.data.msg,t.value.enteId=e.data.msg}))},choiceCompany:function(){},choiceGP:function(){},fundStatusChange:function(e){2===e.length?(this.value.platProp=e[0],this.value.subPlatProp=e[1]):(this.value.platProp=e[0],this.value.subPlatProp="")},getFundName:function(e){var t=this;this.$forceUpdate(),this.managementNameList.forEach((function(a){a.value===e&&(t.newFundInfo.mcName=a.label)})),l["a"].QCCDataGetDetailsByName({keyword:e}).then((function(e){var a=JSON.parse(e.data.data.value).Result;return null===a?(t.$message({offset:150,type:"warning",message:"查询无结果，请重新选择合适数据"}),!1):a})).then((function(e){return l["a"].saveEntBaseInfo(e).then((function(e){if("系统异常"===e.data.msg)return t.value.fundName="",t.value.legalPerson="",t.value.socialCode="",t.value.orgnCode="",t.value.setupDt="",t.value.regAdd="",void t.$message({offset:150,type:"warning",message:"网络波动，请重新选择"});t.newFundInfo.enteId=e.data.msg}))}))},fundManagementPeople:function(e){var t=this;if(e){this.loading=!0;var a={pageSize:10,currPage:1,mcName:e.replace(/\s+/g,""),fundId:""};l["a"].fundMcInfoList(a).then((function(e){t.loading=!1,t.fundPeople=e.data.data.map((function(e){return{value:e.mcId,label:e.mcName}}))}))}else this.loading=!0},selectFundPeopleHandel:function(e){var t=this;this.$forceUpdate(),this.value.mcId=e,"10008"===e&&(this.value.fundSts="1"),this.fundPeople.forEach((function(a){a.value===e&&(t.value.mcName=a.label)}))},closeFundPeople:function(e){this.fundPeopleValue=[],this.selectfundPeople=""},addFundPeople:function(){this.addFundDialog=!0},newCreateSure:function(){var e=this;return this.value.fundSrc=1,this.value.groupId=Object(i["b"])("groupId")?Object(i["b"])("groupId"):"1",this.value.fundName&&""!==this.value.fundName?null===this.value.fundStruct||void 0===this.value.fundStruct||""===this.value.fundStruct?(this.$message({offset:150,type:"warning",message:"请选择基金形式"}),!1):this.value.mcName&&""!==this.value.mcName?this.value.isFit&&""!==this.value.isFit?this.value.platProp&&""!==this.value.platProp?this.value.fundSts&&""!==this.value.fundSts?void(!this.subPlatPropList||this.value.subPlatProp?(this.value.status="0",this.value.updateDt="",l["a"].saveFundInfo(this.value).then((function(t){"成功"===t.data.msg?(e.$message({offset:150,type:"success",message:"新增成功"}),e.$emit("getNewCardList"),e.$emit("closeModal")):e.$message({offset:150,type:"warning",message:t.data.msg})})).catch((function(t){e.$message({offset:150,type:"error",message:"新增失败"}),e.$emit("closeModal")}))):this.$message({offset:150,type:"warning",message:"请选择完整基金属性"})):(this.$message({offset:150,type:"warning",message:"请选择基金状态"}),!1):(this.$message({offset:150,type:"warning",message:"请选择基金属性"}),!1):(this.$message({offset:150,type:"warning",message:"请选择是否需要合规审查"}),!1):(this.$message({offset:150,type:"warning",message:"请选择基金管理人"}),!1):(this.$message({offset:150,type:"warning",message:"请填写基金名称"}),!1)},newCreateCancel:function(){this.$emit("closeModal")},addFundManage:function(){var e=this,t=this.newFundInfo;this.newFundInfo.mcId&&""!==this.newFundInfo.mcId?this.newFundInfo.isRegister&&""!==this.newFundInfo.isRegister?"2"!==this.newFundInfo.isRegister||this.newFundInfo.registerNo&&""!==this.newFundInfo.registerNo?(t.groupId="1",l["a"].fundMcInfoAdd(t).then((function(t){"1"===t.data.status?e.$message({offset:150,type:"warning",message:"".concat(t.data.msg)}):"成功"===t.data.msg?e.$message({offset:150,type:"success",message:"新增基金管理人成功"}):e.$message({offset:150,type:"warning",message:"".concat(t.data.msg)}),e.addFundDialog=!1})).catch((function(t){e.$message({offset:150,type:"success",message:"新增失败"}),e.addFundDialog=!1}))):this.$message({offset:150,type:"warning",message:"请填写管理人登记号"}):this.$message({offset:150,type:"warning",message:"请选择管理人登记情况"}):this.$message({offset:150,type:"warning",message:"请选择管理人"})}}},r=u,c=(a("6979"),a("4ac2")),d=Object(c["a"])(r,s,n,!1,null,"717ff54d",null);t["default"]=d.exports}}]);