(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9bd5f22"],{"48f3":function(t,a,e){"use strict";e("997b")},5679:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-table",{attrs:{data:t.tableData.data,border:"",size:"small","header-cell-style":{background:"#FEFAFA",color:"#333",fontSize:"12px",textAlign:"center"}}},[e("el-table-column",{attrs:{label:"基金名称",prop:"companyName","min-width":"320"}}),t._v(" "),e("el-table-column",{attrs:{label:"资金去向",prop:"financeTypeName","min-width":"100"}}),t._v(" "),e("el-table-column",{attrs:{label:"收/付款类型",prop:"recBillTypeName","min-width":"100"}}),t._v(" "),e("el-table-column",{attrs:{label:"录入人",prop:"createBy",width:"300"}}),t._v(" "),e("el-table-column",{attrs:{label:"录入时间",prop:"createDt",width:"103"}}),t._v(" "),e("el-table-column",{attrs:{label:"往来单位类型",prop:"customerTypeName"}}),t._v(" "),e("el-table-column",{attrs:{label:"往来单位",prop:"customerName",width:"300"}}),t._v(" "),e("el-table-column",{attrs:{label:"实际收/付款金额（元）",prop:"amt",width:"150",align:"right"}}),t._v(" "),e("el-table-column",{attrs:{label:"收/付款人名称",prop:"assseq",width:"300"}}),t._v(" "),e("el-table-column",{attrs:{label:"收/付款银行",prop:"assCustomerName",width:"180"}}),t._v(" "),e("el-table-column",{attrs:{label:"收/付款账号",prop:"assCustomerName",width:"180"}}),t._v(" "),e("el-table-column",{attrs:{label:"备注",prop:"remark",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{label:"收/付款凭证",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("upLoad",{attrs:{"hidden-upload":!0,"context-path":t.url.upApi},model:{value:a.row.descFile,callback:function(e){t.$set(a.row,"descFile",e)},expression:"desc.row.descFile"}})]}}])})],1),t._v(" "),e("el-pagination",{staticStyle:{"margin-top":"5px"},attrs:{"current-page":t.tableData.currPage,"page-size":t.tableData.pageSize,layout:"total, prev, pager, next, jumper",total:t.tableData.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},s=[],o=e("e19c"),l=e("58b9"),i=e("698e"),c={name:"expendTable",props:{tableData:{type:Object,default:function(){return{data:[],currPage:1,pageSize:5,totalCount:0}}},bankId:{type:String,default:""}},components:{upLoad:l["default"]},mounted:function(){this.getTableList()},data:function(){return{url:o["a"]}},methods:{getTableList:function(){var t=this;i["a"].accountLedgerList({pageSize:this.tableData.pageSize,currPage:this.tableData.currPage,bankId:this.bankId,fundId:0}).then((function(a){t.tableData=a.data}))},handleSizeChange:function(t){this.tableData.pageSize=t,this.getTableList()},handleCurrentChange:function(t){this.tableData.currPage=t,this.getTableList()}}},r=c,u=e("4ac2"),d=Object(u["a"])(r,n,s,!1,null,"7c9e7c81",null);a["default"]=d.exports},"997b":function(t,a,e){},cf34:function(t,a,e){"use strict";e.r(a);var n,s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"parentFund"},[e("div",{staticClass:"btnBox"},[t._l(t.buttonList,(function(a){return["新增"===a?e("button",{on:{click:t.addTabel}},[e("i",{staticClass:"iconfont iconjiahao"}),t._v("\n          新建\n        ")]):t._e(),t._v(" "),"编辑"===a?e("button",{on:{click:t.editTable}},[e("i",{staticClass:"iconfont iconbianji"}),t._v("\n          编辑\n        ")]):t._e()]}))],2),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{border:"","header-cell-style":{background:"#FEFAFA",color:"#333",fontSize:"12px",textAlign:"center"},data:t.parentFundList.data},on:{"selection-change":t.handleSelectionBank,"expand-change":t.expandRow}},[e("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{type:"expand",width:"55"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("expend-table",{attrs:{tableDate:t.row.cashList,bankId:t.row.bankId}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"银行名称",prop:"bankName","min-width":"250"}}),t._v(" "),e("el-table-column",{attrs:{label:"账户性质",prop:"accountTypeName",width:"150"}}),t._v(" "),e("el-table-column",{attrs:{label:"银行账号",prop:"accounts",width:"230"}}),t._v(" "),e("el-table-column",{attrs:{label:"资金额度(万元)",prop:"capitalQuota",width:"160"}}),t._v(" "),e("el-table-column",{attrs:{label:"实到金额(万元)",prop:"arrivalAmount",width:"160"}}),t._v(" "),e("el-table-column",{attrs:{label:"账户余额(元)",prop:"ledgerMagVO.accountBalance",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{label:"最新交易日期",prop:"ledgerMagVO.createDt",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{label:"最新交易金额(元)",prop:"ledgerMagVO.amt",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},["1"===a.row.status?e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.openBank(a.row)}}},[t._v("启用\n            ")]):t._e(),t._v(" "),"0"===a.row.status?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.stopBank(a.row)}}},[t._v("禁用")]):t._e()],1)]}}])})],1),t._v(" "),e("el-dialog",{attrs:{title:t.isEdit?"编辑信息":"新增银行",visible:t.bankTabelShow,width:"45%"},on:{"update:visible":function(a){t.bankTabelShow=a},close:t.bankTabelClose}},[e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:6}},[t._v("\n          银行名称\n          "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:18}},[e("el-select",{staticStyle:{width:"70%"},attrs:{filterable:"",remote:"",disabled:t.isEdit,size:"small","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.writeBankName,loading:t.loading},on:{change:t.getBankInfo},model:{value:t.BankInfo.bankId,callback:function(a){t.$set(t.BankInfo,"bankId",a)},expression:"BankInfo.bankId"}},t._l(t.selectBankList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),e("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:t.addNewBank}},[t._v("\n            新增银行\n          ")])],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:6}},[t._v("\n          账套\n          "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:18}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"64",autocomplete:"off",size:"small"},model:{value:t.BankInfo.accountName,callback:function(a){t.$set(t.BankInfo,"accountName",a)},expression:"BankInfo.accountName"}})],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:6}},[t._v("\n          账户性质\n          "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:18}},[e("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},on:{change:t.getNumberType},model:{value:t.BankInfo.accountType,callback:function(a){t.$set(t.BankInfo,"accountType",a)},expression:"BankInfo.accountType"}},t._l(t.numberTypeList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:6}},[t._v("\n          银行账号\n          "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:18}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"64",autocomplete:"off",size:"small"},model:{value:t.BankInfo.accounts,callback:function(a){t.$set(t.BankInfo,"accounts",a)},expression:"BankInfo.accounts"}})],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:6}},[t._v("\n          资金额度(万元)\n          "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:18}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"15",size:"small"},model:{value:t.BankInfo.capitalQuota,callback:function(a){t.$set(t.BankInfo,"capitalQuota",a)},expression:"BankInfo.capitalQuota"}})],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:6}},[t._v("\n          实到金额(万元)\n          "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:18}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"15",size:"small"},model:{value:t.BankInfo.arrivalAmount,callback:function(a){t.$set(t.BankInfo,"arrivalAmount",a)},expression:"BankInfo.arrivalAmount"}})],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.bankTabelShow=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.submitCreateBank}},[t._v("确 定")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"新建银行",visible:t.bankVisible,width:"50%"},on:{"update:visible":function(a){t.bankVisible=a},close:t.newBankModalClose}},[e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:6}},[t._v("\n          托管银行名称\n          "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:18}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",size:"small","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.writeNewBankName,loading:t.loading},on:{change:t.getNewBankInfo},model:{value:t.newBankInfo.bankId,callback:function(a){t.$set(t.newBankInfo,"bankId",a)},expression:"newBankInfo.bankId"}},t._l(t.selectNewBankList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:6}},[t._v("\n          联系人\n        ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:18}},[e("el-input",{attrs:{size:"small"},model:{value:t.newBankInfo.contacts,callback:function(a){t.$set(t.newBankInfo,"contacts",a)},expression:"newBankInfo.contacts"}})],1)],1),t._v(" "),e("el-row",{staticClass:"boxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"boxCol",attrs:{span:6}},[t._v("\n          联系电话\n        ")]),t._v(" "),e("el-col",{staticClass:"boxCol",attrs:{span:18}},[e("el-input",{attrs:{size:"small"},model:{value:t.newBankInfo.phone,callback:function(a){t.$set(t.newBankInfo,"phone",a)},expression:"newBankInfo.phone"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"reportBtn",on:{click:t.cancelNewBank}},[t._v("取 消")]),t._v(" "),e("el-button",{staticClass:"reportBtn",attrs:{type:"primary"},on:{click:t.submitNewBank}},[t._v("确 定")])],1)],1)],1)},o=[],l=e("2559"),i=(e("8dee"),e("aa18"),e("982e"),e("fc02"),e("1bc7"),e("698e")),c=e("58b9"),r=e("e19c"),u=e("5679"),d=(n={name:"ParentFundAccount",components:{upLoad:c["default"]},data:function(){return{parentFundList:{data:[{}],pageSize:10,currPage:1,groupId:1},cashFlow:[{}],isEdit:!1,fundId:0,fundInfo:null,bankTabelShow:!1,BankInfo:{},newBankInfo:{},loading:!1,selectBankList:[],bankVisible:!1,selectNewBankList:[],choiceBankList:[],url:r["a"],numberTypeList:[{label:"相纸1",value:"1"},{label:"相纸1",value:"1"}],buttonList:[]}}},Object(l["a"])(n,"components",{expendTable:u["default"]}),Object(l["a"])(n,"watch",{parentFundList:{handler:function(t,a){this.parentFundList=t},deep:!0}}),Object(l["a"])(n,"mounted",(function(){var t=this;this.getFundInfo().then((function(a){t.fundInfo=a.data.data.model})).then((function(a){t.getBankRelateList()})),this.getParentId(1014,"numberTypeList");var a=[];this.$route.meta.buttons.forEach((function(t){"50060101"===t.code&&a.push("新增"),"50060102"===t.code&&a.push("编辑")})),this.buttonList=a})),Object(l["a"])(n,"methods",{getParentId:function(t,a){var e=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(sessionStorage.getItem("code".concat(t))){var s=[];if(n){var o=n.split(",");JSON.parse(sessionStorage.getItem("code".concat(t))).forEach((function(t){o.includes(t.value)&&s.push(t)}))}else s=JSON.parse(sessionStorage.getItem("code".concat(t)));this[a]=s}else i["a"].getCodeByParentId({parentId:t}).then((function(s){var o=[];if(n){var l=n.split(",");s.data.data.options.forEach((function(t){l.includes(t.value)&&o.push(t)}))}else o=s.data.data.options;e[a]=o,sessionStorage.setItem("code".concat(t),JSON.stringify(s.data.data.options))}))},getNumberType:function(t){},submitCreateBank:function(){var t=this;if(this.BankInfo.fundId="0",this.BankInfo.bankId||""===this.BankInfo.bankId)if(this.BankInfo.accountName||""===this.BankInfo.accountName)if(this.BankInfo.accountType||""===this.BankInfo.accountType)if(this.BankInfo.accounts||""===this.BankInfo.accounts)if(this.BankInfo.arrivalAmount||""===this.BankInfo.arrivalAmount)if(this.BankInfo.capitalQuota||""===this.BankInfo.capitalQuota){var a=/^\d+(\.\d+)?$/;a.test(this.BankInfo.arrivalAmount)?a.test(this.BankInfo.capitalQuota)?!0===this.isEdit?i["a"].updateBankRelatenfo(this.BankInfo).then((function(a){"成功"===a.data.msg&&(t.$message({offset:150,type:"success",message:"编辑成功"}),t.bankTabelShow=!1,t.getBankRelateList())})):i["a"].newbankRelateList(this.BankInfo).then((function(a){"成功"===a.data.msg?t.$message({offset:150,type:"success",message:"新增成功"}):t.$message({offset:150,type:"warning",message:a.data.msg}),t.bankTabelShow=!1,t.getBankRelateList()})):this.$message({offset:150,type:"warning",message:"请正确填写资金额度，格式为数字"}):this.$message({offset:150,type:"warning",message:"请正确填写实到金额，格式为数字"})}else this.$message({offset:150,type:"warning",message:"请填写资金额度"});else this.$message({offset:150,type:"warning",message:"请填写实到金额"});else this.$message({offset:150,type:"warning",message:"请填写账户号"});else this.$message({offset:150,type:"warning",message:"请选择账户性质"});else this.$message({offset:150,type:"warning",message:"请填写账套"});else this.$message({offset:150,type:"warning",message:"请选择银行"})},getBankRelateList:function(){var t=this,a={pageSize:100,currPage:1};i["a"].bankRelateList(a).then((function(a){t.parentFundList=a.data,t.parentFundList.data.forEach((function(a){a.fundId,a.bankId;t.parentFundList.data.forEach((function(t){t.cashList&&0!==t.cashList.length||(t.cashList={data:[],currPage:1,pageSize:0,totalCount:0})}))}))}))},getAccountLedgerList:function(t){var a=this,e=this.parentFundList.data;i["a"].accountLedgerList(t).then((function(n){e.forEach((function(a){a.bankId===t.bankId&&(a.cashList=n.data.data)})),a.parentFundList.data=e}))},openTableRow:function(t,a){var e={pageSize:"100",currPage:"1",fundId:t.fundId,bankId:t.bankId};this.getAccountLedgerList(e)},addTabel:function(){this.bankTabelShow=!0,this.isEdit=!1},bankTabelClose:function(){this.BankInfo={}},editTable:function(){1===this.choiceBankList.length?(this.bankTabelShow=!0,this.isEdit=!0,this.BankInfo={bankId:this.choiceBankList[0].bankId,fundId:this.choiceBankList[0].fundId,accounts:this.choiceBankList[0].accounts,oldAccounts:this.choiceBankList[0].accounts,accountName:this.choiceBankList[0].accountName,capitalQuota:this.choiceBankList[0].capitalQuota,arrivalAmount:this.choiceBankList[0].arrivalAmount,accountType:this.choiceBankList[0].accountType},this.selectBankList=[{label:this.choiceBankList[0].bankName,value:this.choiceBankList[0].bankId}]):this.$message({offset:150,type:"warning",message:"请选择一条数据编辑"})},saveTable:function(){this.isEdit=!1},getFundInfo:function(){return i["a"].getFundInfo({fundId:this.fundId})},getBankInfo:function(t){},writeBankName:function(t){var a=this;t?(this.loading=!0,i["a"].bankInfoList({bankName:t.replace(/\s+/g,"")}).then((function(t){var e=t.data.data;a.loading=!1,e.length>0&&(a.selectBankList=e.map((function(t){return{value:t.bankId,label:t.bankName}})))}))):this.loading=!0},addNewBank:function(){this.bankVisible=!0},newBankModalClose:function(){this.newBankInfo={}},getNewBankInfo:function(t){var a=this;i["a"].QCCDataGetDetailsByName({keyword:t}).then((function(t){var e=JSON.parse(t.data.data.value).Result;return null===e?(a.$message({offset:150,type:"warning",message:"查询无结果，请重新选择合适数据"}),void(a.newBankInfo.bankName="")):(a.newBankInfo.bankName=e.Name,e)})).then((function(t){return i["a"].saveEntBaseInfo(t)})).then((function(t){if("系统异常"===t.data.msg)return a.newBankInfo.bankName="",a.newBankInfo.bankId="",void a.$message({offset:150,type:"warning",message:"网络波动，请重新选择"});a.newBankInfo.enteId=t.data.msg})).catch((function(t){}))},writeNewBankName:function(t){var a=this;t?(this.loading=!0,i["a"].QCCSearchData({keyword:t.replace(/\s+/g,"")}).then((function(t){var e=JSON.parse(t.data.data.value);a.loading=!1,null==e.Result||(a.selectNewBankList=e.Result.map((function(t){return{value:t.CreditCode,label:t.Name}})))}))):this.loading=!0},cancelNewBank:function(){this.bankVisible=!1},submitNewBank:function(){var t=this;this.newBankInfo.bankId&&""!==this.newBankInfo.bankId?(i["a"].addBank(this.newBankInfo).then((function(a){"成功"===a.data.msg?t.$message({offset:150,type:"success",message:"新增成功"}):t.$message({offset:150,type:"warning",message:"".concat(a.data.msg)})})),this.bankVisible=!1):this.$message({offset:150,type:"warning",message:"请选择托管银行名称"})},handleSelectionBank:function(t){this.choiceBankList=t},openBank:function(t){var a=this,e={bankId:t.bankId,fundId:t.fundId,accounts:t.accounts,status:"0"};i["a"].openOrCloseBankRelatenfo(e).then((function(t){"0"===t.data.status&&(a.$message({offset:150,type:"success",message:"启用成功"}),a.getBankRelateList())}))},expandRow:function(t,a){},stopBank:function(t){var a=this,e={bankId:t.bankId,fundId:t.fundId,accounts:t.accounts,status:"1"};i["a"].openOrCloseBankRelatenfo(e).then((function(t){"0"===t.data.status&&(a.$message({offset:150,type:"success",message:"禁用成功"}),a.getBankRelateList())}))},checkBankInfoNumber:function(t,a){var e=/^\d+(\.\d+)?$/;if(!t||""!==t)return e.test(t)?void 0:(this.$message({offset:150,showClose:!0,message:"请输入数字",type:"warning"}),void this.$set(this.BankInfo,"".concat(a),""))},checkNewBankInfoNumber:function(t,a){var e=/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/;if(!t||""!==t)return e.test(t)?void 0:(this.$message({offset:150,showClose:!0,message:"请输入正确的手机号",type:"warning"}),void this.$set(this.newBankInfo,"".concat(a),""))},getChildCashList:function(t){},handleSizeChange:function(t,a){},handleCurrentChange:function(t){}}),n),f=d,p=(e("48f3"),e("4ac2")),b=Object(p["a"])(f,s,o,!1,null,null,null);a["default"]=b.exports}}]);