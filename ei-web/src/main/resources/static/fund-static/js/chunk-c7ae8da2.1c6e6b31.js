(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c7ae8da2"],{"06a7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"userManagement"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("用户管理页面")]),e._v(" "),a("div",{staticClass:"btn-box",staticStyle:{"margin-bottom":"20px"}},[a("button",{on:{click:e.addUser}},[e._v("新增用户")]),e._v(" "),a("button",{on:{click:e.editUser}},[e._v("编辑用户")]),e._v(" "),a("button",{on:{click:e.distributionUser}},[e._v("分配基金")]),e._v(" "),a("button",{on:{click:e.deleteUser}},[e._v("删除用户")])]),e._v(" "),a("el-table",{attrs:{data:e.tableData,"header-cell-style":{background:"#FEFAFA",color:"#333",fontSize:"12px",textAlign:"center"},border:"","tooltip-effect":"dark"},on:{"selection-change":e.getChoiceList}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginname",label:"登录名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sexyName",label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobilephone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}})],1),e._v(" "),a("paginations1",{attrs:{total:e.total,page:e.pages.page,limit:e.pages.limit},on:{"update:page":function(t){return e.$set(e.pages,"page",t)},"update:limit":function(t){return e.$set(e.pages,"limit",t)},pagination:e.paginationsChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.modalStatus?"编辑":"新建","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.userInfoModal,width:"60%"},on:{"update:visible":function(t){e.userInfoModal=t}}},[a("el-form",{ref:"userForm",attrs:{model:e.userInfo,"status-icon":"",rules:e.rules}},[a("el-form-item",{attrs:{label:"真实姓名","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{maxlength:"5",type:"text",autocomplete:"off"},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录名称","label-width":e.formLabelWidth,prop:"nickName"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{maxlength:"16",type:"text",autocomplete:"off"},model:{value:e.userInfo.nickName,callback:function(t){e.$set(e.userInfo,"nickName",t)},expression:"userInfo.nickName"}})],1),e._v(" "),e.modalStatus?e._e():a("el-form-item",{attrs:{label:"用户密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{maxlength:"16",type:"password",autocomplete:"off"},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),e._v(" "),e.modalStatus?e._e():a("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"checkPassword"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{maxlength:"16",type:"password",autocomplete:"off"},on:{change:e.checkPwd},model:{value:e.userInfo.checkPassword,callback:function(t){e.$set(e.userInfo,"checkPassword",t)},expression:"userInfo.checkPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth,prop:"gender"}},e._l(e.genderList,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value},model:{value:e.userInfo.gender,callback:function(t){e.$set(e.userInfo,"gender",t)},expression:"userInfo.gender"}},[e._v(e._s(t.label))])})),1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱","label-width":e.formLabelWidth,prop:"email"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",autocomplete:"off"},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机","label-width":e.formLabelWidth,prop:"phoneNum"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",autocomplete:"off"},model:{value:e.userInfo.phoneNum,callback:function(t){e.$set(e.userInfo,"phoneNum",t)},expression:"userInfo.phoneNum"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.userInfoModal=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitUser}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"分配基金","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.fundModal,width:"60%"},on:{"update:visible":function(t){e.fundModal=t}}},[a("div",{staticClass:"tagBox"},[0==e.fundCheckList.length?a("div",{staticClass:"noList"},[e._v("暂无可分配的基金")]):e._e(),e._v(" "),0!=e.fundCheckList.length?a("el-checkbox-group",{on:{change:e.getTag},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.fundCheckList,(function(t){return a("el-checkbox",{key:t.fundId,attrs:{label:t.fundId}},[e._v(e._s(t.fundName))])})),1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.fundModal=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitFund}},[e._v("确定分配")])],1)])],1)])},i=[],s=(a("4057"),a("1bc7"),a("a450"),a("6a61"),a("571a")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-pagination"},[a("span",{staticClass:"button-first",on:{click:e.toFirst}},[e._v("首页")]),e._v(" "),a("el-pagination",{attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"prev-click":e.prevClickChange,"next-click":e.nextClickChange}}),e._v(" "),a("span",{staticClass:"button-first",on:{click:e.toEnd}},[e._v("末页")]),e._v(" "),a("span",{staticClass:"total"},[e._v("共 "+e._s(e.total)+" 条 ")]),e._v(" "),a("div",{staticClass:"pagination__editor"},[e._v("\n      跳至 "),a("el-input",{attrs:{size:"mini",maxlength:"2"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputKeyEvent(t)}},model:{value:e.internalCurrentPage,callback:function(t){e.internalCurrentPage=e._n(t)},expression:"internalCurrentPage"}}),e._v(" 页\n    ")],1)],1)])],1)},r=[];a("e680");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};(function(){window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame})();var l={name:"Pagination1",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"prev, pager, next"},background:{type:Boolean,default:!1},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},data:function(){return{value:null,internalCurrentPage:1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}},pageCount:{get:function(){return Math.ceil(this.total/this.pageSize)}}},watch:{currentPage:{immediate:!0,handler:function(e){this.internalCurrentPage=e}}},created:function(){},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize})},toFirst:function(){this.$emit("update:page",1),this.$emit("pagination",{page:1,limit:this.pageSize})},toEnd:function(){this.$emit("update:page",this.pageCount),this.$emit("pagination",{page:this.pageCount,limit:this.pageSize})},inputKeyEvent:function(){var e=this.internalCurrentPage>this.pageCount?this.pageCount:this.internalCurrentPage;this.internalCurrentPage=e,this.$emit("update:page",e),this.$emit("pagination",{page:e,limit:this.pageSize})},prevClickChange:function(e){},nextClickChange:function(e){},getValidCurrentPage:function(e){e=parseInt(e,10);var t,a="number"===typeof this.internalPageCount;return a?e<1?t=1:e>this.internalPageCount&&(t=this.internalPageCount):(isNaN(e)||e<1)&&(t=1),(void 0===t&&isNaN(e)||0===t)&&(t=1),void 0===t?e:t}}},u=l,c=(a("4029"),a("4ac2")),d=Object(c["a"])(u,o,r,!1,null,null,null),g=d.exports,p=a("eb1b"),f=a("698e"),m={name:"UserManagement",components:{paginations1:g},data:function(){var e=this,t=function(t,a,n){""===a||void 0==a?n(new Error("请输入密码")):a.length>16||a.length<6?n(new Error("请输入6-16位密码")):(""!==e.userInfo.checkPassword&&e.$refs.userForm.validateField("checkPassword"),n())},a=function(t,a,n){""===a||void 0==a?n(new Error("请再次输入密码")):a!==e.userInfo.password?n(new Error("两次输入密码不一致!")):n()};return{total:0,pages:{page:1,limit:10},tableData:[],modalStatus:0,userInfoModal:!1,userInfo:{},formLabelWidth:"120px",rules:{nickName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{validator:t,trigger:"blur",required:!0}],checkPassword:[{validator:a,trigger:"blur",required:!0}],email:[{required:!0,message:"请输入正确的邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phoneNum:[{required:!0,message:"请输入手机号码",trigger:"blur"},{min:11,max:11,message:"请输入11位手机号码",trigger:"blur"}]},userInfoModalEdit:!1,choiceList:[],fundModal:!1,checkList:[],genderList:[],fundCheckList:[]}},mounted:function(){var e={keyword:"",currPage:this.pages.page,pageSize:this.pages.limit};this.getList(e),this.getCodeByParentIds("101")},methods:{paginationsChange:function(e){this.pages.page=e.page,this.pages.limit=e.limit;var t={keyword:"",currPage:this.pages.page,pageSize:this.pages.limit};this.getList(t)},getCodeByParentIds:function(e){var t=this;Object(p["d"])(e).then((function(a){var n=a.data.options;switch(e){case"101":t.genderList=n;break;default:}}))},getList:function(e){var t=this;Object(p["g"])(e).then((function(e){t.tableData=e.data,t.total=e.totalCount}))},getDetail:function(e){return Object(p["c"])(e).then((function(e){return e}))},addUser:function(){this.modalStatus=0,this.userInfoModal=!0,this.userInfo={name:"",nickName:"",password:"",checkPassword:"",gender:"",email:"",phoneNum:""}},deleteUser:function(){var e=this;if(1!=this.choiceList.length)return this.$message({offset:150,type:"warning",message:"只能选择一条数据"});this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.choiceList[0].id;e.deleteUsers(t)})).catch((function(){layer.msg("已取消删除",{icon:6})}))},deleteUsers:function(e){var t=this;Object(p["b"])(e).then((function(e){if("0"===e.status){var a={keyword:"",currPage:t.pages.page,pageSize:t.pages.limit};return t.getList(a),layer.msg("".concat(e.msg),{icon:6})}layer.msg("".concat(e.msg),{icon:6})}))},editUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.userInfo={},1==this.choiceList.length){e.next=5;break}this.$message({offset:150,type:"warning",message:"只能选择一条数据"}),e.next=13;break;case 5:return this.modalStatus=1,this.userInfoModal=!0,t=this.choiceList[0].id,e.next=10,this.getDetail(t);case 10:a=e.sent,n=a.data,this.userInfo={name:n.name,nickName:n.loginname,email:n.email,phoneNum:n.mobilephone,gender:String(n.sexy)};case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),distributionUser:function(){var e=this;if(1!==this.choiceList.length)this.$message({offset:150,type:"warning",message:"请选择一名用户分配"});else{var t=this.choiceList[0].id;f["a"].fundUserRelateist({userId:t}).then((function(t){var a=[];t.data.data.forEach((function(e){a.push(e.fundId)})),e.checkList=a})),f["a"].getFundInfoList({pageSize:1e4,currPage:1,fundSrc:1,ledgeMagType:1}).then((function(t){e.fundCheckList=t.data.data,e.fundModal=!0}))}},submitUser:function(){var e=this;this.$refs["userForm"].validate((function(t){if(!t)return!1;e.userInfoModal=!1;var a={email:e.userInfo.email,loginname:e.userInfo.nickName,mobilephone:e.userInfo.phoneNum,name:e.userInfo.name,password:e.userInfo.password,sexy:e.userInfo.gender};if(e.modalStatus){var n={email:e.userInfo.email,loginname:e.userInfo.nickName,mobilephone:e.userInfo.phoneNum,name:e.userInfo.name,sexy:e.userInfo.gender,id:e.choiceList[0].id};e.updateUsers(n)}else e.addUsers(a)}))},addUsers:function(e){var t=this;Object(p["a"])(e).then((function(e){if("0"==e.status){var a={keyword:"",currPage:t.pages.page,pageSize:t.pages.limit};return t.getList(a),layer.msg("".concat(e.msg),{icon:6})}layer.msg("".concat(e.msg),{icon:6})}))},updateUsers:function(e){var t=this;Object(p["e"])(e).then((function(e){if("0"==e.status){var a={keyword:"",currPage:t.pages.page,pageSize:t.pages.limit};return t.getList(a),layer.msg("".concat(e.msg),{icon:6})}layer.msg("".concat(e.msg),{icon:6})}))},checkPwd:function(e){this.$refs["userForm"].validate((function(e){if(!e)return!1}))},getChoiceList:function(e){this.choiceList=e},getTag:function(e){},submitFund:function(){var e=this;if(this.checkList.length<1)this.$message({offset:150,type:"warning",message:"请至少选择一个"});else{var t=[],a=this.choiceList[0].id.toString();this.checkList.forEach((function(e){t.push({userId:a,fundId:e})}));var n={relateId:a,list:t};t.map((function(t){e.fundCheckList.forEach((function(e){if(t.fundId===e.fundId)return t.accounts=e.custodianBankNum,t}))})),f["a"].saveFundUserRelate(n).then((function(t){"成功"===t.data.msg?(e.$message({offset:150,type:"success",message:"分配成功"}),e.fundModal=!1):(e.$message({offset:150,type:"warning",message:t.data.msg}),e.fundModal=!1)}))}}}},h=m,b=(a("7ee7"),Object(c["a"])(h,n,i,!1,null,"b1d449c2",null));t["default"]=b.exports},4029:function(e,t,a){"use strict";a("665b")},"665b":function(e,t,a){},"7ee7":function(e,t,a){"use strict";a("e684")},e684:function(e,t,a){}}]);