(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1234e3e5"],{3126:function(t,a,e){"use strict";e("334b")},"334b":function(t,a,e){},fcf9:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"notes_text bankcreate",attrs:{"data-id":"500102"}},[e("el-row",{staticClass:"createBoxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"createBoxCol",attrs:{span:4}},[t._v("\n      基金托管银行\n      "),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),t.isEdit?t._e():e("el-col",{staticClass:"createBoxCol",attrs:{span:20}},[t._v(t._s(t.accountInfo.custodianBank))]),t._v(" "),t.isEdit?e("el-col",{staticClass:"createBoxCol",attrs:{span:20}},[e("el-select",{staticStyle:{width:"400px"},attrs:{filterable:"",remote:"",size:"small","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.writeBankName,loading:t.loading},on:{change:t.getBankInfo},model:{value:t.accountInfo.custodianBankId,callback:function(a){t.$set(t.accountInfo,"custodianBankId",a)},expression:"accountInfo.custodianBankId"}},t._l(t.selectBankList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),e("button",{staticClass:"originalBtn",staticStyle:{"margin-left":"20px"},on:{click:t.addNewBank}},[t._v("\n        新增银行\n      ")])],1):t._e()],1),t._v(" "),e("el-row",{staticClass:"createBoxRow",attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"createBoxCol",attrs:{span:4}},[t._v("基金托管银行开户银行"),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),t.isEdit?t._e():e("el-col",{staticClass:"createBoxCol",attrs:{span:20}},[t._v(t._s(t.accountInfo.custodianOpenBank))]),t._v(" "),t.isEdit?e("el-col",{staticClass:"createBoxCol",attrs:{span:20}},[e("el-input",{staticClass:"editInput",attrs:{type:"text",maxlength:"60",size:"medium"},model:{value:t.accountInfo.custodianOpenBank,callback:function(a){t.$set(t.accountInfo,"custodianOpenBank",a)},expression:"accountInfo.custodianOpenBank"}})],1):t._e()],1),t._v(" "),e("el-row",{staticClass:"createBoxRow",staticStyle:{"border-bottom":"1.5px solid #ebeef5"},attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{staticClass:"createBoxCol",attrs:{span:4}},[t._v("基金托管银行账户名"),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),t.isEdit?t._e():e("el-col",{staticClass:"createBoxCol",attrs:{span:8}},[t._v(t._s(t.accountInfo.custodianBankaccount))]),t._v(" "),t.isEdit?e("el-col",{staticClass:"createBoxCol",attrs:{span:8}},[e("el-input",{staticClass:"editInput",attrs:{type:"text",maxlength:"60",size:"medium"},model:{value:t.accountInfo.custodianBankaccount,callback:function(a){t.$set(t.accountInfo,"custodianBankaccount",a)},expression:"accountInfo.custodianBankaccount"}})],1):t._e(),t._v(" "),e("el-col",{staticClass:"createBoxCol",attrs:{span:4}},[t._v("基金托管银行账户号"),e("span",{staticClass:"mustIn"},[t._v("*")])]),t._v(" "),t.isEdit?t._e():e("el-col",{staticClass:"createBoxCol",attrs:{span:8}},[t._v(t._s(t.accountInfo.custodianBankNum))]),t._v(" "),t.isEdit?e("el-col",{staticClass:"createBoxCol",attrs:{span:8}},[e("el-input",{staticClass:"editInput",attrs:{type:"text",maxlength:"60",size:"medium"},model:{value:t.accountInfo.custodianBankNum,callback:function(a){t.$set(t.accountInfo,"custodianBankNum",a)},expression:"accountInfo.custodianBankNum"}})],1):t._e()],1),t._v(" "),e("el-dialog",{attrs:{title:"新建托管银行",visible:t.bankVisible,width:"40%"},on:{"update:visible":function(a){t.bankVisible=a},close:t.newBankModalClose}},[e("el-form",{attrs:{model:t.newBankInfo}},[e("el-form-item",{attrs:{label:"托管银行名称","label-width":"120px"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",size:"small","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.writeNewBankName,loading:t.loading},on:{change:t.getNewBankInfo},model:{value:t.newBankInfo.bankId,callback:function(a){t.$set(t.newBankInfo,"bankId",a)},expression:"newBankInfo.bankId"}},t._l(t.selectNewBankList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),e("el-form-item",{attrs:{label:"联系人","label-width":"120px"}},[e("el-input",{attrs:{size:"small"},model:{value:t.newBankInfo.contacts,callback:function(a){t.$set(t.newBankInfo,"contacts",a)},expression:"newBankInfo.contacts"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"联系电话","label-width":"120px"}},[e("el-input",{attrs:{size:"small"},model:{value:t.newBankInfo.phone,callback:function(a){t.$set(t.newBankInfo,"phone",a)},expression:"newBankInfo.phone"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"reportBtn",on:{click:t.cancelNewBank}},[t._v("取 消")]),t._v(" "),e("el-button",{staticClass:"reportBtn",attrs:{type:"primary"},on:{click:t.submitNewBank}},[t._v("确 定")])],1)],1)],1)},s=[],o=(e("1bc7"),e("8dee"),e("698e")),l={name:"AccountInformation",props:["isEdit","accountInfo"],data:function(){return{bankInfo:{bankName:"中国银行"},newBankInfo:{},loading:!1,bankVisible:!1,selectNewBankList:[],selectBankList:[]}},watch:{accountInfo:{handler:function(t,a){this.selectBankList=[{value:t.custodianBankId,label:t.custodianBank}],this.accountInfo.custodianBankId=t.custodianBankId},deep:!0}},mounted:function(){},methods:{writeBankName:function(t){var a=this;t?(this.loading=!0,o["a"].bankInfoList({bankName:t.replace(/\s+/g,"")}).then((function(t){var e=t.data.data;a.loading=!1,e.length>0&&(a.selectBankList=e.map((function(t){return{value:t.bankId,label:t.bankName}})))}))):this.loading=!0},addNewBank:function(){this.bankVisible=!0},cancelNewBank:function(){this.bankVisible=!1},submitNewBank:function(){var t=this;this.newBankInfo.bankId&&""!==this.newBankInfo.bankId?o["a"].addBank(this.newBankInfo).then((function(a){"成功"===a.data.msg?(t.$message({offset:150,type:"success",message:"新增成功"}),t.bankVisible=!1):t.$message({offset:150,type:"warning",message:"".concat(a.data.msg)})})):this.$message({offset:150,type:"warning",message:"请选择新增托管银行名称"})},getBankInfo:function(t){var a=this;this.$forceUpdate(),this.selectBankList.forEach((function(e){e.value===t&&(a.accountInfo.custodianBank=e.label)}))},newBankModalClose:function(){this.newBankInfo={}},writeNewBankName:function(t){var a=this;t?(this.loading=!0,o["a"].QCCSearchData({keyword:t.replace(/\s+/g,"")}).then((function(t){var e=JSON.parse(t.data.data.value);a.loading=!1,null==e.Result||(a.selectNewBankList=e.Result.map((function(t){return{value:t.CreditCode,label:t.Name}})))}))):this.loading=!0},getNewBankInfo:function(t){var a=this;this.$forceUpdate(),o["a"].QCCDataGetDetailsByName({keyword:t}).then((function(t){var e=JSON.parse(t.data.data.value).Result;return null===e?(a.$message({offset:150,type:"warning",message:"查询无结果，请重新选择合适数据"}),a.newBankInfo.bankName="",!1):(a.newBankInfo.bankName=e.Name,e)})).then((function(t){return o["a"].saveEntBaseInfo(t)})).then((function(t){if("系统异常"===t.data.msg)return a.newBankInfo.bankName="",a.newBankInfo.bankId="",void a.$messgae({type:"warning",message:"网络波动，请重新选择"});a.newBankInfo.enteId=t.data.msg})).catch((function(t){}))}}},c=l,i=(e("3126"),e("4ac2")),u=Object(i["a"])(c,n,s,!1,null,null,null);a["default"]=u.exports}}]);