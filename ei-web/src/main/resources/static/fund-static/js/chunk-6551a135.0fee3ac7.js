(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6551a135"],{"3f5a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0)"}},[e.manageLabel?a("div",{staticClass:"labelManageBox"},[e._m(0),e._v(" "),e._l(e.labelList,(function(t,n){return[a("div",{key:n,staticClass:"labelManageContent",style:{paddingTop:0===n?"14px":"0px",marginTop:"0px"}},[a("div",{staticClass:"labelMangeParent"},[a("el-tag",{staticStyle:{"background-color":"#cc914b",height:"32px","line-height":"32px","border-color":"#cc914b"},attrs:{effect:"dark",size:"medium",closable:0===t.listStr.length},on:{close:function(a){return e.handleClose(t)}}},[a("span",{staticStyle:{"font-weight":"800"}},[e._v("·")]),e._v(" "+e._s(t.labelName))])],1),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"labelMangeChild"},[e._l(t.listStr,(function(t){return a("el-tag",{key:t.labelId,staticClass:"tag-item",attrs:{closable:"",size:"small","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v("\n            "+e._s(t.labelName)+"\n          ")])})),e._v(" "),t.inputVisible?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"saveTagInput"+t.labelId,refInFor:!0,staticClass:"input-new-tag",attrs:{maxlength:"100",size:"mini"},on:{blur:function(a){return e.handleInputConfirm(t,"child",n)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t,"child",n)}},model:{value:t.inputValue,callback:function(a){e.$set(t,"inputValue",a)},expression:"item.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:function(a){return e.showInput(t,"child",n)}}},[e._v("新增二级标签")])],2)])]})),e._v(" "),a("div",{staticClass:"labelManageContent",staticStyle:{"margin-top":"0px"}},[e.parentVisible?a("el-input",{ref:"parentInput",staticClass:"input-new-tag",attrs:{maxlength:"100",size:"mini"},on:{blur:function(t){return e.handleInputConfirm("","parent")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm("","parent")}},model:{value:e.parentValue,callback:function(t){e.parentValue=t},expression:"parentValue"}}):a("div",[a("el-button",{staticClass:"button-new-tag",staticStyle:{"margin-bottom":"14px"},attrs:{size:"mini"},on:{click:function(t){return e.showInput({},"parent")}}},[e._v("新增标签")])],1),e._v(" "),a("el-button",{staticClass:"detailSet",attrs:{size:"mini",type:"primary"},on:{click:e.manageLabelDetail}},[e._v("详细信息设置")])],1)],2):e._e(),e._v(" "),e.manageLabel?e._e():a("div",{staticClass:"labelManageBox"},[a("div",{staticClass:"labelManageTitle"},[a("div",[e._v("\n        企业标签\n      ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{click:function(t){e.manageLabel=!e.manageLabel}}},[e._v("返回")])],1),e._v(" "),a("div",{staticClass:"labelManageContent labelManageSet",staticStyle:{"margin-bottom":"60px"}},[a("el-table",{staticStyle:{width:"100%","margin-bottom":"60px"},attrs:{data:e.tableData.data,"header-cell-style":{background:"#FEFAFA",color:"#333",fontWeight:"bold",fontSize:"12px",textAlign:"center"},size:"small",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"标签名称",prop:"labelName",align:"left","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"填报信息",align:"left","min-width":"700"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox-group",{model:{value:t.row.labelItemList,callback:function(a){e.$set(t.row,"labelItemList",a)},expression:"scope.row.labelItemList"}},e._l(e.writeInfoList,(function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)]}}],null,!1,2896201241)})],1),e._v(" "),a("div",{staticClass:"labelManageSetBtn"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveItem}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.manageLabel=!e.manageLabel}}},[e._v("取消")])],1)],1)])])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"labelManageTitle"},[a("div",[e._v("\n        企业标签库管理\n      ")])])}],s=(a("aa18"),a("982e"),a("1bc7"),a("fc02"),a("7562")),i={name:"Index",directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},data:function(){return{inputVisible:!1,inputValue:"",manageLabel:!0,tableData:{data:[],currPage:1,pageSize:50,totalCount:0},labelList:[],writeInfoList:[],loading:!1,parentVisible:!1,parentValue:""}},mounted:function(){this.getLabelList(),this.getParentId("10270","writeInfoList")},methods:{getParentId:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(sessionStorage.getItem("code".concat(e))){var l=[];if(n){var i=n.split(",");JSON.parse(sessionStorage.getItem("code".concat(e))).forEach((function(e){i.includes(e.value)&&l.push(e)}))}else l=JSON.parse(sessionStorage.getItem("code".concat(e)));this[t]=l}else s["a"].getCodeByParentId({parentId:e}).then((function(l){var s=[];if(n){var i=n.split(",");l.data.data.options.forEach((function(e){i.includes(e.value)&&s.push(e)}))}else s=l.data.data.options;a[t]=s,sessionStorage.setItem("code".concat(e),JSON.stringify(l.data.data.options))}))},getLabelList:function(){var e=this;s["a"].getLabelAll().then((function(t){console.log(t),t.data.data.list.map((function(e){return e.listStr||(e.listStr=[]),e})),e.labelList=t.data.data.list}))},handleClose:function(e){var t=this;console.log(e),this.$confirm("确认删除此标签?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s["a"].labelSave({labelName:e.labelName,labelId:e.labelId,status:"1"}).then((function(e){"0"===e.data.status&&"成功"===e.data.msg?(t.$message({type:"success",offset:150,message:"成功删除"}),t.getLabelList()):t.$message({type:"warning",offset:150,message:e.data.msg})}))}))},showInput:function(e,t,a){var n=this;"child"===t?this.$set(this.labelList[a],"inputVisible",!0):(this.parentVisible=!0,this.$nextTick((function(){n.$refs.parentInput.$refs.input.focus()})))},handleInputConfirm:function(e,t,a){var n=this;if(console.log(e),"parent"!==t){var l=e.inputValue?e.inputValue:"";l.trim()&&s["a"].labelSave({labelName:l.trim(),labelId:"",status:"",parentId:e.labelId}).then((function(e){"0"===e.data.status&&"成功"===e.data.msg?(n.getLabelList(),n.$message({type:"success",offset:150,message:"成功新增"})):n.$message({type:"warning",offset:150,message:e.data.msg})})),this.$set(this.labelList[a],"inputVisible",!1),this.$set(this.labelList[a],"inputValue","")}else{var i=this.parentValue;this.parentVisible=!1,i.trim()&&s["a"].labelSave({labelName:i.trim(),labelId:"",status:"",parentId:"0"}).then((function(e){"0"===e.data.status&&"成功"===e.data.msg?(n.getLabelList(),n.$message({type:"success",offset:150,message:"成功新增"})):n.$message({type:"warning",offset:150,message:e.data.msg})}))}},saveItem:function(){var e=this,t=this.tableData.data.map((function(e){return{labelId:e.labelId,names:e.labelItemList.join(",")}}));this.loading=!0,s["a"].labelSaveItem(t).then((function(t){"0"===t.data.status&&"成功"===t.data.msg?(e.$message({type:"success",offset:150,message:"保存成功"}),e.loading=!1,e.manageLabel=!e.manageLabel):(e.$message({type:"warning",offset:150,message:t.data.msg}),e.loading=!1)}))},manageLabelDetail:function(){var e=this;this.manageLabel=!this.manageLabel,!1===this.manageLabel&&s["a"].labelItemList().then((function(t){console.log(t),e.tableData.data=t.data.data.map((function(e){return e.labelItemList=e.labelItemList.map((function(e){return e.property})),e}))}))}}},o=i,r=(a("69e5"),a("4ac2")),c=Object(r["a"])(o,n,l,!1,null,"175cc5c1",null);t["default"]=c.exports},"69e5":function(e,t,a){"use strict";a("75aa")},"75aa":function(e,t,a){}}]);