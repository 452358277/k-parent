(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25ef571c"],{"6a21":function(e,t,a){},a981d:function(e,t,a){"use strict";a("6a21")},ad1d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addOrModify"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"80%","close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.dialogFormClose}},[a("el-dialog",{attrs:{width:"90%",title:e.isAddOrMOdify?"新增一级指标":"一级指标编辑",visible:e.oneInnerVisible,"append-to-body":""},on:{"update:visible":function(t){e.oneInnerVisible=t}}},[a("el-form",{ref:"oneRuleForm",staticClass:"demo-ruleForm",attrs:{model:e.oneRuleForm,rules:e.oneRules}},[a("el-form-item",{attrs:{label:"一级指标名称",prop:"name"}},[a("el-input",{model:{value:e.oneRuleForm.name,callback:function(t){e.$set(e.oneRuleForm,"name",t)},expression:"oneRuleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分值",prop:"value"}},[a("el-input",{model:{value:e.oneRuleForm.value,callback:function(t){e.$set(e.oneRuleForm,"value",t)},expression:"oneRuleForm.value"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.oneSubmitForm("oneRuleForm")}}},[e._v("确定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"40%",title:e.isAddOrMOdify?"新增二级指标":"二级指标编辑",visible:e.twoInnerVisible,"append-to-body":""},on:{"update:visible":function(t){e.twoInnerVisible=t}}},[a("el-form",{ref:"twoRuleForm",staticClass:"demo-ruleForm",attrs:{model:e.twoRuleForm,rules:e.twoRules}},[a("el-form-item",{attrs:{label:"二级指标名称",prop:"name"}},[a("el-input",{model:{value:e.twoRuleForm.name,callback:function(t){e.$set(e.twoRuleForm,"name",t)},expression:"twoRuleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分值",prop:"value"}},[a("el-input",{model:{value:e.twoRuleForm.value,callback:function(t){e.$set(e.twoRuleForm,"value",t)},expression:"twoRuleForm.value"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.twoSubmitForm("twoRuleForm")}}},[e._v("确定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"40%",title:e.isAddOrMOdify?"新增三级指标":"三级指标编辑",visible:e.threeInnerVisible,"append-to-body":""},on:{"update:visible":function(t){e.threeInnerVisible=t}}},[a("el-form",{ref:"threeRuleForm",staticClass:"demo-ruleForm",attrs:{model:e.threeRuleForm,rules:e.threeRules}},[a("el-form-item",{attrs:{label:"三级指标名称",prop:"name"}},[a("el-input",{model:{value:e.threeRuleForm.name,callback:function(t){e.$set(e.threeRuleForm,"name",t)},expression:"threeRuleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分值",prop:"value"}},[a("el-input",{model:{value:e.threeRuleForm.value,callback:function(t){e.$set(e.threeRuleForm,"value",t)},expression:"threeRuleForm.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评分细则",prop:"tSuggest"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.threeRuleForm.tSuggest,callback:function(t){e.$set(e.threeRuleForm,"tSuggest",t)},expression:"threeRuleForm.tSuggest"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.threeSubmitForm("threeRuleForm")}}},[e._v("确定")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"column",justifyContent:"space-between",marginBottom:"25px"}},[a("div",{staticClass:"title-item"},[e._v("基本信息")]),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{border:"0px",width:"450px"},attrs:{model:e.queryData,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"年度绩效标题",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:e.queryData.name,callback:function(t){e.$set(e.queryData,"name",t)},expression:"queryData.name"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"年度",prop:"pYear"}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{size:"small",type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.queryData.pYear,callback:function(t){e.$set(e.queryData,"pYear",t)},expression:"queryData.pYear"}}),e._v(" "),e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"kaoheTime"}},[a("el-date-picker",{staticStyle:{width:"353px"},attrs:{type:"monthrange","value-format":"yyyy-MM","range-separator":"至",size:"small","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.queryData.kaoheTime,callback:function(t){e.$set(e.queryData,"kaoheTime",t)},expression:"queryData.kaoheTime"}})],1)],1),e._v(" "),a("el-row",{staticClass:"infoRow",staticStyle:{border:"none"},attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n          年度绩效标题\n          "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[e.isEdit?a("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.queryData.name,callback:function(t){e.$set(e.queryData,"name",t)},expression:"queryData.name"}}):a("div",[e._v(e._s(e.queryData.name))])],1),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n          年度\n          "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[e.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",size:"small","value-format":"yyyy",placeholder:"选择年"},model:{value:e.queryData.pYear,callback:function(t){e.$set(e.queryData,"pYear",t)},expression:"queryData.pYear"}}):a("div",[e._v(e._s(e.queryData.pYear))])],1)],1),e._v(" "),a("el-row",{staticClass:"infoRow",staticStyle:{border:"none"},attrs:{type:"flex",align:"center",justify:"center"}},[a("el-col",{staticClass:"col-title",attrs:{span:4}},[e._v("\n          考核填报截止日期\n          "),a("span",{staticClass:"mustIn"},[e._v("*")])]),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}},[e.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"monthrange",size:"small","value-format":"yyyy-MM","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.queryData.kaoheTime,callback:function(t){e.$set(e.queryData,"kaoheTime",t)},expression:"queryData.kaoheTime"}}):a("div",[e._v(e._s(e.queryData.kaoheTime[0])+" 至 "+e._s(e.queryData.kaoheTime[1]))])],1),e._v(" "),a("el-col",{staticClass:"col-title",attrs:{span:4}}),e._v(" "),a("el-col",{staticClass:"col-content",attrs:{span:8}})],1)],1),e._v(" "),a("div",[a("div",{staticClass:"title-item"},[e._v("指标配置")]),e._v(" "),e.isEdit?a("div",{staticStyle:{marginBottom:"10px"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.oneCreate}},[e._v("新增")])],1):e._e(),e._v(" "),e.forceUpdate?a("el-table",{staticClass:"jixiao",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{staticStyle:{display:"flex","align-items":"center"},attrs:{label:"指标名称",prop:"name",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%"}},[e.isEdit?a("el-input",{attrs:{size:"small"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}):a("div",[e._v(e._s(t.row.name))])],1)]}}],null,!1,2007713586)}),e._v(" "),a("el-table-column",{attrs:{label:"分值",prop:"value",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["3"===t.row.type?a("div",{staticStyle:{width:"100%"}},[e.isEdit?a("el-input",{attrs:{size:"small"},on:{input:e.getNewValue},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),e._v(" "),e.isEdit?e._e():a("div",[e._v(e._s(t.row.value))])],1):a("div",{staticStyle:{width:"100%"}},[e._v("\n              "+e._s(t.row.value)+"\n            ")])]}}],null,!1,4096680580)}),e._v(" "),a("el-table-column",{attrs:{label:"评分细则",prop:"tSuggest"},scopedSlots:e._u([{key:"default",fn:function(t){return["3"===t.row.type?a("div",{staticStyle:{width:"100%"}},[e.isEdit?a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea"},model:{value:t.row.tSuggest,callback:function(a){e.$set(t.row,"tSuggest",a)},expression:"scope.row.tSuggest"}}):a("pre",[e._v(e._s(t.row.tSuggest))])],1):e._e()]}}],null,!1,2119614657)}),e._v(" "),a("el-table-column",{attrs:{label:"评价内容",prop:"tExplain"},scopedSlots:e._u([{key:"default",fn:function(t){return["3"===t.row.type?a("div",{staticStyle:{width:"100%"}},[e.isEdit?a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea"},model:{value:t.row.tExplain,callback:function(a){e.$set(t.row,"tExplain",a)},expression:"scope.row.tExplain"}}):a("pre",[e._v(e._s(t.row.tExplain))])],1):e._e()]}}],null,!1,2303202337)}),e._v(" "),e.isEdit?a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return["3"!==t.row.type?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.creat(t)}}},[e._v("新增\n            ")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.delet(t.row)}}},[e._v("删除")])]}}],null,!1,2848329476)}):e._e()],1):e._e()],1),e._v(" "),e.isEdit?a("div",{staticStyle:{textAlign:"center"}},[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.saveMain("ruleForm","save")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.saveMain("ruleForm","submit")}}},[e._v("提交")])],1):e._e(),e._v(" "),e.isEdit?e._e():a("div",{staticStyle:{textAlign:"center"}},[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.close}},[e._v("关闭")])],1)],1)],1)},r=[],n=(a("e680"),a("a450"),a("1bc7"),a("37ec")),l=a("9975"),s={components:{twoAddOrModify:l["default"]},data:function(){var e=function(e,t,a){""===t?a(new Error("分值不能为空")):/^(?:1|[1-9][0-9]?|100)$/.test(t)?a():a(new Error("分值1-100以内"))};return{forceUpdate:!0,tableOneID:1e3,tableTwoID:2e3,tableThreeID:3e3,tableData:[],year:"",options:[{value:"选项1",label:"第一季度"},{value:"选项2",label:"第二季度"},{value:"选项3",label:"第三季度"},{value:"选项4",label:"第四季度"},{value:"选项5",label:"上半年"},{value:"选项6",label:"下半年"},{value:"选项7",label:"全年"}],dialogFormVisible:!1,oneInnerVisible:!1,twoInnerVisible:!1,threeInnerVisible:!1,queryData:{name:"",kaoheTime:[],pYear:""},oneRuleForm:{name:"",value:""},twoRuleForm:{name:"",value:""},threeRuleForm:{name:"",value:"",tSuggest:""},oneRules:{name:[{required:!0,message:"请输入绩效名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],value:[{required:!0,validator:e,trigger:"blur"}]},twoRules:{name:[{required:!0,message:"请输入绩效名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],value:[{required:!0,validator:e,trigger:"blur"}]},threeRules:{name:[{required:!0,message:"请输入绩效名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],value:[{required:!0,validator:e,trigger:"blur"}],tSuggest:[{required:!0,message:"评审细则必填",trigger:"blur"},{min:1,max:200,message:"长度在 1 到 200 个字符",trigger:"blur"}]},rules:{name:[{required:!0,message:"请输入绩效名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],pYear:[{required:!0,message:"请输入绩效年度",trigger:"change"}],kaoheTime:[{required:!0,message:"请输入时间",trigger:"change"}]},isAddOrMOdify:"",oneTableData:[],pPerID:"",oneButtons:[{code:"111",name:"新增一级指标",btnScope:"normal"},{code:"112",name:"编辑",btnScope:"single"},{code:"113",name:"删除",btnScope:"multi"}],selectedItem:"",witchClick:"",isEdit:!0,dialogTitle:""}},watch:{tableDate:{handler:function(e){},deep:!0}},methods:{delet:function(e){var t=this;this.$confirm("确定删除选中数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if("1"===e.type){var a=[];t.tableData.forEach((function(t){t.id!==e.id&&a.push(t)})),t.tableData=a}"2"===e.type&&t.tableData.forEach((function(t){t.children.forEach((function(a,i){a.id==e.id&&t.children.splice(i,1)}))})),"3"===e.type&&t.tableData.forEach((function(t){t.children.forEach((function(t){t.children.forEach((function(a,i){a.id==e.id&&t.children.splice(i,1)}))}))})),t.$message({type:"success",message:"删除成功!",offset:150}),t.getNewValue()})).catch((function(){t.$message({type:"info",message:"已取消删除",offset:150})}))},edit:function(e){this.isAddOrMOdify=!1,this.witchClick=e,"1"===(e.id+"").substr(0,1)&&(this.oneInnerVisible=!this.oneInnerVisible,this.oneRuleForm.name=e.name,this.oneRuleForm.value=e.value),"2"===(e.id+"").substr(0,1)&&(this.twoInnerVisible=!this.twoInnerVisible,this.twoRuleForm.name=e.name,this.twoRuleForm.value=e.value),"3"===(e.id+"").substr(0,1)&&(this.threeInnerVisible=!this.threeInnerVisible,this.threeRuleForm.name=e.name,this.threeRuleForm.value=e.value,this.threeRuleForm.tSuggest=e.tSuggest)},creat:function(e){if("1"===e.row.type)this.tableData.forEach((function(t){t.id===e.row.id&&t.children.push({name:"二级指标名称",value:0,id:(new Date).getTime(),tSuggest:"",parentId:t.id,type:"2",children:[]})}));else if("2"===e.row.type){var t=e.row.parentId;this.tableData.forEach((function(a){a.id===t&&a.children.forEach((function(t){t.id===e.row.id&&t.children.push({name:"三级指标名称",value:0,id:(new Date).getTime(),tSuggest:"",parentId:t.id,type:"3"})}))}))}},showDialog:function(e,t){var a=this;this.dialogFormVisible=!this.dialogFormVisible,this.tableData=[],"111"===e?(this.dialogTitle="年度绩效配置新增",this.isEdit=!0,this.pPerID="",this.oneTableData=[],this.queryData.name="",this.queryData.pYear="",this.queryData.kaoheTime=[],this.isAddOrMOdify=!0):"112"!==e&&"115"!==e||("112"===e?(this.isEdit=!0,this.dialogTitle="年度绩效配置编辑"):"115"===e&&(this.isEdit=!1,this.dialogTitle="年度绩效配置查看"),this.queryData.kaoheTime=[],this.queryData.name=t[0].pName,this.queryData.pYear=t[0].pYear,this.queryData.kaoheTime.push(t[0].pAssessStartTime),this.queryData.kaoheTime.push(t[0].pAssessEndTime),this.pPerID=t[0].pPerID,t[0].perfOneNormModel.forEach((function(e,t){var i={};i.id=a.tableOneID++,e.id=a.tableOneID++,i.name=e.oOneName,i.value=e.oOneScore,i.children=[],i.type="1",a.tableData.push(i),e.perfSecondNormModel.forEach((function(i,r){var n={};n.id=a.tableTwoID++,i.id=a.tableTwoID++,n.name=i.sTwoName,n.value=i.sTwoScore,n.type="2",n.parentId=e.id-1,n.children=[],a.tableData[t].children.push(n),i.perfThreeNormModel.forEach((function(e,n){var l={};l.id=a.tableThreeID++,e.id=a.tableThreeID++,l.name=e.tThreeName,l.value=e.tThreeScore,l.tExplain=e.tExplain,l.type="3",l.parentId=i.id-1,l.tSuggest=e.tSuggest,a.tableData[t].children[r].children.push(l)}))}))})),this.isAddOrMOdify=!1)},saveMain:function(e,t){var a=this;this.$refs[e].validate((function(e){if(e){a.queryData.pPerID=a.pPerID,a.queryData.pName=a.queryData.name,a.queryData.pAssessStartTime=a.queryData.kaoheTime[0],a.queryData.pAssessEndTime=a.queryData.kaoheTime[1],a.queryData.perfOneNormModel=[],a.tableData.forEach((function(e){a.queryData.perfOneNormModel.push(e)})),a.queryData.perfOneNormModel.forEach((function(e){e.oOneName=e.name,e.oOneScore=e.value,e.perfSecondNormModel=e.children})),a.queryData.perfOneNormModel.forEach((function(e){e.perfSecondNormModel.forEach((function(e){e.sTwoName=e.name,e.sTwoScore=e.value,e.perfThreeNormModel=e.children}))})),a.queryData.perfOneNormModel.forEach((function(e){e.perfSecondNormModel.forEach((function(e){e.perfThreeNormModel.forEach((function(e){e.tThreeName=e.name,e.tThreeScore=e.value}))}))}));var i,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["1","2","3","4","1"],t={};for(var a in e){if(t[e[a]])return!0;t[e[a]]=!0}return!1},l=[];if(a.queryData.perfOneNormModel.forEach((function(e){if(l.push(e.name),r(l))return a.$message({offset:150,type:"warning",message:"一级指标名称不能重复"}),void(i=!1);var t=[];e.perfSecondNormModel.forEach((function(e){if(t.push(e.name),r(t))return a.$message({offset:150,type:"warning",message:"二级指标名称不能重复"}),void(i=!1);var n=[];e.perfThreeNormModel.forEach((function(e){if(n.push(e.name),r(n))return a.$message({offset:150,type:"warning",message:"三级指标名称不能重复"}),void(i=!1)}))}))})),"save"===t&&!1!==i)a.queryData.tag=0,n["a"].addPerf(a.queryData).then((function(e){"0"===e.data.status?(a.$message({offset:150,type:"success",message:"保存成功"}),a.$emit("getTableList"),a.dialogFormVisible=!a.dialogFormVisible):"400"===e.data.status&&(a.$message({offset:150,type:"warning",message:"绩效年度不能重复"}),a.queryData.pYear="")}));else if("submit"===t&&!1!==i){var s=!0;a.queryData.tag=2,0==a.tableData.length?(s=!1,a.$message({offset:150,type:"warning",message:"一级指标不能为空"})):a.tableData.forEach((function(e){0==e.children.length?(s=!1,a.$message({offset:150,type:"warning",message:"二级指标存在空值"})):e.children.forEach((function(e){0==e.children.length&&(s=!1,a.$message({offset:150,type:"warning",message:"三级指标存在空值"}))}))}));var o=0;if(a.tableData.forEach((function(e){o+=e.value})),100!==o)return void a.$message({offset:150,type:"warning",message:"一级指标分数总和应为100分"});s&&n["a"].addPerf(a.queryData).then((function(e){"0"===e.data.status?(a.$message({offset:150,type:"success",message:"提交成功"}),a.dialogFormVisible=!a.dialogFormVisible,a.$emit("getTableList")):"400"===e.data.status&&(a.$message({offset:150,type:"warning",message:"绩效年度不能重复"}),a.queryData.pYear="")}))}}else{if(!a.queryData.name)return void a.$message({offset:150,type:"warning",message:"请填写年度绩效标题"});if(!a.queryData.pYear)return void a.$message({offset:150,type:"warning",message:"请选择年度"});if(0===a.queryData.kaoheTime.length)return void a.$message({offset:150,type:"warning",message:"请选择考核填报截止日期"})}}))},oneCreate:function(e){var t=(new Date).getTime();this.tableData.push({name:"一级指标名称",value:0,id:t,tSuggest:"",type:"1",children:[]})},panduanFn:function(e){var t=this,a=[];return e.forEach((function(e){e.id!==t.witchClick.id&&a.push(e)})),a},threeSubmitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={};if(a.name=t.threeRuleForm.name,a.value=t.threeRuleForm.value,a.tSuggest=t.threeRuleForm.tSuggest,a.id=t.tableThreeID++,t.isAddOrMOdify)t.tableData.forEach((function(e){0!==e.children.length&&e.children.forEach((function(e){if(e.id===t.witchClick.id){var i=Number(a.value);if(e.children.forEach((function(e){i+=Number(e.value)})),i>Number(e.value))return t.$message.warning("三级指标不能大于二级指标!");e.children.push(a),t.threeInnerVisible=!t.threeInnerVisible}}))}));else if(!t.isAddOrMOdify){var i=Number(a.value),r="",n=[];if(t.tableData.forEach((function(e){e.children.forEach((function(e){e.children.forEach((function(a){a.id==t.witchClick.id&&(n=e.children,r=Number(e.value))}))}))})),t.panduanFn(n).length=0){if(i>r)return void t.$message.warning("三级指标不能大于二级指标!");t.tableData.forEach((function(e){e.children.forEach((function(e){e.children.forEach((function(e){e.id===t.witchClick.id&&(e.name=a.name,e.value=a.value,t.threeInnerVisible=!t.threeInnerVisible)}))}))}))}else{if(t.panduanFn(n).forEach((function(e){i+=Number(e.value)})),i>r)return void t.$message.warning("三级指标不能大于二级指标!");t.tableData.forEach((function(e){e.children.forEach((function(e){e.children.forEach((function(e){e.id===t.witchClick.id&&(e.name=a.name,e.value=a.value,t.threeInnerVisible=!t.threeInnerVisible)}))}))}))}}}}))},twoSubmitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={};if(a.name=t.twoRuleForm.name,a.value=t.twoRuleForm.value,a.id=t.tableTwoID++,a.children=[],t.isAddOrMOdify)t.tableData.forEach((function(e){if(t.witchClick.id===e.id){var i=Number(a.value);if(e.children.forEach((function(e){i+=Number(e.value)})),i>Number(e.value))return t.$message.warning("二级指标不能大于一级指标!");e.children.push(a),t.twoInnerVisible=!t.twoInnerVisible}}));else if(!t.isAddOrMOdify){var i=Number(a.value),r="";if(t.tableData.forEach((function(e){e.children.forEach((function(a){a.id!==t.witchClick.id?i+=Number(a.value):r=Number(e.value)}))})),i>r)return t.$message.warning("二级指标不能大于一级指标!");t.tableData.forEach((function(e){e.children.forEach((function(e){e.id===t.witchClick.id&&(e.name=a.name,e.value=a.value,t.twoInnerVisible=!t.twoInnerVisible)}))}))}}}))},oneSubmitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={};if(a.name=t.oneRuleForm.name,a.value=t.oneRuleForm.value,a.id=t.tableOneID++,a.children=[],t.isAddOrMOdify){var i=Number(a.value);if(t.tableData.forEach((function(e){i+=Number(e.value)})),i>100)return void t.$message({offset:150,type:"warning",message:"一级指标不能大于100"});t.tableData.push(a),t.oneInnerVisible=!t.oneInnerVisible}else if(!t.isAddOrMOdify){var r=Number(a.value);if(t.tableData.forEach((function(e){e.id!==t.witchClick.id&&(r+=Number(e.value))})),r>100)return void t.$message({offset:150,type:"warning",message:"一级指标不能大于100"});t.tableData.forEach((function(e){e.id===t.witchClick.id&&(e.name=a.name,e.value=a.value,t.oneInnerVisible=!t.oneInnerVisible)}))}}}))},deleteOne:function(){var e=this;this.$confirm("是否确定删除选中数据!","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["a"].delectOneNorms(e.selectedItem[0].oNormId).then((function(t){e.$message({offset:150,type:"success",message:"删除成功"})}))})).catch((function(){e.$message({offset:150,type:"info",message:"已取消删除"})}))},editOne:function(){this.$refs.twoAddOrModify.showDialog(this.selectedItem,this.oneTableData)},handleSelectionChange:function(e){this.selectedItem=e},option:function(e){"111"===e?this.oneCreate():"113"===e?this.deleteOne():"112"===e&&this.editOne()},setStatus:function(e){return"single"===e?1!==this.selectedItem.length:"multi"===e?!(this.selectedItem.length>=1):"normal"!==e},getNewValue:function(){this.tableData.forEach((function(e){e.value=0,e.children.forEach((function(t){t.value=0,t.children.forEach((function(a){t.value=Number(t.value)+Number(a.value),e.value=Number(e.value)+Number(a.value)}))}))}))},close:function(){this.dialogFormVisible=!this.dialogFormVisible},dialogFormClose:function(){this.tableData=[]}}},o=s,u=(a("a981d"),a("c38f"),a("4ac2")),c=Object(u["a"])(o,i,r,!1,null,"cc793a94",null);t["default"]=c.exports},c38f:function(e,t,a){"use strict";a("c90e")},c90e:function(e,t,a){}}]);